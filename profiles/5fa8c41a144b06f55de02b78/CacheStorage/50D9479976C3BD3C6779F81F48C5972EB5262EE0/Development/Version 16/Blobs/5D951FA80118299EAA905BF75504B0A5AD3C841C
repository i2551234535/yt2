(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"51jI":function(e,t,a){"use strict";t.a={edit:"ProfileBirthdate_Edit_Button",cancel:"ProfileBirthdate_Cancel_Button",save:"Profile_Save_Button",remove:"ProfileBirthdate_Remove_Button",monthSelector:"ProfileBirthdate_Month_Selector",daySelector:"ProfileBirthdate_Day_Selector",yearSelector:"ProfileBirthdate_Year_Selector",missingBirthdate:"ProfileBirthdate_Missing_Birthdate"}},"53j7":function(e,t,a){"use strict";a.d(t,"f",(function(){return M})),a.d(t,"g",(function(){return O})),a.d(t,"a",(function(){return B})),a.d(t,"c",(function(){return P})),a.d(t,"b",(function(){return I})),a.d(t,"d",(function(){return D})),a.d(t,"e",(function(){return U})),a.d(t,"h",(function(){return j})),a.d(t,"i",(function(){return T})),a.d(t,"j",(function(){return k}));a("1t7P"),a("2G9S"),a("LW0h"),a("jwue"),a("daRM"),a("FtHn"),a("+KXO"),a("7x/C"),a("JtPf"),a("+oxZ");var r=a("ddV6"),n=a.n(r),i=a("KEM+"),o=a.n(i),c=a("oEOe"),d=a("AspN"),l=a("/kEJ"),s=a("XMGw"),u=a("Ssj5");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f="".concat(s.a,"/profile"),m="rweb/".concat(f),b=function(e){return"".concat(m,"/").concat(e)},v=c.a(m,"REMOVE_PROFILE_BANNER"),_=c.a(m,"UPDATE_PROFILE"),y=c.a(m,"UPDATE_PROFILE_AVATAR"),g=c.a(m,"UPDATE_PROFILE_BANNER"),C=c.a(m,"UPLOAD_MEDIA"),E={avatarMediaId:null,bannerMediaId:null,isUploading:!1};var M=function(e){return e[f].avatarMediaId},O=function(e){return e[f].bannerMediaId},R=b("ADD_AVATAR_MEDIA"),B=function(e){return{meta:{mediaId:e},type:R}},A=b("REMOVE_AVATAR_MEDIA"),P=function(e){return{meta:{mediaId:e},type:A}},S=b("ADD_BANNER_MEDIA"),I=function(e){return{meta:{mediaId:e},type:S}},w=b("REMOVE_BANNER_MEDIA"),D=function(e){return{meta:{mediaId:e},type:w}},U=function(e){return function(t,a,r){var n=r.api;return c.b(t,{params:e,request:n.Settings.removeProfileBanner})({actionTypes:v,context:"ACTION_REMOVE_USER_BANNER"},(function(e){if(e)return[Object(l.c)({users:o()({},e.id_str,p(p({},e),{},{profile_banner_url:null}))})]}))}},j=function(e){return function(t,a,r){var n=r.api;return c.b(t,{params:e,request:n.Settings.updateProfile})({actionTypes:_,context:"ACTION_UPDATE_PROFILE_SETTINGS"},(function(e){if(e&&e.entities)return[Object(l.c)(e.entities)]}))}},L=function(e,t,a){return function(r){return function(i,s,u){var h=u.api;i({type:C.REQUEST});var p=d.k(r);return i(p).then((function(r){var d=n()(r,1)[0];i([{type:C.SUCCESS},{type:e.REQUEST}]);return c.b(i,{params:{media_id:d.uploadId},request:a(h)})({actionTypes:_,context:t},(function(e){if(e)return[Object(l.c)({users:o()({},e.id_str,e)})]}))}),(function(e){return i({type:C.FAILURE}),Promise.reject(e)}))}}},T=L(y,"ACTION_UPDATE_USER_AVATAR",(function(e){return e.Settings.updateProfileAvatar})),k=L(g,"ACTION_UPDATE_USER_BANNER",(function(e){return e.Settings.updateProfileBanner}));u.a.register(o()({},f,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case R:return p(p({},e),{},{avatarMediaId:t.meta.mediaId});case A:return p(p({},e),{},{avatarMediaId:null});case S:return p(p({},e),{},{bannerMediaId:t.meta.mediaId});case w:return p(p({},e),{},{bannerMediaId:null});case C.REQUEST:return p(p({},e),{},{isUploading:!0});case C.FAILURE:case C.SUCCESS:return p(p({},e),{},{isUploading:!1});default:return e}})))},P68U:function(e,t,a){"use strict";a("2G9S"),a("hBpG"),a("hCOa"),a("jQ3i"),a("z84I"),a("7x/C"),a("OZaJ"),a("DZ+c"),a("x4t0"),a("87if"),a("uFXj");var r=a("VrFO"),n=a.n(r),i=a("Y9Ll"),o=a.n(i),c=a("1Pcy"),d=a.n(c),l=a("5Yy7"),s=a.n(l),u=a("N+ot"),h=a.n(u),p=a("AuHH"),f=a.n(p),m=a("KEM+"),b=a.n(m),v=a("ERkP"),_=a("oEGd"),y=a("AspN"),g={addMedia:y.b,processMultipleMedia:y.d},C=Object(_.b)(g),E=a("3XMw"),M=a.n(E),O=a("pKoL"),R=a("MWbm"),B=a("rFBM"),A=a("/yvb"),P=a("9Xij"),S=a("rHpw"),I=a("hOZg"),w=(a("1t7P"),a("LW0h"),a("jwue"),a("daRM"),a("FtHn"),a("+KXO"),a("+oxZ"),a("Lsrn")),D=a("k/Ka");function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)("svg",j(j({},e),{},{style:[w.a.root,e.style],viewBox:"0 0 24 24"}),v.createElement("g",null,v.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),v.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})))};L.metadata={width:24,height:24};var T=L,k=a("VPdC");function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=f()(e);if(t){var n=f()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return h()(this,a)}}var F=M.a.b87ca51a,x=function(e){s()(a,e);var t=N(a);function a(){var e;n()(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),b()(d()(e),"_getAcceptedFileInputs",(function(){var t=e.props,a=t.acceptGifs,r=t.acceptVideo;return Object(k.b)({acceptGifs:a,acceptVideo:r})})),b()(d()(e),"_handleAddMediaFiles",(function(t){var a=e.props,r=a.addMedia,n=a.location,i=a.onChange,o=a.onFailure,c=a.processMultipleMedia,d=e._getAcceptedFileInputs(),l=Array.from(t).find((function(e){return d.includes(e.type)}));l&&r([l],{location:n}).then((function(e){i&&i(e.map((function(e){return e.id}))),c(e,{onFailure:o})}))})),e}return o()(a,[{key:"render",value:function(){var e=this.props,t=e.borderRadius,a=e.maskStyle,r=e.mediaItem,n=e.onRemove,i=e.rootStyle,o=r&&!r.uploader;return v.createElement(R.a,{style:[V.container,i,H[t]]},v.createElement(B.a,{onFilesAdded:this._handleAddMediaFiles,style:[V.dragDropContainer,H[t]]},this._renderPreview(),o?null:v.createElement(v.Fragment,null,v.createElement(R.a,{style:[V.mask,a,H[t]]}),v.createElement(R.a,{style:V.mediaPicker},this._renderMediaPicker(),n?this._renderMediaRemove():null))))}},{key:"_renderMediaRemove",value:function(){var e=this.props.onRemove;return v.createElement(A.a,{accessibilityLabel:F,icon:v.createElement(I.a,null),onPress:e,style:V.remove,type:"invertedText"})}},{key:"_renderMediaPicker",value:function(){var e=this.props,t=e.acceptGifs,a=e.acceptVideo,r=e.accessibilityLabel;return v.createElement(k.a,{acceptGifs:t,acceptVideo:a,accessibilityLabel:r,icon:v.createElement(T,null),onChange:this._handleAddMediaFiles,type:"invertedText"})}},{key:"_renderPreview",value:function(){var e=this.props,t=e.aspectRatio,a=e.borderRadius,r=e.currentContent,n=e.mediaItem;return n?v.createElement(P.a,{ratio:t},v.createElement(O.a,{borderRadius:a,enableGif:!1,mediaItem:n,style:V.mediaPreview,withCloseButton:!1})):r}}]),a}(v.Component);b()(x,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:"none"});var H=S.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.small},none:{borderRadius:e.borderRadii.none}}})),V=S.a.create((function(e){return{mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},remove:{marginLeft:e.spaces.large},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"}}}));t.a=C(x)},PVvL:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("yH/f");var r=Object.freeze({SELF:"self",MUTUAL_FOLLOW:"mutualfollow",FOLLOWING:"following",FOLLOWERS:"followers",PUBLIC:"public"})},fS8x:function(e,t,a){"use strict";var r=a("ERkP"),n=(a("7x/C"),a("OZaJ"),a("DZ+c"),a("VrFO")),i=a.n(n),o=a("Y9Ll"),c=a.n(o),d=a("1Pcy"),l=a.n(d),s=a("5Yy7"),u=a.n(s),h=a("N+ot"),p=a.n(h),f=a("AuHH"),m=a.n(f),b=a("KEM+"),v=a.n(b),_=a("rxPX"),y=a("/NU0"),g=a("AspN"),C=function(e,t){return t.media?t.media:Object(y.a)(t.mediaId)?Object(g.g)(e,t.mediaId)[0]:void 0},E=function(e,t){return void 0!==t.mediaId?t.mediaId:t.media?t.media.id:null},M=Object(_.a)().propsFromState((function(){return{media:C,mediaId:E}})).propsFromActions((function(){return{processMedia:g.c,updateMediaUpload:g.j}})).withAnalytics({page:"media",section:"edit"}),O=a("jHSc"),R=a("3XMw"),B=a.n(R),A=a("EeFI"),P=a("/yvb"),S=a("rHpw");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=m()(e);if(t){var n=m()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return p()(this,a)}}var w=B.a.gd80afba,D=B.a.a753a87f,U=function(e){u()(a,e);var t=I(a);function a(e){var n;return i()(this,a),n=t.call(this,e),v()(l()(n),"_getMedia",(function(){var e=n.props.media;return e&&e.mediaFile&&e.mediaFile.isImage?e:null})),v()(l()(n),"_renderAppBarRightControl",(function(){var e=n.state.isProcessing;return r.createElement(P.a,{disabled:e,onPress:n._handleApplyButtonClick,size:"normalCompact",type:"primary"},D)})),v()(l()(n),"_handleBackClick",(function(){var e=n.props,t=e.analytics,a=e.onCancel;t.scribe({action:"cancel"}),a&&a()})),v()(l()(n),"_handleApplyButtonClick",(function(){var e=n.props.onCropDone,t=n._cropper.current;if(t){var a=n.props,r=a.analytics,i=a.media,o=a.mediaId,c=a.onDone,d=a.processMedia,l=a.updateMediaUpload;n.setState({isProcessing:!0});var s=t.getCropData(),u=(i||{}).originalMediaFile,h=!u||0===s.top&&0===s.left&&s.width===u.width&&s.height===u.height;Object(y.a)(o)&&(e?(e(s),c()):(l({id:o,cropData:h?void 0:s}),d(o).then((function(){n.setState({isProcessing:!1}),r.scribe({action:"done"}),c()}))))}})),n.state={isProcessing:!1},n._cropper=r.createRef(),e.media||e.onCancel(),n}return c()(a,[{key:"render",value:function(){var e=this.props,t=e.defaultAspectRatio,a=e.history,n=e.title,i=e.withAspectRatioOptions,o=e.withZoomControl,c=this._getMedia();return r.createElement(O.b,{backButtonType:"back",containerStyle:j.root,documentTitle:n||w,history:a,onBackClick:this._handleBackClick,rightControl:this._renderAppBarRightControl(),title:n||w},r.createElement(A.a,{defaultAspectRatio:t,media:c,ref:this._cropper,withAspectRatioOptions:i,withZoomControl:o}))}}]),a}(r.Component),j=S.a.create((function(e){return{root:{flexShrink:1,height:650}}})),L=M(U),T=a("X8FW"),k=S.a.create((function(e){return{modal:{width:600,maxWidth:"90vw"}}}));t.a=function(e){return r.createElement(T.b,{clickMaskToClose:!1,location:e.location,modalSize:"fitChildren",style:k.modal},r.createElement(L,e))}},zITG:function(e,t,a){"use strict";a.r(t),a.d(t,"stylizedCharHelperText",(function(){return xe})),a.d(t,"ProfileScreen",(function(){return He}));a("1t7P"),a("jQ/y"),a("DfhM"),a("LW0h"),a("jwue"),a("ho0z"),a("daRM"),a("FtHn"),a("+KXO"),a("7x/C"),a("OZaJ"),a("KqXw"),a("DZ+c"),a("MvUL"),a("+oxZ");var r,n=a("ddV6"),i=a.n(n),o=a("VrFO"),c=a.n(o),d=a("Y9Ll"),l=a.n(d),s=a("1Pcy"),u=a.n(s),h=a("5Yy7"),p=a.n(h),f=a("N+ot"),m=a.n(f),b=a("AuHH"),v=a.n(b),_=a("KEM+"),y=a.n(_),g=a("ERkP"),C=a("zh9S"),E=a("AspN"),M=a("53j7"),O=a("1YZw"),R=a("oEGd"),B=a("0KEI"),A=a("hqKg"),P=a("/NU0"),S=a("G6rE"),I=Object(A.createSelector)(S.e.selectLoggedInUser,(function(e,t){var a=M.f(e),r=Object(P.a)(a)?E.g(e,a):[];return i()(r,1)[0]}),(function(e,t){var a=M.g(e),r=Object(P.a)(a)?E.g(e,a):[];return i()(r,1)[0]}),(function(e,t,a){return{loggedInUser:e,avatarMedia:t,bannerMedia:a}})),w={addAvatarMedia:M.a,addBannerMedia:M.b,addToast:O.b,createLocalApiErrorHandler:Object(B.d)("SETTINGS_PROFILE_SCREEN"),googleAnalyticsPageView:C.a,removeAvatarMedia:M.c,removeBannerMedia:M.d,removeMediaUpload:E.e,removeProfileBanner:M.e,scribeAction:C.c,scribePageImpression:C.d,updateProfile:M.h,updateProfileAvatar:M.i,updateProfileBanner:M.j},D=Object(R.g)(I,w),U=(a("2G9S"),a("lTEL"),a("z84I"),a("KOtZ"),a("yH/f"),a("iKE+"),a("kYxP"),a("tn7R")),j=Object.freeze({SUPERSCRIPT_AND_SUBSCRIPT:"superscript_and_subscript",CURRENCY:"currency",LETTER_LIKE:"letter_like",NUMBER_FORMS:"number_forms",ARROWS:"arrows",MATHEMATICAL:"mathematical",GENERAL_PUNCTUATION:"general_punctuation",ENCLOSED_ALPHANUMERICS:"enclosed_alphanumerics",BOX:"box",GEOMETRIC:"geometric",SPACING_MODIFIER:"spacing_modifier",PUNCTUATION:"punctuation",MISC:"miscellaneous"}),L=Object(U.a)(j),T=(r={},y()(r,j.SUPERSCRIPT_AND_SUBSCRIPT,{base:"[⁰-ⁱ]|[⁴-₎]|[ₐ-ₜ]",specialChars:{}}),y()(r,j.CURRENCY,{base:"[₠-₿]",specialChars:{$:"[$]"}}),y()(r,j.LETTER_LIKE,{base:"[℀-⅏]",specialChars:{}}),y()(r,j.NUMBER_FORMS,{base:"[⅐-↋]",specialChars:{}}),y()(r,j.ARROWS,{base:"[←-⇿]",specialChars:{}}),y()(r,j.MATHEMATICAL,{base:"[∀-⋿]|[⊓-⊕]|[⨀-⫿]|[⟀-⟯]|[⦀-⧿]",specialChars:{}}),y()(r,j.GENERAL_PUNCTUATION,{base:"[ -⁯]|[⸀-⹿]",specialChars:{}}),y()(r,j.ENCLOSED_ALPHANUMERICS,{base:"[①-⓿]",specialChars:{}}),y()(r,j.BOX,{base:"[─-╿]|[▀-▟]",specialChars:{}}),y()(r,j.GEOMETRIC,{base:"[■-▩]|[▬-▵]|[▷-▿]|[◁-◺]|[◿]",specialChars:{}}),y()(r,j.SPACING_MODIFIER,{base:"[ʰ-˿]",specialChars:{}}),y()(r,j.PUNCTUATION,{base:"[ -⁯]",specialChars:{}}),y()(r,j.MISC,{base:"[⌀-⌙]|[⌜-⌧]|[〈-⏎]|[⏐-⏨]|[⏴-⏷]|[⏻-⏿]|[★-☐]|[☒-☓]|[☖-☗]|[☙-☜]|[☞-☟]|[☡]|[☤-☥]|[☧-☩]|[☫-☭]|[☰-☷]|[☻-☿]|[♁]|[♃-♇]|[♔-♞]|[♡-♢]|[♤]|[♧]|[♩-♺]|[♼-♽]|[⚀-⚑]|[⚘]|[⚚]|[⚝-⚟]|[⚢-⚦]|[⚨-⚩]|[⚬-⚯]|[⚲-⚼]|[⚿-⛃]|[⛆-⛇]|[⛉-⛍]|[⛐]|[⛒]|[⛕-⛨]|[⛫-⛯]|[⛶]|[⛻-⛼]|[⛾-⛿]",specialChars:{}}),r),k=function(e){var t=e.text,a=e.keys,r=void 0===a?L:a,n=e.includeSpecialChars,i=void 0===n||n,o=r.map((function(e){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=T[e],r="".concat(a.base);if(t){var n=a.specialChars;for(var i in n)r+="|".concat(n[i])}return r}(e,i)})).reduce((function(e,t){return"".concat(e,"|").concat(t)}));return new RegExp(o,"g").test(t)},N=a("wrlS"),F=a("jHSc"),x=a("fS8x"),H=a("mN6z"),V=a("P68U"),z=a("eyty"),G=(a("uFXj"),a("JtPf"),a("zb92")),W=a("RuTB"),X=Object(G.a)({loader:function(){return Promise.all([a.e(0),a.e(169)]).then(a.bind(null,"it2P"))},renderPlaceholder:function(e,t){return g.createElement(W.a,{hasError:e,onRetry:t})}}),K=a("3XMw"),Z=a.n(K),Y=a("51jI"),J=a("WWyu"),q=a("MWbm"),Q=a("t62R"),$=a("21zW"),ee=a("eb3s"),te=a("rHpw");function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=v()(e);if(t){var n=v()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var re=Z.a.c119dee8,ne=Z.a.abd845fd,ie=Z.a.cfd2f35d,oe=Z.a.bbf0afc7,ce={headline:Z.a.f98d367e,text:Z.a.b982a8b4,confirmButtonLabel:Z.a.abd845fd},de=function(e){p()(a,e);var t=ae(a);function a(e){var r;return c()(this,a),r=t.call(this,e),y()(u()(r),"_handleModalCancel",(function(){r.setState({showConfirmationModal:!1})})),y()(u()(r),"_handleModalConfirmed",(function(){r.setState({isEditing:!0,showConfirmationModal:!1})})),y()(u()(r),"_handleEditPress",(function(){r.setState({showConfirmationModal:!0})})),y()(u()(r),"_handleRemoveBirthdate",(function(){var e=r.props.onRemoveBirthdate;r.setState({isEditing:!1}),e()})),y()(u()(r),"_handleCancelEditPress",(function(){r.props.onCancelEditBirthdate(),r.setState({isEditing:!1})})),r.state={isEditing:!1,showConfirmationModal:!1},r}return l()(a,[{key:"render",value:function(){var e=this.state.isEditing,t=this.props,a=t.birthdate,r=t.errors,n=t.onChange,i=t.showBirthdateRemoveButton,o=a.month&&a.day&&a.year;return g.createElement(q.a,{style:le.root},g.createElement(q.a,{style:le.container},e?g.createElement(Q.c,{weight:"bold"},re):g.createElement(Q.c,{color:"deepGray"},re),g.createElement($.a,null),g.createElement(Q.c,{accessibilityRole:"button",color:"link",onPress:e?this._handleCancelEditPress:this._handleEditPress,testID:e?Y.a.cancel:Y.a.edit,withInteractiveStyling:!0},e?ie:ne)),e?g.createElement(X,{birthdate:a,errors:r,onChange:n,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:i}):g.createElement(Q.c,{size:"large",testID:o?void 0:Y.a.missingBirthdate},o?g.createElement(J.a,{birthdate:a}):oe),this._renderConfirmationModal())}},{key:"_renderConfirmationModal",value:function(){return this.state.showConfirmationModal?g.createElement(ee.a,{confirmButtonLabel:ce.confirmButtonLabel,headline:ce.headline,onCancel:this._handleModalCancel,onConfirm:this._handleModalConfirmed,text:ce.text,withForwardFocusOnConfirm:!0}):null}}]),a}(g.Component),le=te.a.create((function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},container:{flexDirection:"row"},containerItem:{marginLeft:e.spaces.xxSmall}}})),se=a("PVvL"),ue=a("Dtul"),he=a("BTou"),pe=(a("AxOO"),a("oSwX")),fe=a("9Xij"),me=a("Q0VY"),be=a("/yvb"),ve=a("p+r5"),_e=(a("aWzz"),a("jTgF")),ye=a("U+bB");function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){y()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=v()(e);if(t){var n=v()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var Me=Z.a.g7088266,Oe=Z.a.d4e220b3,Re=Z.a.d9d293b8,Be=Z.a.f9130a80,Ae=Z.a.a990900c,Pe=Z.a.f7d20516,Se=Z.a.jaaa8984,Ie=Z.a.dcd7b98a,we=Z.a.i2209530,De=Z.a.c9a30f8d,Ue={page:"settings",section:"profile"},je=Z.a.g511f467,Le=Z.a.ec3a116d,Te=Z.a.j94599ec,ke=Z.a.df31d76a,Ne={confirmButtonLabel:Z.a.g9677c6d,headline:Z.a.c01a0e19},Fe={visibility:se.a.MUTUAL_FOLLOW,year_visibility:se.a.SELF},xe=Z.a.c0784fd1,He=function(e){p()(a,e);var t=Ee(a);function a(e){var r;c()(this,a),r=t.call(this,e),y()(u()(r),"_firstUnicodeCharDetected",!1),y()(u()(r),"_unicodeDetectionScribed",!1),y()(u()(r),"_handleCancel",(function(){var e=r.props,t=e.history,a=e.loggedInUser,n=a?"/".concat(a.screen_name):"/login";t.goBack({backLocation:n})})),y()(u()(r),"_handleSubmit",(function(){var e=r._getBirthdateErrors();Object.keys(e).length?r.setState({errors:e}):r._shouldShowBirthdateConfirmationModal()?r.setState({showBirthdateConfirmationModal:!0}):(r._saveChanges(),r._displayNameUnicodeScribingOnSave())})),y()(u()(r),"_displayNameUnicodeScribingOnSave",(function(){var e=r.props.scribeAction;if(r._firstUnicodeCharDetected){var t=r.state.isStylizedUnicodeDisplayName?"contains_unicode_symbols":"no_unicode_symbols";e(Ce(Ce({},Ue),{},{component:"unicode_detector",element:t,action:"save"}))}})),y()(u()(r),"_getBirthdateErrors",(function(){var e=r.state.birthdate,t={};return e!==Fe&&["day","month","year"].forEach((function(a){e[a]||(t[a]=!0)})),t})),y()(u()(r),"_shouldShowBirthdateConfirmationModal",(function(){var e=r.props.loggedInUser,t=r.state.birthdate,a=["day","month","year"].every((function(e){return!!t[e]})),n=e&&e.birthdate||Fe,i=!Object(H.a)(n,t);return a&&i})),y()(u()(r),"_handleBirthdateModalCancel",(function(){r.setState({showBirthdateConfirmationModal:!1})})),y()(u()(r),"_handleBirthdateModalConfirm",(function(){r.setState({showBirthdateConfirmationModal:!1}),r._scribeBirthdateAddOrEdit(),r._saveChanges()})),y()(u()(r),"_handleBirthdateChange",(function(e){var t=r.state,a=t.birthdate,n=t.errors,i=Ce({},n);Object.keys(n).forEach((function(t){e[t]&&n[t]&&delete i[t]})),r.setState({birthdate:Ce(Ce({},a),e),errors:i})})),y()(u()(r),"_handleResetBirthdate",(function(){var e=r.props.loggedInUser&&r.props.loggedInUser.birthdate;r.setState({birthdate:e||Fe,errors:{}})})),y()(u()(r),"_handleRemoveBirthdate",(function(){var e=r.props,t=e.updateProfile,a=e.createLocalApiErrorHandler;(0,e.scribeAction)(Ce(Ce({},Ue),{},{component:"birthdate",action:"remove"})),t({birthdate_day:0,birthdate_month:0,birthdate_year:0}).then((function(){r.setState({birthdate:Fe,errors:{}})})).catch(a({showToast:!0}))})),y()(u()(r),"_handleAvatarMediaChange",(function(e){var t=i()(e,1)[0],a=r.props,n=a.addAvatarMedia,o=a.avatarMedia;o&&r._clearAvatarMedia(o.id),n(t),r.setState({showAvatarCropper:!0})})),y()(u()(r),"_handleAvatarCropDone",(function(){return r.setState({showAvatarCropper:!1})})),y()(u()(r),"_handleAvatarCropCancel",(function(){return r._handleAvatarCropDone()})),y()(u()(r),"_handleBannerMediaChange",(function(e){var t=i()(e,1)[0],a=r.props,n=a.addBannerMedia,o=a.bannerMedia;o&&r._clearBannerMedia(o.id),n(t),r.setState({showBannerCropper:!0})})),y()(u()(r),"_handleBannerCropDone",(function(){return r.setState({showBannerCropper:!1})})),y()(u()(r),"_handleBannerCropCancel",(function(){return r._handleBannerCropDone()})),y()(u()(r),"_handleBannerMediaRemove",(function(){var e=r.props.bannerMedia;e?r._clearBannerMedia(e.id):r.setState({shouldDeleteBanner:!0})})),y()(u()(r),"_handleAvatarMediaFailure",(function(e){r._clearAvatarMedia(e)})),y()(u()(r),"_handleBannerMediaFailure",(function(e){r._clearBannerMedia(e)})),y()(u()(r),"_handleMediaUpdateFailureFactory",(function(e,t){return function(a){var n=r.props,i=n.addToast,o=n.createLocalApiErrorHandler,c=n.removeMediaUpload,d=Object(_e.a)(a);if(d){var l=Object(_e.b)(d,t);l&&i(l)}else o({showToast:!0})(a);c(e.id)}})),y()(u()(r),"_renderInputHelperText",(function(){return r.state.isStylizedUnicodeDisplayName?xe:null})),y()(u()(r),"_handleChangeDisplayName",(function(e){var t=e.currentTarget.value,a=k({text:t});(r._firstUnicodeCharDetected=r._firstUnicodeCharDetected||a,r.setState({name:t,isStylizedUnicodeDisplayName:a}),r._firstUnicodeCharDetected&&!r._unicodeDetectionScribed)&&(r._unicodeDetectionScribed=!0,(0,r.props.scribeAction)(Ce(Ce({},Ue),{},{component:"unicode_detector",action:"unicode_detected"})))})),y()(u()(r),"_handleChangeDescription",(function(e){r.setState({description:e.currentTarget.value})})),y()(u()(r),"_handleChangeLocation",(function(e){r.setState({location:e.currentTarget.value})})),y()(u()(r),"_handleChangeURL",(function(e){r.setState({url:e.currentTarget.value})}));var n=e.loggedInUser;return r.state={displayNameMaxLength:N.b.getNumberValue("user_display_name_max_limit",20),birthdate:n&&n.birthdate||Fe,showBirthdateConfirmationModal:!1,errors:{},showAvatarCropper:!1,showBannerCropper:!1,shouldDeleteBanner:!1,isStylizedUnicodeDisplayName:!1},r}return l()(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.googleAnalyticsPageView,a=e.scribePageImpression,r=e.loggedInUser,n=e.history;r?(a(Ue),t(Ue),this._unlockReload=ue.a.acquire()):n.push("/login")}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.avatarMedia,a=e.bannerMedia;t&&this._clearAvatarMedia(t.id),a&&this._clearBannerMedia(a.id),this._unlockReload()}},{key:"render",value:function(){var e=this.props.loggedInUser;return e?this._render(e):null}},{key:"_render",value:function(e){var t=this.props,a=t.location,r=t.avatarMedia,n=t.bannerMedia,i=t.history,o=this.state,c=o.displayNameMaxLength,d=o.shouldDeleteBanner,l=o.showAvatarCropper,s=o.showBannerCropper,u=o.errors,h=e.entities.url,p=h&&h.urls?h.urls[0].expanded_url:null,f=g.createElement(pe.default,{size:"custom",uri:e.profile_image_url_https}),m=n||e.profile_banner_url&&!d,b=g.createElement(fe.a,{ratio:te.a.theme.aspectRatios.profileBanner},m?g.createElement(ye.a,{source:{uri:e.profile_banner_url},style:Ve.banner}):null),v=e.description;null!==v&&me.a.descriptionTextParts(v,e.entities).forEach((function(e){"url"===e.entityType&&(v=v.replace(e.url,e.displayUrl))}));var _=!!(r&&!r.uploader||n&&!n.uploader)||!!Object.keys(u).length,y=g.createElement(be.a,{disabled:_,onPress:this._handleSubmit,size:"normalCompact",testID:Y.a.save,type:"primary"},we);return g.createElement(F.b,{history:i,onBackClick:this._handleCancel,rightControl:y,title:Me},g.createElement(q.a,{style:Ve.container},g.createElement(V.a,{accessibilityLabel:ke,aspectRatio:3,currentContent:b,location:z.c.Banner,mediaItem:n,onChange:this._handleBannerMediaChange,onFailure:this._handleBannerMediaFailure,onRemove:m?this._handleBannerMediaRemove:void 0,rootStyle:Ve.bannerContainer}),g.createElement(V.a,{accessibilityLabel:Te,borderRadius:"infinite",currentContent:f,location:z.c.Avatar,mediaItem:r,onChange:this._handleAvatarMediaChange,onFailure:this._handleAvatarMediaFailure,rootStyle:Ve.avatarContainer}),g.createElement(ve.a,{autoComplete:"off",defaultValue:e&&e.name,helperText:this._renderInputHelperText(),label:Oe,maxLength:c,name:"displayName",onChange:this._handleChangeDisplayName,placeholder:De}),g.createElement(ve.a,{defaultValue:v,label:Ae,maxLength:160,multiline:!0,name:"description",numberOfLines:3,onChange:this._handleChangeDescription,placeholder:Pe}),g.createElement(ve.a,{defaultValue:e&&e.location,label:Se,maxLength:30,name:"location",onChange:this._handleChangeLocation,placeholder:Ie}),g.createElement(ve.a,{defaultValue:p||"",label:Re,maxLength:100,name:"url",onChange:this._handleChangeURL,placeholder:Be}),this._renderProfileBirthdate(),this._renderBirthdateConfirmationModal()),l?g.createElement(x.a,{circle:!0,defaultAspectRatio:1,location:a,media:r,onCancel:this._handleAvatarCropCancel,onDone:this._handleAvatarCropDone}):null,s?g.createElement(x.a,{defaultAspectRatio:3,location:a,media:n,onCancel:this._handleBannerCropCancel,onDone:this._handleBannerCropDone}):null)}},{key:"_renderProfileBirthdate",value:function(){var e=this.state,t=e.birthdate,a=e.errors,r=this.props.loggedInUser;return g.createElement(de,{birthdate:t,errors:a,onCancelEditBirthdate:this._handleResetBirthdate,onChange:this._handleBirthdateChange,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:!(!r||!r.birthdate)})}},{key:"_renderBirthdateConfirmationModal",value:function(){return this.state.showBirthdateConfirmationModal?g.createElement(ee.a,{confirmButtonLabel:Ne.confirmButtonLabel,headline:Ne.headline,onCancel:this._handleBirthdateModalCancel,onConfirm:this._handleBirthdateModalConfirm,text:this._getBirthdateConfirmationModalText()}):null}},{key:"_getBirthdateConfirmationModalText",value:function(){var e=this.state.birthdate,t=e.day,a=e.month,r=e.year;return g.createElement(Z.a.I18NFormatMessage,{$i18n:"e9dec56e"},g.createElement(J.a,{birthdate:{day:t,month:a,year:r}}))}},{key:"_saveChanges",value:function(){var e=this,t=this.props,a=t.avatarMedia,r=t.bannerMedia,n=t.createLocalApiErrorHandler,i=t.removeMediaUpload,o=t.updateProfile,c=t.updateProfileAvatar,d=t.updateProfileBanner,l=t.removeProfileBanner;if(a){var s=a.id;c(s).then((function(){return i(s)}),this._handleMediaUpdateFailureFactory(a,je))}r?d(r.id).then((function(){return i(r.id)}),this._handleMediaUpdateFailureFactory(r,Le)):this.state.shouldDeleteBanner&&l().catch(n({showToast:!0})),o(this._getFormattedState()).then((function(){he.a.refreshHTMLCache(),e._handleCancel()})).catch(n({showToast:!0}))}},{key:"_getFormattedState",value:function(){var e=this.state,t=e.birthdate,a=e.displayNameMaxLength,r=e.url,n=e.name,i=e.description,o=e.location,c=t.day,d=t.month,l=t.year,s=t.visibility,u=t.year_visibility;return Ce(Ce({},c&&d&&l?{birthdate_day:c,birthdate_month:d,birthdate_year:l,birthdate_visibility:s,birthdate_year_visibility:u}:{}),{},{displayNameMaxLength:a,url:r,name:n,description:i,location:o})}},{key:"_scribeBirthdateAddOrEdit",value:function(){var e=this.props,t=e.scribeAction,a=e.loggedInUser,r=a&&a.birthdate,n=r&&r.month&&r.day&&r.year?"edit":"add";t(Ce(Ce({},Ue),{},{component:"birthdate",action:n}))}},{key:"_clearAvatarMedia",value:function(e){var t=this.props,a=t.avatarMedia,r=t.removeAvatarMedia,n=t.removeMediaUpload;a&&a.uploading||n(e),r(e)}},{key:"_clearBannerMedia",value:function(e){var t=this.props,a=t.bannerMedia,r=t.removeBannerMedia,n=t.removeMediaUpload;a&&a.uploading||n(e),r(e)}}]),a}(g.Component),Ve=te.a.create((function(e){return{avatarContainer:{backgroundColor:e.colors.cellBackground,borderWidth:e.borderWidths.medium,borderColor:e.colors.cellBackground,borderStyle:"solid",marginLeft:"1rem",marginTop:"-3rem",maxWidth:"8rem",width:"25%"},banner:{height:"100%"},bannerContainer:{maxHeight:"200px"},container:{paddingBottom:e.spaces.jumbo}}}));t.default=D(He)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.SettingsProfile.54e17fe5.js.map