(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{u1Qz:function(e,t,r){"use strict";r.r(t),r.d(t,"TweetMediaDetailScreen",(function(){return Pe}));r("1t7P"),r("2G9S"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("KqXw"),r("DZ+c"),r("MvUL"),r("+oxZ");var n=r("VrFO"),o=r.n(n),a=r("Y9Ll"),i=r.n(a),c=r("1Pcy"),s=r.n(c),l=r("5Yy7"),d=r.n(l),u=r("N+ot"),p=r.n(u),f=r("AuHH"),h=r.n(f),w=r("KEM+"),m=r.n(w),v=r("ERkP"),g=(r("Blm6"),r("WNMA"),r("zh9S")),b=r("rxPX"),_=r("0KEI"),y=r("H9MA"),O=r("XOJV"),M=r("P1r1"),I=function(e,t){return t.match.params.screenName},x=function(e,t){return t.match.params.statusId},T=function(e,t){var r=t.match.params.index;return parseInt(r,10)-1},C=function(e,t){return O.a.selectFetchStatus(e,x(0,t))},E=function(e,t){return e.location&&e.location.state&&e.location.state[t]},S=function(e,t){return E(t,"forwardPivotInfo")},D=function(e,t){return E(t,"promotedContent")},P=function(e,t){return E(t,"socialContext")},j=function(e,t){return E(t,"contextTweetId")},k=function(e,t){var r=x(0,t),n=O.a.select(e,r);return n&&n.conversation_id_str||void 0},R=Object(b.a)().propsFromState((function(){return{fetchStatus:C,forwardPivotInfo:S,index:T,screenName:I,tweetId:x,tweet:O.a.createHydratedTweetSelector(x),promotedContent:D,dataSaver:y.c,socialContext:P,contextTweetId:j,rootTweet:O.a.createHydratedTweetSelector(k),conversationTreeEnabled:M.h,showTweetMediaDetailDrawer:M.u}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(_.d)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:O.a.fetchOneIfNeeded,googleAnalyticsPageView:g.a,updateSettings:M.D}})).withAnalytics({page:"tweet",section:"media"}),L=(r("uFXj"),r("ymux")),N=r("rkhm"),H=r("ZUOq"),F=H.a.columnWidths.secondary.normal,A=H.a.columnWidths.primary,B=r("AUxQ"),W=r("yw4N"),Z=r("I7xG"),X=r("rHpw");function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var o=h()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p()(this,r)}}var q=function(e){d()(r,e);var t=z(r);function r(){var e;o()(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),m()(s()(e),"_getApiErrorHandlerMap",Object(Z.a)(s()(e),(function(e){return e.screenName}),(function(e){return Object(N.a)(e)}))),m()(s()(e),"_getModule",Object(Z.a)(s()(e),(function(e){return e.tweetId}),(function(e){return e.conversationTreeEnabled}),(function(e,t){return Object(L.a)({focalTweetId:e,conversationTreeEnabled:t})}))),e}return i()(r,[{key:"render",value:function(){var e=this.props,t=e.contextTweetId,r=e.conversationTreeEnabled,n=e.location,o=e.tweet,a=e.tweetId,i=e.promotedContent,c=e.rootTweet,s=e.socialContext,l={selectedTweetId:a};return v.createElement(W.a,{"aria-expanded":"true",style:J.root},v.createElement(B.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:t,conversationTreeEnabled:r,focalTweet:o,focalTweetId:a,location:n,module:this._getModule(),promotedContent:i,rootTweet:c,selectedTweet:l,socialContext:s,withFocalTweetMedia:!1}))}}]),r}(v.Component),J=X.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:F,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}}})),K=q,U=r("v//M"),V=r("W5XZ"),G=r("RCZO"),Y=r("3XMw"),Q=r.n(Y),$=r("2doW"),ee=r("UPvq"),te=r("VTxf"),re=r("wiP2"),ne=r("Rp9C"),oe=r("xXop"),ae=r("lklz"),ie=r("MWbm"),ce=r("cHvH"),se=r("mjJ+"),le=r("rOXj"),de=r("/yvb"),ue=r("7N4s"),pe=r("Lsrn"),fe=r("shC7"),he=r("k/Ka");function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(he.a)("svg",me(me({},e),{},{style:[pe.a.root,e.style,fe.a.isRTL&&pe.a.iconRTL],viewBox:"0 0 24 24"}),v.createElement("g",null,v.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),v.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})))};ve.metadata={width:24,height:24};var ge=ve;function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(he.a)("svg",_e(_e({},e),{},{style:[pe.a.root,e.style,fe.a.isRTL&&pe.a.iconRTL],viewBox:"0 0 24 24"}),v.createElement("g",null,v.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),v.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})))};ye.metadata={width:24,height:24};var Oe=ye,Me=r("FRoe");function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var o=h()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p()(this,r)}}var Ce=Q.a.d132269b,Ee=Q.a.dd657211,Se=Q.a.h63a5c3b,De=Q.a.f20b040d,Pe=function(e){d()(r,e);var t=Te(r);function r(e,n){var a;return o()(this,r),a=t.call(this,e,n),m()(s()(a),"_renderMediaModal",(function(e){var t=a.props.fetchStatus,r=a._shouldHideButtons(),n=a._getCurrentMediaItem(),o=Object(G.c)(n),i=a._touchSupported&&a._isCurrentMediaItemPhoto();return v.createElement(ee.a,{backgroundColor:o,footerButtons:a._renderFooter(),hideButtons:r,mediaItem:n,onCloseButtonPress:a._handleClose,overlayFooter:i,topRightButton:a._renderTopRightButton(e)},v.createElement(U.a,{accessibilityLabel:Ce,fetchStatus:t,onRequestRetry:a._handleFetchTweet,render:a._renderContent}))})),m()(s()(a),"_renderMediaModalWithDrawer",(function(){var e=a.props,t=e.contextTweetId,r=e.location,n=e.tweetId,o=e.tweet,i=e.promotedContent,c=e.rootTweet,s=e.socialContext,l=e.conversationTreeEnabled,d=e.screenName;return v.createElement(ce.a,null,(function(e){var u=e.windowWidth;return v.createElement(ie.a,{style:je.container},v.createElement(ie.a,{style:je.neighbor},a._renderMediaModal(u)),a._shouldShowMediaModalDrawer(u)?v.createElement(K,{contextTweetId:t,conversationTreeEnabled:l,location:r,promotedContent:i,rootTweet:c,screenName:d,socialContext:s,tweet:o,tweetId:n}):null)}))})),m()(s()(a),"_shouldIgnoreShowDrawerSetting",(function(e){return e-F<A})),m()(s()(a),"_shouldShowMediaModalDrawer",(function(e){var t=a.props.showTweetMediaDetailDrawer,r=a.state.showDrawerOnNarrowScreen;return a._shouldIgnoreShowDrawerSetting(e)?r:t})),m()(s()(a),"_handleToggleDrawer",(function(e){return function(){var t=a.props,r=t.showTweetMediaDetailDrawer,n=t.updateSettings,o=t.analytics,i=a.state.showDrawerOnNarrowScreen;e&&a._shouldIgnoreShowDrawerSetting(e)?(o.scribe({component:"conversation_drawer",action:i?"collapse":"expand"}),a.setState({showDrawerOnNarrowScreen:!i})):(o.scribe({component:"conversation_drawer",action:r?"collapse":"expand"}),n({showTweetMediaDetailDrawer:!r}))}})),m()(s()(a),"_getPermalink",(function(){var e=a.props.tweet;return e&&e.user?"/".concat(e.user.screen_name,"/status/").concat(e.id_str):"/"})),m()(s()(a),"_renderOverflowMenu",(function(e){return v.createElement(se.a,{isFixed:!0,items:[{link:a._getPermalink(),text:Ee}],onCloseRequested:e})})),m()(s()(a),"_getExtendedMedia",(function(){var e=a.props.location.state;if(e){var t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0}})),m()(s()(a),"_getIndex",(function(){var e=a._getExtendedMedia();return e?e.index:a.props.index})),m()(s()(a),"_getMediaItems",(function(){var e=a._getExtendedMedia();if(e)return e.items;var t=a.props.tweet;return t?t.extended_entities&&t.extended_entities.media||t.card&&t.card.media:void 0})),m()(s()(a),"_getLocationState",(function(e){var t=a._getExtendedMedia(),r=a.props.location;return t?xe(xe({},r.state),{},{mediaItems:xe(xe({},t),{},{index:e})}):r.state})),m()(s()(a),"_isCurrentMediaItemPhoto",(function(){var e=a._getIndex(),t=a._getMediaItems();if(!t)return!1;var r=t[e];return r&&"photo"===r.type})),m()(s()(a),"_handleMediaItemTapped",(function(){a._touchSupported&&a.setState((function(e){return{showControls:!e.showControls}}))})),m()(s()(a),"_renderContent",(function(){var e=a.props,t=e.dataSaver,r=e.promotedContent,n=e.tweet,o=a._getIndex(),i=a._getMediaItems();if(!i)return v.createElement(te.a,null);var c=i[o],s=Object(G.c)(c).rgb;return v.createElement($.a,{dataSaver:t,dominantColor:s,mediaIndex:o,mediaItems:i,onDismiss:a._handleClose,onMediaDetailZoomed:a._handleMediaDetailZoomed,onMediaItemChanged:a._handleMediaItemChanged,onTap:a._handleMediaItemTapped,promotedContent:r,videoId:1===i.length&&n?ae.b.forTweet(n.id_str):void 0})})),m()(s()(a),"_handleClose",(function(){var e=a.props,t=e.history,r=e.location,n=a._getPermalink();t.goBackToNonModalRoute({fallbackPath:n,location:r})})),m()(s()(a),"_getPermalink",(function(){var e=a.props.tweet;return e&&e.user?"/".concat(e.user.screen_name,"/status/").concat(e.id_str):"/"})),m()(s()(a),"_possiblyRedirectToCanonical",(function(){var e=a.props,t=e.history,r=e.screenName,n=e.tweet;if(n&&n.user&&r.toLowerCase()!==n.user.screen_name.toLowerCase()){var o=a._getCanonicalPath();o&&t.replace(o)}})),m()(s()(a),"_getCanonicalPath",(function(){var e=a.props,t=e.index,r=e.tweet;return r&&r.user?"/".concat(r.user.screen_name,"/status/").concat(r.id_str,"/photo/").concat(t+1):null})),m()(s()(a),"_handleFetchTweet",(function(){var e=a.props,t=e.createLocalApiErrorHandler;(0,e.fetchTweetIfNeeded)(e.tweetId).catch(t(V.a))})),m()(s()(a),"_handleMediaDetailZoomed",(function(e){a.setState({isZoomed:e,showControls:!e})})),m()(s()(a),"_handleMediaItemChanged",(function(e){var t=a.props,r=t.history,n=t.analytics,o=a._getIndex(),i=a._getMediaItems();if(e!==o){n.scribe({component:"gallery",element:o<e?"next":"prev",action:"click",data:{event_value:e+1}});var c=i&&i[e];r.replace({state:a._getLocationState(e),pathname:c&&c.expanded_url})}})),m()(s()(a),"_scribeImpression",(function(){var e=a.props,t=e.analytics,r=e.googleAnalyticsPageView,n=e.tweet;if(n){var o=ne.a.getTweetItem(n);r(t.contextualScribeNamespace),t.scribe({action:"show",data:{items:[o]}})}})),a.state={showControls:!0,showDrawerOnNarrowScreen:!1,isZoomed:!1},a._touchSupported=le.a.isTouchSupported(),a}return i()(r,[{key:"componentDidMount",value:function(){this._handleFetchTweet(),this._scribeImpression()}},{key:"componentDidUpdate",value:function(e){var t,r;this._possiblyRedirectToCanonical(),e.tweetId!==this.props.tweetId&&this._handleFetchTweet(),(null===(t=e.tweet)||void 0===t?void 0:t.id_str)!==(null===(r=this.props.tweet)||void 0===r?void 0:r.id_str)&&this._scribeImpression()}},{key:"render",value:function(){return v.createElement(re.a.Configure,{headerless:!0},this.context.isModal?this._renderMediaModalWithDrawer():this._renderMediaModal())}},{key:"_getCurrentMediaItem",value:function(){var e=this._getIndex(),t=this._getMediaItems();return t&&t[e]}},{key:"_shouldHideButtons",value:function(){var e=this.state,t=e.isZoomed,r=e.showControls;return t||!r}},{key:"_renderTopRightButton",value:function(e){var t=this.props.tweet,r=this.context.isModal,n=this._getCurrentMediaItem(),o=Object(G.c)(n),a=e&&this._shouldShowMediaModalDrawer(e);return r?v.createElement(de.a,{accessibilityLabel:a?De:Ee,dominantColor:o.rgb,icon:a?v.createElement(ge,null):v.createElement(Oe,null),onClick:this._handleToggleDrawer(e),type:"onMedia"}):t&&!r?v.createElement(de.a,{accessibilityLabel:Se,dominantColor:n?o.rgb:void 0,icon:v.createElement(Me.a,null),renderMenu:this._renderOverflowMenu,type:n?"onMedia":"invertedPrimary"}):void 0}},{key:"_renderFooter",value:function(){var e=this.props,t=e.tweet,r=e.forwardPivotInfo;return t?v.createElement(oe.a,{actionSize:"large",activeColor:"white",color:"white",forwardPivotInfo:t.softIntervention||r,style:je.actionsBar,tweet:t,withCount:!0}):void 0}}]),r}(v.Component);m()(Pe,"contextType",ue.a);var je=X.a.create((function(e){return{actionsBar:{height:e.spaces.xxLarge,marginTop:0,maxWidth:"none",paddingHorizontal:e.spaces.xSmall},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}})),ke=R(Pe);t.default=ke}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.TweetMediaDetail.8acfb7e5.js.map