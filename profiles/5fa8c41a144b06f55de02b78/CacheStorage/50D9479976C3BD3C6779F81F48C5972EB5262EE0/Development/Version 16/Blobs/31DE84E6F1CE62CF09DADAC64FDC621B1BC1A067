(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{cOLG:function(e,t,n){"use strict";n.r(t),n.d(t,"HomeTimeline",(function(){return Kt}));n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),p=n("N+ot"),m=n.n(p),f=n("AuHH"),h=n.n(f),d=n("KEM+"),v=n.n(d),y=n("ERkP"),b=n("es0u"),_=(n("ho0z"),n("wM4e")),g=n("hqKg"),w=n("QK5w"),T=n("G6rE"),O=n("oEGd"),E=Object(g.createSelector)(w.a,T.e.selectLoggedInUser,_.h,_.c,(function(e,t,n,r){return{isInitialScreen:!e,loggedInUserAvatarURI:t&&t.profile_image_url_https,loggedInUserName:t&&t.name,useLatest:n,configurationFetchStatus:r}})),S=Object(O.c)(E),j=n("s14A"),P=n("dwig"),L=n("wrlS"),F=n("v//M"),D=n("0+qk"),R=function(e){var t=e.inactivityThresholdMs,n=e.lastFrustrationEventTimestamp,r=void 0===n?0:n,a=60*L.b.getNumberValue("home_timeline_latest_timeline_min_time_to_autoswitch_minutes",720)*1e3,i=60*L.b.getNumberValue("home_timeline_latest_timeline_autoswitch_half_life_minutes",20160)*1e3,o=t||a;return Math.max(a,o*Math.pow(2,(r-Date.now())/i))},I=function(e){var t=60*L.b.getNumberValue("home_timeline_latest_timeline_max_time_to_autoswitch_minutes",10080)*1e3,n=L.b.getNumberValue("home_timeline_latest_timeline_autoswitch_threshold_multiplier",2);return Math.min(t,n*e)},C=function(e){if(!e)return!1;var t=1e3*L.b.getNumberValue("home_timeline_latest_timeline_threshold_to_increase_autoswitch_seconds",60);return Date.now()-e<t},A=function(e){var t=e.useLatest,n=e.lastActiveOnLatestTimestamp,r=e.inactivityThresholdMs,a=e.lastFrustrationEventTimestamp;return!(!L.b.isTrue("home_timeline_latest_timeline_switch_enabled")||!t)&&function(e){var t=e.lastActiveOnLatestTimestamp,n=e.inactivityThresholdMs;return Date.now()-t>n}({lastActiveOnLatestTimestamp:n,inactivityThresholdMs:R({inactivityThresholdMs:r,lastFrustrationEventTimestamp:a})})},M=n("1YZw"),k=n("rxPX"),x=Object(k.a)().propsFromState((function(){return{inactivityThresholdMs:_.e,autoSwitchTimestamp:_.b,lastFrustrationEventTimestamp:_.g}})).propsFromActions((function(){return{addToast:M.b,updateAutoSwitchTimestamp:_.i,updateBehavior:_.j,updateInactivityThresholdMs:_.k,updateLastFrustrationEventTimestamp:_.m}})).withAnalytics(),z=(n("1t7P"),n("jQ/y"),n("1Iuc"),n("3XMw")),N=n.n(z),H=n("mjJ+"),U=n("/yvb"),V=n("rHpw"),B=(n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ"),n("Lsrn")),J=n("k/Ka");function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(J.a)("svg",q(q({},e),{},{style:[B.a.root,e.style],viewBox:"0 0 36 36"}),y.createElement("g",null,y.createElement("path",{d:"M27.325 20.595c0 7.333-5.913 13.278-13.206 13.278S.912 27.928.912 20.595 6.825 7.317 14.12 7.317s13.205 5.944 13.205 13.278",fill:"#71C9F8"}),y.createElement("path",{d:"M24.576 20.682c0 5.802-4.678 10.506-10.45 10.506-5.77 0-10.448-4.704-10.448-10.506s4.678-10.506 10.45-10.506c5.77 0 10.448 4.704 10.448 10.506",fill:"#97E3FF"}),y.createElement("path",{d:"M18.98 20.94l-3.86-.583v-6.215c0-.552-.45-1-1-1s-1 .448-1 1v7.076c0 .06.023.112.033.17.007.042.012.082.025.123.026.084.063.158.11.23.022.038.044.075.072.11.05.06.11.11.173.158.042.03.08.06.128.086.065.034.133.055.204.074.04.01.072.035.114.04l4.704.71c.05.01.1.012.15.012.487 0 .914-.355.988-.85.08-.548-.295-1.058-.84-1.14z",fill:"#005FD1"}),y.createElement("path",{d:"M24.553 20.682c0 5.79-4.68 10.5-10.434 10.5S3.683 26.47 3.683 20.68c0-2.953 1.227-5.707 3.31-7.665l.674 1.127c.38.635 1.227.668 1.524.06l1.153-2.36 1.312-2.687c.24-.49-.104-1.067-.65-1.088l-2.988-.116-2.625-.1c-.678-.027-1.05.735-.67 1.37l.804 1.344C2.613 13.065.883 16.736.883 20.683c0 7.333 5.937 13.298 13.234 13.298s13.234-5.964 13.234-13.297h-2.8z",fill:"#1DA1F2"}),y.createElement("path",{d:"M35 13.36h-1.467v-1.34c0-.552-.448-1-1-1s-1 .448-1 1v1.34h-1.467c-.552 0-1 .45-1 1s.448 1 1 1h1.467v1.342c0 .552.448 1 1 1s1-.448 1-1v-1.34H35c.552 0 1-.45 1-1s-.448-1-1-1z",fill:"#FFAD1F"}),y.createElement("path",{d:"M28.646 4.138h-2.01v-2.01c0-.552-.448-1-1-1s-1 .448-1 1v2.01h-2.01c-.552 0-1 .448-1 1s.448 1 1 1h2.01v2.01c0 .552.448 1 1 1s1-.448 1-1v-2.01h2.01c.552 0 1-.448 1-1s-.447-1-1-1z",fill:"#F6809A"})))};G.metadata={width:36,height:36};var K=G;function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(J.a)("svg",Q(Q({},e),{},{style:[B.a.root,e.style],viewBox:"0 0 36 36"}),y.createElement("g",null,y.createElement("path",{d:"M35.508 15.41l-9.295-3.387L22.438 1.47c-.108-.302-.357-.48-.722-.495-.322.007-.604.22-.698.53l-3.293 10.71-9.132 3.805c-.285.118-.467.4-.46.708.007.308.203.58.492.686L17.92 20.8l3.775 10.552c.107.298.39.496.704.496h.016c.322-.007.604-.22.698-.53l3.293-10.712 9.132-3.803c.284-.118.466-.4.46-.708-.007-.308-.203-.58-.492-.686z",fill:"#61BCF6"}),y.createElement("path",{d:"M9.57 4.715l-2.906.065-.06-2.715C6.585 1.34 5.983.763 5.256.78 4.53.796 3.955 1.4 3.97 2.125l.063 2.715-2.747.062C.56 4.92-.016 5.522 0 6.248c.017.726.62 1.302 1.346 1.285l2.747-.062.062 2.716c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.062-2.715 2.905-.066c.725-.017 1.3-.62 1.285-1.346-.017-.726-.62-1.302-1.346-1.285z",fill:"#F16888"}),y.createElement("path",{d:"M14.205 29.69l-1.65.036-.034-1.518c-.016-.726-.618-1.302-1.344-1.286s-1.302.62-1.286 1.345l.034 1.518-1.54.035c-.726.016-1.302.62-1.286 1.345.017.726.62 1.302 1.345 1.286l1.54-.034.034 1.518c.017.726.62 1.302 1.345 1.286.726-.016 1.302-.62 1.286-1.345l-.034-1.518 1.65-.037c.726-.016 1.302-.62 1.286-1.345-.016-.727-.62-1.303-1.345-1.286z",fill:"#FD9E1A"})))};X.metadata={width:36,height:36};var Z=X,$=n("3JQt"),ee=n("M2x3");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(J.a)("svg",ne(ne({},e),{},{style:[B.a.root,e.style],viewBox:"0 0 24 24"}),y.createElement("g",null,y.createElement("path",{d:"M22.772 10.506l-5.618-2.192-2.16-6.5c-.102-.307-.39-.514-.712-.514s-.61.207-.712.513l-2.16 6.5-5.62 2.192c-.287.112-.477.39-.477.7s.19.585.478.698l5.62 2.192 2.16 6.5c.102.306.39.513.712.513s.61-.207.712-.513l2.16-6.5 5.62-2.192c.287-.112.477-.39.477-.7s-.19-.585-.478-.697zm-6.49 2.32c-.208.08-.37.25-.44.46l-1.56 4.695-1.56-4.693c-.07-.21-.23-.38-.438-.462l-4.155-1.62 4.154-1.622c.208-.08.37-.25.44-.462l1.56-4.693 1.56 4.694c.07.212.23.382.438.463l4.155 1.62-4.155 1.622zM6.663 3.812h-1.88V2.05c0-.414-.337-.75-.75-.75s-.75.336-.75.75v1.762H1.5c-.414 0-.75.336-.75.75s.336.75.75.75h1.782v1.762c0 .414.336.75.75.75s.75-.336.75-.75V5.312h1.88c.415 0 .75-.336.75-.75s-.335-.75-.75-.75zm2.535 15.622h-1.1v-1.016c0-.414-.335-.75-.75-.75s-.75.336-.75.75v1.016H5.57c-.414 0-.75.336-.75.75s.336.75.75.75H6.6v1.016c0 .414.335.75.75.75s.75-.336.75-.75v-1.016h1.098c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"})))};re.metadata={width:24,height:24};var ae=re;function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var oe=N.a.j681ac0d,ce=N.a.g8220472,se=N.a.ccdd3766,le=N.a.c41ecf3c,ue=N.a.d18aa6d4,pe=N.a.bc52b0cd,me=N.a.j6382fe9,fe=N.a.f5f4ea93,he=N.a.e4acfd11,de=function(e){u()(n,e);var t=ie(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"_renderActionMenu",(function(t){var n=e.props.useLatest,r=n?ue:le,a=n?K:Z;return y.createElement(H.a,{DescriptionIcon:a,description:r,descriptionStyle:ve.description,isFixed:!0,items:e._getActionMenuItems(),onCloseRequested:t})})),v()(s()(e),"_getActionMenuItems",(function(){var t=e.props.useLatest,n=t?he:fe;return[{text:t?pe:me,onClick:e._handleTimelineSwitch,Icon:$.a,subText:n},{link:"/settings/content_preferences",text:oe,onClick:e._handleContentPreferences,Icon:ee.a}]})),v()(s()(e),"_handleTimelineSwitch",(function(t){var n=e.props.onToggle;t(),n()})),v()(s()(e),"_handleContentPreferences",(function(t){var n=e.props.onContentPreferencesSelect;t(),n()})),e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.useLatest,n=e.onPress,r=t?ce:se;return y.createElement(U.a,{accessibilityLabel:r,icon:y.createElement(ae,null),onPress:n,pullRight:!0,renderMenu:this._renderActionMenu,type:"text"})}}]),n}(y.PureComponent),ve=V.a.create((function(e){return{description:{fontSize:e.fontSizes.large,color:e.colors.text,textAlign:"center",fontWeight:e.fontWeights.bold}}})),ye=de,be=n("aWzz");function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var ge=N.a.e4c6d14c,we=N.a.bffa2da7,Te=function(e){u()(n,e);var t=_e(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"_handleToggle",(function(){var t=e.props,n=t.updateBehavior,r=t.useLatest,a=t.addToast,i=t.analytics,o=t.updateInactivityThresholdMs,c=t.inactivityThresholdMs,s=t.autoSwitchTimestamp,l=t.updateAutoSwitchTimestamp,u=t.updateLastFrustrationEventTimestamp,p=t.lastFrustrationEventTimestamp;if(e.context.viewport.scrollToTop(),C(s)){var m=R({inactivityThresholdMs:c,lastFrustrationEventTimestamp:p});o({inactivityThresholdMs:I(m)}),u({lastFrustrationEventTimestamp:Date.now()})}var f={};s&&(f={duration_ms:Date.now()-s});i.scribe({component:"customize",element:r?"see_top":"see_latest",action:"click",data:f}),s&&l({autoSwitchTimestamp:null});var h=r?ge:we;n({useLatest:!r}).then((function(){a({text:h})}))})),v()(s()(e),"_handleSwitchPress",(function(){e.props.analytics.scribe({section:"navigation_bar",element:"customize_button",action:"click"})})),v()(s()(e),"_handleContentPreferencesSelect",(function(){e.props.analytics.scribe({component:"customize",element:"see_preferences",action:"click"})})),e}return o()(n,[{key:"render",value:function(){var e=this.props.useLatest;return y.createElement(ye,{onContentPreferencesSelect:this._handleContentPreferencesSelect,onPress:this._handleSwitchPress,onToggle:this._handleToggle,useLatest:e})}}]),n}(y.Component);v()(Te,"contextTypes",{viewport:be.object});var Oe=x(Te),Ee=(n("JtPf"),n("zb92")),Se=Object(k.a)().propsFromState((function(){return{loggedInUser:T.e.selectLoggedInUser}})).adjustStateProps((function(e){var t=e.loggedInUser;return{userAvatarURI:t&&t.profile_image_url_https,userName:t&&t.name}})),je=n("N5qz"),Pe=n("MWbm"),Le=n("cHvH"),Fe=n("5mJL"),De=n("DNho"),Re=n("XP29"),Ie=n("t62R"),Ce=n("cjZk"),Ae=n("3rWK"),Me=n("ll3R"),ke=n("pNJr"),xe=n("J0mu"),ze=N.a.bea869b3,Ne=N.a.e349147b,He=V.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},avatarColumn:{flexGrow:1,minWidth:32,maxWidth:e.spaces.xxLarge},avatar:{width:"100%"},body:{flexDirection:"column",flexGrow:1},fakeInput:{paddingVertical:"calc(".concat(e.spaces.xSmall," + ").concat(e.spaces.micro,")"),paddingHorizontal:e.spaces.micro},toolbar:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",marginRight:e.spaces.micro,marginTop:e.spaces.xSmall},toolbarSection:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:"1.5em",marginHorizontal:"calc(".concat(e.spaces.xSmall," - ").concat(e.spaces.micro,")"),width:"1.5em"},firstIcon:{marginLeft:0},lastIcon:{marginRight:0},separator:{width:"1px",backgroundColor:e.colors.mediumGray,height:e.fontSizes.jumbo,marginRight:e.spaces.xSmall,marginLeft:"calc(".concat(e.spaces.xSmall," - 2px)")},tweetButton:{marginLeft:e.spaces.xSmall}}})),Ue=Se((function(e){var t=e.userAvatarURI;return y.createElement(Le.a,null,(function(e){var n=e.windowWidth,r=!je.a.isOneColumnSquishedLayout(n);return y.createElement(Fe.a,{avatarCell:y.createElement(De.a.Consumer,null,(function(e){var n=e.avatarSize;return y.createElement(Re.a,{size:n,style:He.avatar,uri:t})})),avatarCellStyle:He.avatarColumn,cellStyle:He.body,style:He.root},y.createElement(Ie.c,{color:"deepGray",numberOfLines:1,size:"large",style:He.fakeInput},Ne),y.createElement(Pe.a,{style:He.toolbar},y.createElement(Pe.a,{style:He.toolbarSection},y.createElement(Ce.a,{style:[He.icon,He.firstIcon]}),y.createElement(Ae.a,{style:He.icon}),r?y.createElement(Me.a,{style:He.icon}):null,y.createElement(ke.a,{style:He.icon}),r?y.createElement(xe.a,{style:[He.icon,He.lastIcon]}):null),y.createElement(Pe.a,{style:He.toolbarSection},y.createElement(U.a,{disabled:!0,style:He.tweetButton,type:"primary"},ze))))}))})),Ve=Object(Ee.a)({loader:function(){return Promise.all([n.e(0),n.e(19),n.e(153)]).then(n.bind(null,"bJYH")).then((function(){return Promise.all([n.e(0),n.e(3),n.e(6),n.e(11),n.e(66)]).then(n.bind(null,"M5JI"))}))},renderPlaceholder:function(){return y.createElement(Ue,null)}}),Be=function(){return window.performance&&"function"==typeof window.performance.now},Je=n("yoO3"),We=(n("lTEL"),n("5BYb"),n("kYxP"),n("aeN7")),qe=Object(k.a)().propsFromState((function(){return{inactivityThresholdMs:_.e,lastActiveOnLatestTimestamp:_.f,lastFrustrationEventTimestamp:_.g}})).propsFromActions((function(){return{addToast:M.b,updateAutoSwitchTimestamp:_.i,updateBehavior:_.j,updateLastActiveOnLatestTimestamp:_.l}})).withAnalytics(),Ge=n("QIgh"),Ke=n("8UdT"),Ye=n("iu0J"),Qe=n("AP4B"),Xe=(n("Blm6"),n("ezF+")),Ze=n("VPAj"),$e=(n("z84I"),n("M+/F"),n("0KEI")),et=n("Zejx");function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=function(e,t){return t.unhydratedTopics},at=Object(k.a)().propsFromState((function(){return{topics:Object(g.createSelector)(rt,et.a.selectAll,(function(e,t){return e.map((function(e){var n=t[e.topicId];return n?nt(nt({},n),{},{clientEventInfo:e.clientEventInfo}):void 0})).filter(Boolean)}))}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object($e.d)("TOPIC_COLLECTION_CONTEXT"),follow:et.a.follow,unfollow:et.a.unfollow}})).withAnalytics(),it=n("Rp9C"),ot=n("uavX"),ct=n("aV/s");function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var lt,ut=N.a.ge8f3043,pt=N.a.aa576cbf,mt=function(e){u()(n,e);var t=st(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"state",{currentSlide:0}),v()(s()(e),"_handleCarouselChange",(function(t){return e.setState({currentSlide:t})})),v()(s()(e),"_handleFollow",(function(t){return function(){var n=e.props,r=n.analytics,a=n.createLocalApiErrorHandler,i=n.follow,o=e._getScribeDataForTopic(t),c=t.clientEventInfo||{},s=c.component,l=c.element;i(t.id).catch(a()),r.scribe({component:s,element:l,action:"follow",data:o})}})),v()(s()(e),"_handleFocus",(function(t){return function(){e.state.currentSlide!==t&&e._handleCarouselChange(t)}})),v()(s()(e),"_handleUnfollow",(function(t){return function(){var n=e.props,r=n.analytics,a=n.createLocalApiErrorHandler,i=n.unfollow,o=e._getScribeDataForTopic(t),c=t.clientEventInfo||{},s=c.component,l=c.element;i(t.id).catch(a()),r.scribe({component:s,element:l,action:"unfollow",data:o})}})),e}return o()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.analytics,r=t.topics;n.scribeAction("impression"),r.forEach((function(t){var r=e._getScribeDataForTopic(t),a=t.clientEventInfo||{},i=a.component,o=a.element;n.scribe({component:i,element:o,action:"impression",data:r})}))}},{key:"render",value:function(){var e=this.state.currentSlide,t=this._getNumberOfRows();return y.createElement(Pe.a,{style:[ft.root,{height:50*t*this._getScaleValue()}]},y.createElement(ot.a,{currentSlide:e,onChange:this._handleCarouselChange,showNavButtonsOnHover:!0,slidesToShow:1.8},this._renderTopicPills()))}},{key:"_renderTopicPills",value:function(){for(var e=this,t=this.props.topics,n=this._getNumberOfRows(),r=[],a=0,i=0;a<t.length;a+=n,i++){var o=t.slice(a,a+n),c=y.createElement(Pe.a,{key:i,onFocus:this._handleFocus(i),style:ft.column},o.map((function(t){return y.createElement(ct.a,{accessibilityLabel:t.following?pt({topicName:t.name}):ut({topicName:t.name}),key:t.id,mode:t.following?"active":"expand",onClick:t.following?e._handleUnfollow(t):e._handleFollow(t),selected:t.following,style:ft.pill,text:t.name})})));r.push(c)}return r}},{key:"_getScaleValue",value:function(){var e=V.a.theme,t=e.scale;return e.scales[t]}},{key:"_getNumberOfRows",value:function(){var e=this.props,t=e.numberOfRows,n=e.topics.length;return t||(n<8?1:n<12?2:3)}},{key:"_getScribeDataForTopic",value:function(e){return{items:[it.a.forTopic(e.id,e.clientEventInfo)]}}}]),n}(y.Component),ft=V.a.create((function(e){return{root:{marginVertical:e.spaces.xxSmall,minHeight:e.spaces.xLarge,overflow:"hidden",width:"100%"},column:{marginLeft:e.componentDimensions.gutterHorizontal},pill:{marginVertical:e.spaces.xxSmall,textOverflow:"ellipsis"}}})),ht=at(mt),dt=Xe.d(Xe.f({component:ht,createProps:function(e){var t=e.entry,n=t.content.rowCount?parseInt(t.content.rowCount,10):void 0;return{numberOfRows:isNaN(n)?void 0:n,unhydratedTopics:t.content.topics}},isFocusable:Object(Ze.a)(!0)})),vt=n("aITJ");function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=bt(bt(bt({},Object(Ge.a)({tweetDismissable:!0,shouldSelfThreadIncludeAvatar:!0,withCarouselTimelineModule:vt.a.isMobileOS()})),Qe.a),{},(lt={},v()(lt,Ke.b.EventSummary,Object(Ye.a)({errorContext:"HOME_TIMELINE_SCREEN"})),v()(lt,Ke.b.TopicCollection,dt),lt)),gt=n("MDbM"),wt=n("FIs5"),Tt=N.a.d2c66f1f,Ot=N.a.c3fbf1da,Et=N.a.bf17ded9,St=function(e){var t=e.onImpression;return y.createElement(wt.a,{buttonLink:"/i/connect_people",buttonText:Et,header:Tt,message:Ot,onImpression:t})},jt=n("/NU0"),Pt=n("EUHl"),Lt=n("fTQJ"),Ft=n("WA1W");function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var Rt=N.a.f089620b,It=N.a.e4c6d14c,Ct={count:void 0},At=function(e){u()(n,e);var t=Dt(n);function n(e,r){var i;return a()(this,n),i=t.call(this,e,r),v()(s()(i),"_handleEntriesUpdate",(function(e){var t=e.entries,n=e.fetchStatus,r=i.props,a=r.isInitialScreen,o=r.recordTTFT,c=r.useLatest,s=r.updateLastActiveOnLatestTimestamp;if(n===gt.a.FAILED&&(i._shouldRecordTTFT=!1),i._shouldRecordTTFT&&a&&t.length){var l=t.some((function(e){return e.type===Ke.b.Tweet}));i._shouldRecordTTFT=!1,l&&o()}i._latestTimelineSwitchEnabled&&c&&s(Date.now())})),v()(s()(i),"_renderEmptyTimeline",(function(){return y.createElement(St,{onImpression:i._handleEmptyHtlImpression})})),v()(s()(i),"_handleEmptyHtlImpression",(function(){i.props.analytics.scribe({component:"empty_message",action:"impression"})})),i._shouldRecordTTFT=!0,i._latestTimelineSwitchEnabled=L.b.isTrue("home_timeline_latest_timeline_switch_enabled"),i._checkIsAutoSwitchRequired(),i}return o()(n,[{key:"componentDidMount",value:function(){this._requiresAutoSwitch&&(this._performAutoSwitch(),this._requiresAutoSwitch=!1)}},{key:"render",value:function(){if(this._requiresAutoSwitch)return null;var e=this.props,t=e.useLatest,n=e.timelineRef,r=this._latestTimelineSwitchEnabled&&t?Ft.a:Ft.b;return y.createElement(Lt.a,{entryConfiguration:_t,fetchTopOptions:Ct,module:r,newTweetsPillMode:Pt.a.URT,onEntriesUpdate:this._handleEntriesUpdate,renderEmptyState:this._renderEmptyTimeline,timelineRef:n,title:Rt})}},{key:"_performAutoSwitch",value:function(){var e=this.props,t=e.updateBehavior,n=e.addToast,r=e.analytics,a=e.updateAutoSwitchTimestamp,i=e.lastActiveOnLatestTimestamp,o=e.inactivityThresholdMs,c=e.lastFrustrationEventTimestamp,s=Object(jt.a)(i)?function(e){var t=e.lastActiveOnLatestTimestamp,n=e.inactivityThresholdMs,r=e.lastFrustrationEventTimestamp;return{duration_ms:Date.now()-t,event_value:R({inactivityThresholdMs:n,lastFrustrationEventTimestamp:r})}}({lastActiveOnLatestTimestamp:i,inactivityThresholdMs:o,lastFrustrationEventTimestamp:c}):void 0;r.scribe({action:"automatic_switch_to_home",data:s}),a({autoSwitchTimestamp:Date.now()}),t({useLatest:!1}).then((function(){n({text:It})}))}},{key:"_checkIsAutoSwitchRequired",value:function(){var e=this.props,t=e.useLatest,n=e.lastActiveOnLatestTimestamp,r=e.inactivityThresholdMs,a=e.lastFrustrationEventTimestamp;this._requiresAutoSwitch=!!Object(jt.a)(n)&&A({useLatest:t,lastActiveOnLatestTimestamp:n,inactivityThresholdMs:r,lastFrustrationEventTimestamp:a})}}]),n}(y.Component);v()(At,"defaultProps",{recordTTFT:We.e});var Mt=qe(At),kt=n("7JQg"),xt=n("VS6U"),zt=n("Es6L"),Nt=n("LsPn"),Ht=n("0yYu"),Ut=n("mw9i");function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var Bt=N.a.i5f7b6b8,Jt=N.a.d126cb7c,Wt=N.a.ha8209bb,qt={page:"home"},Gt={page:"home_latest"},Kt=function(e){u()(r,e);var t=Vt(r);function r(e){var n;return a()(this,r),n=t.call(this,e),v()(s()(n),"_unmounted",!1),v()(s()(n),"_renderTimeline",(function(){var e=n.props,t=e.useLatest,r=e.isInitialScreen;return y.createElement(j.a,null,y.createElement(Mt,{isInitialScreen:r,timelineRef:n._setTimelineRef,useLatest:t}))})),v()(s()(n),"_renderPrimaryContent",(function(){var e=n.props,t=e.history,r=e.location,a=e.configurationFetchStatus,i=y.createElement(D.a,{history:t});return y.createElement(y.Fragment,null,Object(zt.a)()?y.createElement(y.Fragment,null,y.createElement(Ve,{history:t,location:r}),y.createElement(Ht.a,null)):null,y.createElement(P.a,{component:Ut.a,fab:i},vt.a.isKaiOS()?y.createElement(Nt.a,{leftText:Bt,onLeftClick:n._handleSoftLeftClick}):null,y.createElement(F.a,{fetchStatus:a,render:n._renderTimeline})))})),v()(s()(n),"_handleSoftLeftClick",(function(){n.props.history.push("/account")})),v()(s()(n),"_handleTabRefresh",(function(){n._timeline&&n._timeline.refreshOrGoTop()})),v()(s()(n),"_handleWindowFocus",(function(){n._timeline&&n._timeline.fetchTop({onlyIfStale:!0})})),v()(s()(n),"_setTimelineRef",(function(e){n._timeline=e})),n._latestTimelineSwitchEnabled=L.b.isTrue("home_timeline_latest_timeline_switch_enabled"),n}return o()(r,[{key:"componentDidMount",value:function(){var e=this;if(window.addEventListener("focus",this._handleWindowFocus),L.b.isTrue("responsive_web_framerate_tracking_home_enabled")){var t=L.b.isTrue("responsive_web_scroller_v3_enabled")?"home_scroller_v3":"home",r=vt.a.isDesktopOS()?"":"_mobile",a="".concat(t).concat(r);(Be()?n.e(279).then(n.bind(null,"Iid0")).then((function(e){return e.default})):Promise.resolve(void 0)).then((function(t){!e._unmounted&&t&&(e._fpsTracking=t({reportNamespace:a}))}))}}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,window.removeEventListener("focus",this._handleWindowFocus),this._fpsTracking&&this._fpsTracking.stop()}},{key:"render",value:function(){var e=this.props,t=e.useLatest,n=e.history,r=this._latestTimelineSwitchEnabled?y.createElement(Oe,{useLatest:t}):void 0,a=this._latestTimelineSwitchEnabled&&t?Jt:Wt;return y.createElement(kt.b,{namespace:this._getScribeNamespace()},y.createElement(Je.a,null,y.createElement(xt.a,{history:n,onTabRefresh:this._handleTabRefresh,primaryContent:this._renderPrimaryContent,rightControl:r,sidebarContent:y.createElement(b.a,null),title:a})))}},{key:"_getScribeNamespace",value:function(){return this.props.useLatest?Gt:qt}}]),r}(y.Component);t.default=S(Kt)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.HomeTimeline.b025ba35.js.map