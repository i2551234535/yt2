(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{EkRu:function(e,t,r){"use strict";r.r(t),r.d(t,"ReportScreen",(function(){return ce}));r("1t7P"),r("2G9S"),r("LW0h"),r("hBpG"),r("jwue"),r("7xRU"),r("z84I"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("KqXw"),r("DZ+c"),r("MvUL"),r("3voH"),r("+oxZ");var n=r("VrFO"),o=r.n(n),a=r("Y9Ll"),i=r.n(a),s=r("1Pcy"),c=r.n(s),u=r("5Yy7"),d=r.n(u),p=r("N+ot"),l=r.n(p),_=r("AuHH"),v=r.n(_),f=r("KEM+"),m=r.n(f),b=r("ERkP"),E=r("EbOo"),h=r("cnVF"),O=(r("WNMA"),r("RqPI")),w=r("1YZw"),A=r("oEGd"),y=r("aWyx"),g=r("0KEI"),T=r("hqKg"),D=r("kHBp"),R=r("lPpt"),M=r("Fg8X"),I=r("fz3c"),S=r("Fmkq"),N=r("QK5w"),C=r("V5Qi"),P=r("XOJV"),k=r("G6rE"),j=function(e,t){return t.match.params.reportType},L=function(e,t){return t.match.params.reportedId},U=function(e,t){var r;if(e&&e.data)return r=e.data.type===y.a.GROUP?"0":e.data.participants.filter((function(e){return e.user_id!==t}))[0].user_id,{conversationId:e.data.conversation_id,reportedUserId:r}},H=Object(T.createSelector)(N.a,(function(e,t){return t.location&&t.location.state&&t.location.state.clientReferer}),(function(e,t){var r,n=j(0,t);if(n!==I.a.DMConversation&&n!==I.a.DMMessage||(r=n===I.a.DMConversation?L(0,t):t.location.state?t.location.state.conversationId:void 0),r){var o=Object(C.a)(e,r),a=function(e,t){return O.g(e)}(e);return U(o,a)}}),(function(e,t){var r=j(0,t)===I.a.Moment?L(0,t):void 0;return r?R.a.select(e,r):void 0}),L,(function(e,t){return!!(t.location&&t.location.state&&t.location.state.isMedia)||!1}),(function(e,t){return j(0,t)===I.a.Moment?M.a.select(e,L(0,t)):void 0}),(function(e,t){var r=j(0,t)===I.a.List?L(0,t):void 0;return r?D.a.select(e,r):void 0}),(function(e,t){return t.location&&t.location.state&&t.location.state.promotedContent}),(function(e,t){return t.location&&t.location.state&&t.location.state.conversationSection}),(function(e,t){var r,n;return null===(r=t.location)||void 0===r||null===(n=r.state)||void 0===n?void 0:n.reportFlowId}),j,(function(e,t){return t.location&&t.location.state&&t.location.state.scribeNamespace}),(function(e,t){var r=j(0,t)===I.a.Tweet?L(0,t):void 0;return r?P.a.selectHydrated(e,r):void 0}),(function(e,t){var r=j(0,t)===I.a.User?L(0,t):void 0;return r?k.e.select(e,r):void 0}),O.f,(function(e,t,r,n,o,a,i,s,c,u,d,p,l,_,v,f){return{canGoBack:e,clientReferer:t,dmConversation:r,reportedId:o,isMedia:a,lang:f,liveEvent:n,moment:i,list:s,promotedContent:c,conversationSection:u,reportFlowId:d,reportType:p,scribeNamespace:l,tweet:_,user:v}})),F={addToast:w.b,block:k.e.block,createLocalApiErrorHandler:Object(g.d)("REPORT_SCREEN"),mute:k.e.mute,markTweetAsReported:P.a.markAsReported,richScribeAction:S.richScribeAction,unblock:k.e.unblock,unfollow:k.e.unfollow,unmute:k.e.unmute},B=Object(A.g)(H,F),V=r("jHSc"),G=r("3XMw"),x=r.n(G),K=r("tn7R"),W=r("SrIh"),q=r("Rp9C"),z=r("X04g"),J=r("u0B7"),X=r("1bnC"),Z=r("tJZD"),Y=r("/yvb"),Q=r("bPFD"),$=r("rHpw"),ee=r("P2xQ");function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var o=v()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l()(this,r)}}var oe=x.a.h030c24b,ae=x.a.a9fd20be,ie=x.a.i2b9632d,se=x.a.b772cd65,ce=function(e){d()(r,e);var t=ne(r);function r(e,n){var a;return o()(this,r),a=t.call(this,e,n),m()(c()(a),"_renderDoneButton",(function(){return a.state.isDone?b.createElement(Y.a,{onPress:a._handleDone,size:"small",type:"primary"},se):void 0})),m()(c()(a),"_handleDone",(function(){var e=a.props,t=e.history,r=e.reportType;if(a._scribeAction("done"),r===I.a.DMConversation||r===I.a.DMMessage)t.location.state&&t.location.state.previousPath.startsWith("/messages/requests/additional")?t.replace("/messages/requests/additional"):t.location.state&&t.location.state.previousPath.startsWith("/messages/requests")?t.replace("/messages/requests"):t.replace("/messages");else{var n=a._initialHistoryLength-window.history.length;t.go(n-1)}})),m()(c()(a),"_handleBack",(function(){a.props.history.goBack()})),m()(c()(a),"_handleUndoBlock",(function(e){return function(){var t=a.props,r=t.addToast,n=t.createLocalApiErrorHandler,o=t.promotedContent;(0,t.unblock)(e,{promotedContent:o}).then((function(){r({text:ie})}),n(J.a))}})),m()(c()(a),"_handleUndoMute",(function(e){return function(){var t=a.props,r=t.addToast,n=t.createLocalApiErrorHandler,o=t.unmute,i=t.user;o(e).then((function(){r({text:Object(ee.d)(i?i.screen_name:void 0)})}),n({showToast:!0}))}})),m()(c()(a),"_getReportSource",(function(e){switch(e){case I.a.DMConversation:case I.a.DMMessage:return"dmconversation";case I.a.Moment:return"moment";case I.a.User:return"profile";case I.a.List:return"list";default:return"tweet"}})),m()(c()(a),"_getReportedTweetId",(function(){var e=a.props,t=e.liveEvent,r=e.moment,n=e.reportType,o=e.tweet;switch(n){case I.a.Moment:var i=(t?Object(K.a)(t.slates):[]).find((function(e){return e.tweet_id}));return i?i.tweet_id:r&&r.cover_media&&r.cover_media.tweet_id;case I.a.Tweet:return o&&o.id_str;default:return}})),m()(c()(a),"_getReportedUserId",(function(e){var t=a.props,r=t.dmConversation,n=t.liveEvent,o=t.moment,i=t.reportType,s=t.tweet,c=t.user,u=t.list;switch(i){case I.a.DMConversation:case I.a.DMMessage:return e&&e.data&&r&&"0"===r.reportedUserId?e.data.reported_user_id:r&&r.reportedUserId;case I.a.Moment:return n&&n.liveEventDetails.attribution_user_id||o&&o.author&&o.author.id;case I.a.User:return c&&c.id_str;case I.a.List:return u&&u.user;case I.a.Tweet:return s&&s.user.id_str;default:return void Object(W.a)("Unknown report type ".concat(i))}})),m()(c()(a),"_getReportUrl",(function(){var e=a.props,t=e.clientReferer,r=e.dmConversation,n=e.reportedId,o=e.isMedia,i=e.lang,s=e.liveEvent,c=e.moment,u=e.promotedContent,d=e.reportFlowId,p=e.conversationSection,l=e.reportType,_=e.list,v=e.scribeNamespace,f=a._getReportSource(l),m=l===I.a.DMConversation,b=l===I.a.DMMessage,E=l===I.a.Moment,O=l===I.a.List,w={client_location:[v.page,v.section,v.component].join(":"),client_referer:t,client_app_id:h.e,conversation_section:p,source:"report".concat(f),report_flow_id:d,reported_user_id:a._getReportedUserId(),reported_tweet_id:a._getReportedTweetId(),reported_direct_message_conversation_id:(b||m)&&r&&r.conversationId,reported_direct_message_id:b&&n,reported_moment_id:E?s&&s.liveEventDetails.id||c&&c.id_str:void 0,reported_list_id:O?_&&_.id_str:void 0,is_promoted:!!u,is_media:o,initiated_in_app:"1",lang:i},A=Object.keys(w).filter((function(e){return!!w[e]})).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(w[e]))})).join("&");return"".concat("https://twitter.com","/i/safety/report_story?").concat(A)})),m()(c()(a),"_messageHandler",(function(e){var t=a.props,r=t.addToast,n=t.markTweetAsReported,o=t.reportType;if("https://twitter.com"===e.origin&&"ReportAction"===e.data.type){var i=a.props,s=i.block,c=i.createLocalApiErrorHandler,u=i.mute,d=i.promotedContent,p=i.unfollow,l=i.user,_=a._getReportedUserId(e);switch(e.data.action){case"block":_&&s(_,{promotedContent:d}).then((function(){r({actionLabel:X.a,onAction:a._handleUndoBlock(_),text:ae})}),c(E.a));break;case"unfollow":_&&p(_,{promotedContent:d}).catch(c(Z.a));break;case"mute":_&&u(_).then((function(){r({actionLabel:X.a,onAction:a._handleUndoMute(_),text:Object(ee.b)(l?l.screen_name:void 0)})}),c({showToast:!0}));break;case"complete":if("tweet"===a._getReportSource(o)){var v=a._getReportedTweetId();v&&n(v,I.b.Tombstone)}a.setState({isDone:!0});break;case"error":a.setState({isDone:!0})}}})),a.state={isDone:!1},a._accessedDirectly=a._wasAccessedDirectly(),a._reportUrl=a._accessedDirectly?"":a._getReportUrl(),a}return i()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.addMessageListener,r=e.history;t(this._messageHandler),this._initialHistoryLength=window.history.length,this._wasAccessedDirectly()?r.push("/"):this._scribeAction("impression")}},{key:"componentWillUnmount",value:function(){var e=this.state.isDone;this.props.removeMessageListener(this._messageHandler),e||this._wasAccessedDirectly()||this._scribeAction("cancel")}},{key:"render",value:function(){var e=this.props.history,t=this.state.isDone;return this._accessedDirectly?null:b.createElement(V.b,{backButtonType:t?"close":"back",history:e,onBackClick:t?this._handleDone:this._handleBack,rightControl:this._renderDoneButton(),title:oe},b.createElement(Q.a,{allowForms:!0,src:this._reportUrl,style:$.a.absoluteFill}))}},{key:"_wasAccessedDirectly",value:function(){var e=this.props,t=e.canGoBack,r=e.dmConversation,n=e.list,o=e.liveEvent,a=e.reportedId,i=e.moment,s=e.reportType,c=e.scribeNamespace,u=e.tweet,d=e.user,p=o&&o.liveEventDetails.attribution_user_id;return!t||!c||s===I.a.Tweet&&!u||s===I.a.User&&!d||s===I.a.DMConversation&&!r||s===I.a.DMMessage&&(!a||!r)||s===I.a.Moment&&!i&&!p||s===I.a.List&&!n}},{key:"_getScribeNamespace",value:function(){if(this._scribeNamespace)return this._scribeNamespace;var e,t=this.props,r=t.reportType,n=t.scribeNamespace;switch(r){case I.a.DMConversation:e="report_dm_conversation";break;case I.a.Moment:e="report_moment";break;case I.a.Tweet:e="report_tweet";break;case I.a.User:e="report_user"}return this._scribeNamespace=re(re({},n),{},{element:e}),this._scribeNamespace}},{key:"_getScribeData",value:function(){if(this._scribeData)return this._scribeData;var e=this.props,t=e.reportType,r=e.promotedContent,n=e.scribeNamespace,o=e.tweet,a=e.user;if(t===I.a.Tweet)this._scribeData={associations:m()({},z.a.AssociationType.ASSOCIATED_TWEET,{association_id:o&&o.id_str,association_namespace:{page:n.page}}),promoted:!!r,items:o?[q.a.forTweet(o)]:[]};else if(t===I.a.User){var i=a?[q.a.forUser(a.id_str)]:[];this._scribeData={associations:m()({},z.a.AssociationType.ASSOCIATED_USER,{association_id:a&&a.id_str}),items:i,targets:i}}return this._scribeData}},{key:"_scribeAction",value:function(e){var t=this.props,r=t.reportFlowId,n=t.richScribeAction,o=this._getScribeData();r&&(o=re(re({},o),{},{report_details:{report_flow_id:r}})),n(re(re({},this._getScribeNamespace()),{},{action:e}),o)}}]),r}(b.Component);m()(ce,"defaultProps",{addMessageListener:function(e){return window.addEventListener("message",e)},isMedia:!1,removeMessageListener:function(e){return window.removeEventListener("message",e)}}),m()(ce,"reportTypes",I.a);t.default=B(ce)},aWyx:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return i}));r("yH/f");var n=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),o=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),a=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",CONVO_METADATA_UPDATE:"convo_metadata_update",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),i=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},lPpt:function(e,t,r){"use strict";r("1t7P"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("+oxZ");var n=r("m3Bd"),o=r.n(n),a=r("ddV6"),i=r.n(a),s=r("KEM+"),c=r.n(s),u=r("Zj7R"),d=r("3zvM"),p=r("lMB6");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e,t,r){var n=e.entities[t.meta.entityId],o=n&&n.liveEventDetails;return/_REQUEST$/.test(t.type)&&o?_(_({},e),{},{entities:_(_({},e.entities),{},c()({},o.id_str,_(_({},n),{},{liveEventDetails:_(_({},o),{},{remind_me_subscription:_(_({},o.remind_me_subscription),r(o.remind_me_subscription))})})))}):e},f=Object(d.e)({namespace:"liveEvents",fetchOneContext:"FETCH_LIVE_EVENT",fetchOneEndpoint:function(e){return function(t,r){return e.LiveEvent.fetchLiveEventMetadata(t,r).then((function(e){var r=t.eventId;return m(e,r)}))}},fetchOneParams:function(e,t){return _({eventId:i()(e,1)[0]},t)},withApiErrorHandler:!1,customActions:{subscribe:{reducer:function(e,t){return v(e,t,(function(e){return{subscribed:!0}}))},getParams:function(e,t){return{eventId:e,params:t}},getApiMethod:function(e){return e.LiveEvent.updateRemindMeSubscription}},unSubscribe:{reducer:function(e,t){return v(e,t,(function(e){return{subscribed:!1}}))},getParams:function(e,t){return{eventId:e,params:t}},getApiMethod:function(e){return e.LiveEvent.updateRemindMeSubscription}}}});f.selectHydratedTweet=function(e,t){return e.tweets&&Object(u.a)(e.tweets,{},e.users,t)},f.selectIsTOO=function(e,t){var r=t?f.select(e,t):void 0;return!!r&&!!r.liveEventDetails&&!r.liveEventDetails.attribution_user_id};var m=function(e,t){var r=e.entities,n=e.result,a=r.liveEvents,i=r.broadcasts,s=r.slates,u=r.tweets,d=r.users,p=o()(r,["liveEvents","broadcasts","slates","tweets","users"]),l={liveEventDetails:a[t],broadcasts:i,response:n.response,slates:s,tweets:u,users:d};return{entities:_(_({},p),{},{liveEvents:c()({},t,l)})}};t.a=p.a.register(f)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.Report.3a9c12a5.js.map