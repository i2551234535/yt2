(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"+/sI":function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return E}));n("2G9S"),n("M+/F"),n("Wd/2"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("5Yy7"),s=n.n(c),u=n("N+ot"),d=n.n(u),l=n("AuHH"),f=n.n(l),p=n("ERkP"),v=n("TGcR"),_=n("t62R"),m=n("a6qo"),y=n("rHpw");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var O="animated_gif",E="video",h=function(e){s()(n,e);var t=b(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e,t=this.props,n=t.durationInMilliseconds,r=t.type;if(r===O||"vine"===r)e=r===O?p.createElement(_.c,{weight:"bold"},"GIF"):p.createElement(v.a,{style:I.icon});else if(r===E&&n){var a=Math.trunc(n/6e4),i="0".concat(Math.trunc(n%6e4/1e3)).slice(-2);e=p.createElement(_.c,{color:"white"},"".concat(a,":").concat(i))}return e?p.createElement(m.a,{align:"left"},e):null}}]),n}(p.PureComponent),I=y.a.create((function(e){return{icon:{color:e.colors.white}}}));t.c=h},"07FG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cnVF"),a=function(e){return e===r.v}},"3A2y":function(e,t,n){"use strict";n("KOtZ"),n("+KXO");var r=n("zrOZ");t.a=function(e,t){var n=Object(r.a)(Array.isArray(t)?t:[t]);return Object.keys(e).reduce((function(t,r){return n.has(r)||(t[r]=e[r]),t}),{})}},"4q8G":function(e,t,n){"use strict";var r=n("t0aI");t.a=function(e,t){var n=e.sort_event_id,a=t.sort_event_id;return n?a?Object(r.a)(a,n):1:-1}},K3W9:function(e,t,n){"use strict";n.r(t),n.d(t,"TabbedMediaEditScreen",(function(){return A}));n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("5Yy7"),s=n.n(c),u=n("N+ot"),d=n.n(u),l=n("AuHH"),f=n.n(l),p=n("ERkP"),v=n("ge3j"),_=n("hqKg"),m=n("zh9S"),y=n("oEGd"),b=n("AspN"),O=Object(_.createSelector)((function(e){var t=v.k(e),n=v.l(e)[t];return Object(b.g)(e,n.mediaIds)}),(function(e){var t=v.k(e);return v.l(e)[t].mediaMetadata}),(function(e,t){return t.location&&t.location.state&&t.location.state.mediaId}),(function(e,t,n){return{media:e,initialMediaMetadata:t,initialMediaId:n}})),E={updateAltText:function(e){return v.w({updates:e})},processMedia:b.c,scribeAction:m.c,updateMediaUpload:b.j},h=Object(y.g)(O,E),I=n("jFmo");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var A=function(e){s()(n,e);var t=g(n);function n(e){var r;a()(this,n),r=t.call(this,e);var i=e.initialMediaId,o=e.media,c=e.history;return o.length<=0||!i?(c.replace("/"),d()(r)):r}return o()(n,[{key:"render",value:function(){return p.createElement(I.a,this.props)}}]),n}(p.Component);t.default=h(A)},VnFT:function(e,t,n){"use strict";n.d(t,"n",(function(){return D})),n.d(t,"m",(function(){return x})),n.d(t,"f",(function(){return L})),n.d(t,"d",(function(){return k})),n.d(t,"g",(function(){return V})),n.d(t,"e",(function(){return F})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return q})),n.d(t,"l",(function(){return K})),n.d(t,"h",(function(){return Q})),n.d(t,"k",(function(){return z})),n.d(t,"a",(function(){return Z})),n.d(t,"o",(function(){return Y})),n.d(t,"b",(function(){return $})),n.d(t,"c",(function(){return ne}));n("1t7P"),n("2G9S"),n("LW0h"),n("jwue"),n("lTEL"),n("7xRU"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("DZ+c"),n("87if"),n("+oxZ"),n("kYxP");var r=n("RhWx"),a=n.n(r),i=n("ddV6"),o=n.n(i),c=n("m3Bd"),s=n.n(c),u=n("KEM+"),d=n.n(u),l=n("AspN"),f=n("xPna"),p=n("oEOe"),v=n("xCUF"),_=n("ude7"),m=n("07FG"),y=n("Ssj5"),b=n("fEA7"),O=n.n(b),E=n("uKEd"),h=n("lnti"),I=n("/NU0");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S="rweb/".concat("multiDraftDMs"),T=function(e){return"".concat(S,"/").concat(e)},M={};var j=function(e){var t=e.conversation_id,n=e.id,r=e.localMediaId,a=e.recipient_ids,i=e.sender_id,o=e.text,c=e.attachment,s=void 0===c?{}:c,u=e.error,d=Date.now().toString();return{conversation_id:t,recipient_ids:a,error:u,id:n,is_draft:!0,message_data:{attachment:s,localMediaId:r,sender_id:i,text:o,time:d},type:"message",time:d}},R=T("SEND_MESSAGE_REQUEST"),C=T("SEND_MESSAGE_SUCCESS"),P=T("SEND_MESSAGE_FAILURE"),D=function(e){return function(t,n,r){var i=r.api,c=e||{},u=c.senderId,d=c.cardUrl,y=c.conversationId,b=c.localMediaId,g=c.recipients,S=void 0===g?[]:g,T=c.requestId,M=void 0===T?O.a.v1():T,D=c.tweetAttachment,N=c.quickReply,x=s()(c,["senderId","cardUrl","conversationId","localMediaId","recipients","requestId","tweetAttachment","quickReply"]);t(ae(y));var w=n(),L=b||G(n(),y),U=l.g(w,L),V=(o()(U,1)[0]||{}).mediaFile,B=S.length>0&&S.join(","),F={};V&&V.isGif?F.extraInitParams="&media_category=dm_gif":V&&V.isVideo&&(F.extraInitParams="&media_category=dm_video");var H=l.k(L,F),q=[t(H)],K=(Q(w,y)||{}).found_media_origin,W=z(w,y);return V&&V.isGif&&q.push(Object(_.a)(V)),Promise.all(q).then((function(n){var r=o()(n,2),c=o()(r[0],1)[0],s=r[1],_=W&&Object.keys(W).length&&W[c.id]&&(W[c.id].altText||W[c.id].defaultAltText),b=!!_;return(c&&(K||b)?t(l.i(A({media_id:c.uploadId,found_media_origin:K},!!b&&{alt_text:{text:_}}))):Promise.resolve()).then((function(){var n=(D||{}).id_str,r={};if(c){var o=c.mediaFile,l=void 0===o?{}:o,_={original_info:{width:l.width,height:l.height},sizes:[{h:l.height,w:l.width,resize:"fit"}]};l.isImage?r.photo=A(A({},_),{},{media_url_https:l.url}):l.isGif?r.animated_gif=A(A({},_),{},{media_url_https:s,type:"animated_gif"}):l.isVideo&&(r.video=A(A({},_),{},{media_url_https:l.url,type:"video"}))}else D&&(r.tweet={status:n});var b=(c||{}).uploadId,O=j({attachment:r,conversation_id:y,id:M,recipient_ids:B,sender_id:u,text:e.text}),g=A(A(A({},x),Object(m.a)(d)&&{card_uri:d}),{},{conversation_id:y,media_id:b,recipient_ids:B,request_id:M,tweet_id:n});N&&(g["quick_reply_response[options][id]"]=N.id,g["quick_reply_response[options][selected_id]"]=N.selected_id);var S=Object(h.a)([oe(y),{type:v.c.REQUEST},{type:R},y&&Object(E.b)(y,M,O)]);return t(S),i.DirectMessages.sendMessage(g).then((function(n){var r=n.entities,i=r.entries,o=r.users,c=r.tweets,s=r.cards,u=n.result.conversations;Object(I.a)(L)&&t(ne(y,L));var d=Object(h.a)([{type:v.c.SUCCESS}].concat(a()(Object(f.c)({conversations:u,entries:i,users:o,tweets:c,cards:s})),[{type:C},y&&Object(E.j)(y,M,e),k(y)]));return t(d),Promise.resolve(Object.values(n.entities.entries)[0].conversation_id)}),(function(n){var a=j({attachment:r,conversation_id:y,error:!0,id:M,localMediaId:L,recipient_ids:B,sender_id:u,text:e.text}),i=Object(h.a)([{type:v.c.SUCCESS},{type:P},y&&Object(E.b)(y,M,a)]);return t(i),Object(p.e)(t,n,"ACTION_SEND_DM")}))}),(function(e){return t(se(y)),e.type="metadata",Promise.reject(e)}))}),(function(e){return t(Object(h.a)([Object(I.a)(L)&&ne(y,L),se(y)])),Promise.reject(e)}))}},N=function(e,t){return e.multiDraftDMs[t]},x=function(e,t){var n=N(e,t);return n?n.text:null},w=T("SAVE_TEXT"),L=function(e,t){return{type:w,conversationId:e,text:t}},U=T("REMOVE_TEXT"),k=function(e){return{type:U,conversationId:e}},V=function(e,t){var n=N(e,t);return n?n.cardUrl:null},B=T("SAVE_CARD_URL"),F=function(e,t){return{type:B,conversationId:e,cardUrl:t}},G=function(e,t){var n=N(e,t);return n?n.mediaId:null},H=function(e,t){var n=l.g(e,G(e,t));return n.length>0?n[0]:null},q=function(e,t){var n=N(e,t);return!!n&&n.isUploading},K=function(e,t){return l.h(e,G(e,t))},Q=function(e,t){var n=N(e,t);return n?n.gifMetadata:null},z=function(e,t){var n=N(e,t);return n?n.mediaMetadata:void 0},W=T("ADD_MEDIA"),Z=function(e,t,n,r){return{payload:{isUploading:!1,mediaId:o()(t,1)[0],gifMetadata:n,mediaMetadata:r},type:W,conversationId:e}},X=T("UPDATE_MEDIA_METADATA"),Y=function(e,t){return{payload:t,type:X,conversationId:e}},J=T("CANCEL_UPLOAD"),$=function(e){return{type:J,conversationId:e}},ee=T("REMOVE_MEDIA"),te=function(e){return{type:ee,conversationId:e}},ne=function(e,t){return function(n){n(l.e(t)),n([$(e),te(e)])}},re=T("UPLOAD_REQUEST"),ae=function(e){return{type:re,conversationId:e}},ie=T("UPLOAD_SUCCESS"),oe=function(e){return{type:ie,conversationId:e}},ce=T("UPLOAD_FAILURE"),se=function(e){return{type:ce,conversationId:e}};y.a.register(d()({},"multiDraftDMs",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.conversationId||"new_group";switch(t.type){case X:case W:var r=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},r),t.payload)));case re:var a=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},a),{},{isUploading:!0})));case J:var i=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},i),{},{isUploading:!1})));case ce:case ie:case ee:var o=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},o),{},{isUploading:!1,mediaId:null,mediaMetadata:void 0,gifMetadata:void 0})));case w:var c=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},c),{},{text:t.text})));case B:var s=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},s),{},{cardUrl:t.cardUrl})));case U:var u=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return A(A({},e),{},d()({},n,A(A({},u),{},{text:null})));default:return e}})))},WVrH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("AQ79"),a=Object(r.c)("RESET"),i=function(){return{type:a}}},aWyx:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o}));n("yH/f");var r=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),a=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),i=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",CONVO_METADATA_UPDATE:"convo_metadata_update",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),o=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},eIif:function(e,t,n){"use strict";n.r(t),n.d(t,"PhotoTagsScreen",(function(){return Q}));n("2G9S"),n("LW0h"),n("hBpG"),n("z84I"),n("tQbP"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("RhWx"),a=n.n(r),i=n("VrFO"),o=n.n(i),c=n("Y9Ll"),s=n.n(c),u=n("1Pcy"),d=n.n(u),l=n("5Yy7"),f=n.n(l),p=n("N+ot"),v=n.n(p),_=n("AuHH"),m=n.n(_),y=n("KEM+"),b=n.n(y),O=n("ERkP"),E=n("VAZu"),h=(n("M+/F"),n("ge3j")),I=n("1YZw"),g=n("oEGd"),A=n("hqKg"),S=n("tn7R"),T=n("GZwR"),M=n("UQTn"),j=Object(A.createSelector)((function(e){var t=h.k(e);return h.l(e)[t].mediaTags}),(function(e){return function(e){var t=Object(M.e)(e),n=t&&Object(S.a)(t)||[];return Object(T.f)(n)}(e).filter((function(e){return e&&e.rounded_score})).sort((function(e,t){return(t.rounded_score||0)-(e.rounded_score||0)})).slice(0,12)}),(function(e,t){return{existingTags:e,injections:t}})),R={addToast:I.b,updateSingleComposer:h.w},C=Object(g.g)(j,R),P=n("7JQg"),D=n("jHSc"),N=n("3XMw"),x=n.n(N),w=n("mN6z"),L=n("yoO3"),U=n("2dXj"),k=n("MWbm"),V=n("/yvb"),B=n("rHpw");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var G=x.a.b772cd65,H=x.a.c20dc653,q=x.a.d1175c78,K=x.a.ae0831ab,Q=function(e){f()(n,e);var t=F(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),b()(d()(e),"state",{mediaTags:[]}),b()(d()(e),"_getItemDisabledMessage",(function(e){return K({screenName:e.data.screen_name})})),b()(d()(e),"_getItemIsDisabled",(function(e){return!e.data.can_media_tag})),b()(d()(e),"_handleSuggestionClicked",(function(t){var n=e.state.mediaTags,r=e.props.addToast;n.find((function(e){return e.id===t.id}))?e._handleUnselectUser(t):n.length<10?e.setState({mediaTags:[].concat(a()(n),[t])}):r({text:H})})),b()(d()(e),"_handleUnselectUser",(function(t){var n=e.state.mediaTags;e.setState({mediaTags:n.filter((function(e){return e.id!==t.id}))})})),b()(d()(e),"_handleQueryChange",(function(t){e.setState({query:t})})),b()(d()(e),"_renderHeader",(function(){var t=e.props.history;return O.createElement(E.a,{backButtonType:"close",history:t,onBackClick:e._handleGoBack,rightControl:e._renderAppBarRightControl(),title:q,withBottomBorder:!0})})),b()(d()(e),"_renderAppBarRightControl",(function(){var t=e.state.mediaTags,n=e.props.existingTags,r=t.map((function(e){return e.data.id_str})).sort(),a=n.map((function(e){return e.data.id_str})).sort(),i=r.length===a.length&&Object(w.a)(r,a);return O.createElement(k.a,{style:z.rightColumn},O.createElement(V.a,{disabled:i,onPress:e._handleAddMediaTags,size:"normalCompact",type:"primary"},G))})),b()(d()(e),"_handleGoBack",(function(){e.props.history.goBack()})),b()(d()(e),"_handleAddMediaTags",(function(){var t=e.props,n=t.history;(0,t.updateSingleComposer)({updates:{mediaTags:e.state.mediaTags}}),n.goBack()})),e}return s()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.existingTags;this.setState({mediaTags:e})}},{key:"render",value:function(){var e=this.props.history;return O.createElement(L.a,null,O.createElement(D.b,{documentTitle:q,history:e,renderHeader:this._renderHeader},O.createElement(U.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this.state.query?void 0:this.props.injections,onQueryChange:this._handleQueryChange,onRemove:this._handleUnselectUser,onSelect:this._handleSuggestionClicked,selectedUsers:this.state.mediaTags,source:T.d.ComposeMediaTagging,withCompactPills:!0})))}}]),n}(O.Component);b()(Q,"defaultProps",{existingTags:[]});var z=B.a.create((function(e){return{rightColumn:{flexDirection:"row",flexGrow:1,alignItems:"center"}}}));t.default=Object(P.c)({page:"media_tag",component:"media_tagger"})(C(Q))},i8hi:function(e,t,n){"use strict";n.r(t),n.d(t,"TabbedMediaEditScreen",(function(){return A}));n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("5Yy7"),s=n.n(c),u=n("N+ot"),d=n.n(u),l=n("AuHH"),f=n.n(l),p=n("ERkP"),v=n("hqKg"),_=n("zh9S"),m=n("oEGd"),y=n("AspN"),b=n("VnFT"),O=function(e,t){var n,r;return null===(n=t.location)||void 0===n||null===(r=n.state)||void 0===r?void 0:r.conversationId},E=Object(v.createSelector)((function(e,t){var n=O(0,t);return Object(b.i)(e,n)}),(function(e,t){var n=O(0,t);return Object(b.k)(e,n)}),(function(e,t){return t.location&&t.location.state&&t.location.state.mediaId}),(function(e,t,n){return{media:[e],initialMediaMetadata:t,initialMediaId:n}})),h=Object(m.d)(E,(function(e){var t,n,r;return{updateAltText:(r=null===(t=e.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.conversationId,function(e){return Object(b.o)(r,e)}),processMedia:y.c,scribeAction:_.c,updateMediaUpload:y.j}})),I=n("jFmo");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var A=function(e){s()(n,e);var t=g(n);function n(e){var r;a()(this,n),r=t.call(this,e);var i=e.initialMediaId,o=e.media,c=e.history;return o.length<=0||!i?(c.replace("/"),d()(r)):r}return o()(n,[{key:"render",value:function(){return p.createElement(I.a,this.props)}}]),n}(p.Component);t.default=h(A)},jFmo:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("hBpG"),n("jwue"),n("vrRf"),n("lTEL"),n("z84I"),n("m9LP"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("JtPf"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("87if"),n("MvUL"),n("+oxZ"),n("kYxP");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("1Pcy"),s=n.n(c),u=n("5Yy7"),d=n.n(u),l=n("N+ot"),f=n.n(l),p=n("AuHH"),v=n.n(p),_=n("KEM+"),m=n.n(_),y=n("ERkP"),b=(n("2G9S"),n("3XMw")),O=n.n(b),E=n("pKoL"),h=n("rHpw"),I=h.a.create((function(e){return{activityIndicator:{height:"100%",width:"100%"},image:{width:"100%",flexGrow:1},formTextInput:{width:"100%",backgroundColor:e.colors.navigationBackground,paddingHorizontal:e.spaces.xSmall,paddingBottom:0,borderTopWidth:e.spaces.nano,borderTopStyle:"solid",borderTopColor:e.colors.borderColor},mediaContainer:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"column",flexGrow:1,alignItems:"center",width:"100%",paddingVertical:25,paddingHorizontal:25,backgroundColor:e.colors.faintGray},attachmentContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}}})),g=n("t62R"),A=n("Qwev"),S=n("p+r5"),T=n("U+bB"),M=n("MWbm");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var R=O.a.feabf2a0,C=O.a.e36287c6,P=O.a.gff1f69e,D=O.a.cf565d08,N=function(e){d()(n,e);var t=j(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),m()(s()(e),"_renderInputHelperText",(function(){var t=e.props.onShowEducation;return t?y.createElement(g.c,{color:"link",onPress:t,withInteractiveStyling:!0},D):null})),m()(s()(e),"_handleChange",(function(t){var n=e.props,r=n.mediaItem,a=n.onChange,i=n.currentMediaId,o=t.target.value;r?a(o,r.id.toString()):i&&a(o,i)})),e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.autofocus,n=e.maxLength,r=e.mediaItem,a=e.orientedImage,i=e.value;return y.createElement(M.a,{style:I.root},y.createElement(M.a,{style:I.attachmentContainer},y.createElement(M.a,{style:I.mediaPreviewWrapper},a?y.createElement(T.a,{resizeMode:"contain",source:a.url,style:I.image}):r?y.createElement(E.a,{borderRadius:"medium",mediaItem:r,resizeIfNeeded:"width",style:I.mediaContainer,withCloseButton:!1}):y.createElement(A.a,{accessibilityLabel:P,style:I.activityIndicator})),y.createElement(S.a,{accessibilityLabel:R,autoFocus:t,helperText:this._renderInputHelperText(),label:C,maxLength:n,maxNumberOfLines:6,multiline:!0,name:"altTextInput",numberOfLines:2,onChange:this._handleChange,style:I.formTextInput,value:i})))}}]),n}(y.Component),x=n("rxPX"),w=n("HAhZ"),L=Object(x.a)().propsFromState((function(){return{tips:w.c}})).adjustStateProps((function(e){return{showEducationOnMount:!e.tips.alt_text_education}})).propsFromActions((function(){return{addTip:w.a}})).withAnalytics(),U=n("feu+"),k=n("1auM"),V=n("eYns");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var F=O.a.ffe9ec3a,G=O.a.ddc46a33,H=O.a.e57144f0,q=O.a.f9f9210c,K=function(e){d()(n,e);var t=B(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),m()(s()(e),"state",{orientedImage:void 0,showAltTextEducationSheet:!1}),m()(s()(e),"_handleOpenEducationPrompt",(function(){var t=e.props.analytics;e.setState({showAltTextEducationSheet:!0}),t.scribe({component:"education",action:"click"})})),m()(s()(e),"_handleCloseEducationPrompt",(function(){e.setState({showAltTextEducationSheet:!1})})),m()(s()(e),"_handleEducationPromptPrimaryAction",(function(){var t=e.props.analytics;e._handleCloseEducationPrompt(),t.scribe({component:"education",element:"alt_text_button",action:"click"})})),m()(s()(e),"_handleEducationPromptSecondaryAction",(function(){e.props.history.goBack()})),e}return o()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.analytics,r=t.mediaItem,a=t.cropData,i=t.showEducationOnMount,o=t.addTip;if(r&&r.originalMediaFile&&r.originalMediaFile instanceof k.a){var c=r.cropData;Object(V.b)(r.originalMediaFile,{cropData:a||c}).then((function(t){return new k.a(t).withDimensionsAndOrientation().then((function(t){e.setState({orientedImage:t})}))})).catch((function(){e.setState({orientedImage:null})}))}else this.setState({orientedImage:null});i&&(this.setState({showAltTextEducationSheet:!0}),n.scribe({component:"education",action:"open"}),o(m()({},"alt_text_education",!0)))}},{key:"render",value:function(){var e=this.props,t=e.onAltTextChange,n=e.mediaItem,r=e.value,a=this.state,i=a.orientedImage,o=a.showAltTextEducationSheet,c=n&&n.id.toString();return y.createElement(M.a,{style:Q.root},o?y.createElement(U.a,{actionLabel:H,headline:F,onAction:this._handleEducationPromptPrimaryAction,onClose:this._handleCloseEducationPrompt,onSecondaryAction:this._handleEducationPromptSecondaryAction,secondaryActionLabel:q,subtext:G}):null,y.createElement(N,{autofocus:!0,currentMediaId:c,maxLength:1e3,mediaItem:null===i?n:void 0,onChange:t,onShowEducation:this._handleOpenEducationPrompt,orientedImage:i||void 0,value:r}))}}]),n}(y.Component),Q=h.a.create((function(e){return{root:{flexGrow:1}}})),z=L(K),W=n("jHSc"),Z=n("EeFI"),X=n("YeIG"),Y=n("7JQg"),J=h.a.create((function(e){return{root:{paddingBottom:e.spaces.xSmall},rightControl:{display:"flex",flexDirection:"row"},prevButton:{marginEnd:e.spaces.micro},saveButton:{marginStart:e.spaces.xSmall},segmentedControlChildren:{flexGrow:1}}})),$=n("k/OQ"),ee=n("/yvb"),te=n("Lsrn"),ne=n("k/Ka");function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ne.a)("svg",ae(ae({},e),{},{style:[te.a.root,e.style],viewBox:"0 0 24 24"}),y.createElement("g",null,y.createElement("path",{d:"M3.5 5.25H2c-.414 0-.75.336-.75.75s.336.75.75.75h1.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm18.5 12H7.5c-.414 0-.75-.337-.75-.75V2c0-.414-.336-.75-.75-.75s-.75.336-.75.75v14.5c0 1.24 1.01 2.25 2.25 2.25H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4 2.5c-.414 0-.75.336-.75.75V22c0 .414.336.75.75.75s.75-.336.75-.75v-1.5c0-.414-.336-.75-.75-.75z"}),y.createElement("path",{d:"M8.5 6.75h8c.414 0 .75.337.75.75v8c0 .414.336.75.75.75s.75-.336.75-.75v-8c0-1.24-1.01-2.25-2.25-2.25h-8c-.414 0-.75.336-.75.75s.336.75.75.75z"})))};ie.metadata={width:24,height:24};var oe=ie,ce=n("95Se"),se=n("7Mjr");function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var fe={page:"tabbed_media",section:"alt_text"},pe={page:"tabbed_media",section:"crop"},ve=O.a.e070024a,_e=O.a.i2209530,me=O.a.i7d24b36,ye=O.a.f96a38a2,be=O.a.hac7c548,Oe=O.a.e3dbfba3,Ee=function(e){d()(n,e);var t=le(n);function n(e){var r;a()(this,n),r=t.call(this,e),m()(s()(r),"_cropper",y.createRef()),m()(s()(r),"_renderSegmentedControl",(function(){var e=r.props.location,t=r._getCurrentMediaItem(),n=[];return t&&t.originalMediaFile&&t.originalMediaFile.isImage&&n.push({to:de(de({},e),{},{state:de(de({},e.state),{},{tab:"crop"})}),label:y.createElement(oe,null),key:"crop",accessibilityLabel:be,isActive:function(){var t;return"crop"===(null===(t=e.state)||void 0===t?void 0:t.tab)}}),n.push({to:de(de({},e),{},{state:de(de({},e.state),{},{tab:"alt_text"})}),label:y.createElement(g.c,{weight:"bold"},"ALT"),key:"alt_text",accessibilityLabel:Oe,isActive:function(){var t;return"alt_text"===(null===(t=e.state)||void 0===t?void 0:t.tab)},onClick:r._handleClickAltTextTab}),e&&e.state?y.createElement(y.Fragment,null,y.createElement($.a,{accessibilityLabel:ve,links:n}),y.createElement(M.a,{style:J.segmentedControlChildren},"alt_text"===e.state.tab?r._renderAltTextTab():null,"crop"===e.state.tab?r._renderCropTab():null)):null})),m()(s()(r),"_renderAltTextTab",(function(){var e=r.props.history,t=r.state,n=t.cropData,a=t.mediaMetadata,i=t.currentMediaId,o=r._getCurrentMediaItem(),c=a[i.toString()]&&a[i.toString()].altText;return y.createElement(z,{cropData:n[i],history:e,key:i,mediaItem:o,onAltTextChange:r._handleAltTextChange,value:c})})),m()(s()(r),"_renderCropTab",(function(){var e=r.state,t=e.cropData,n=e.currentMediaId,a=r._getCurrentMediaItem();return y.createElement(Z.a,{defaultCropData:t[n],key:n,media:a,ref:r._cropper,withAspectRatioOptions:!0})})),m()(s()(r),"_renderAppBarRightControl",(function(){var e=r.state.isProcessing,t=r._getNextMediaIndex(1),n=r._getNextMediaIndex(-1);return y.createElement(M.a,{style:J.rightControl},r._hasMediaAtIndex(n)||r._hasMediaAtIndex(t)?y.createElement(M.a,{style:J.rightControl},y.createElement(ee.a,{accessibilityLabel:ye,disabled:!r._hasMediaAtIndex(n),icon:y.createElement(ce.a,null),onPress:r._handleClickToMediaAtIndex(n),size:"small",style:J.prevButton,type:"secondary"}),y.createElement(ee.a,{accessibilityLabel:me,disabled:!r._hasMediaAtIndex(t),icon:y.createElement(se.a,null),onPress:r._handleClickToMediaAtIndex(t),size:"small",type:"secondary"})):null,y.createElement(ee.a,{disabled:e,onPress:r._handleEndEditingClick,size:"normalCompact",style:J.saveButton,type:"primary"},_e))})),m()(s()(r),"_getCurrentMediaItem",(function(){var e=r.props.media,t=r.state.currentMediaId;return e.find((function(e){return e.id===t}))})),m()(s()(r),"_getNextMediaIndex",(function(e){var t=r.props.media,n=r._getCurrentMediaItem();return t.indexOf(n)+e})),m()(s()(r),"_hasMediaAtIndex",(function(e){var t=r.props.media;return e>=0&&e<t.length})),m()(s()(r),"_handleClickAltTextTab",(function(){var e=r.props.scribeAction;r._handleSaveCropData(),e(de(de({},r._getCurrentNamespace()),{},{element:"alt_text_button",action:"click"}))})),m()(s()(r),"_handleClickToMediaAtIndex",(function(e){return function(){var t=r.props.media;if(r._hasMediaAtIndex(e)){r._handleSaveCropData();var n=t[e].id;r.setState({currentMediaId:n})}}})),m()(s()(r),"_saveAltText",(function(){var e=r.props,t=e.initialMediaMetadata,n=e.updateAltText,a=r.state.mediaMetadata;n({mediaMetadata:de(de({},t),a)})})),m()(s()(r),"_handleEndEditingClick",(function(){var e=r.props,t=e.history,n=e.scribeAction,a=r._cropper&&r._cropper.current,i=r.state.cropData;if(a||!Object(X.a)(i)){var o=r.props,c=o.processMedia,s=o.updateMediaUpload,u=o.media,d=r.state.currentMediaId;r.setState({isProcessing:!0});var l=a?de(de({},i),{},m()({},d,a.getCropData())):i,f=u.map((function(e){return l[e.id]?(s({id:e.id,cropData:l[e.id]}),c(e.id)):Promise.resolve()})),p=r._getCurrentNamespace();Promise.all(f).then((function(){n(de(de({},p),{},{action:"done"}))}))}r._saveAltText(),t.goBack()})),m()(s()(r),"_handleAltTextChange",(function(e){r.setState((function(t){return{mediaMetadata:de(de({},t.mediaMetadata),{},m()({},t.currentMediaId.toString(),de(de({},t.mediaMetadata[t.currentMediaId.toString()]),{},{altText:e})))}}))})),m()(s()(r),"_handleSaveCropData",(function(){var e=r._cropper&&r._cropper.current;if(e){var t=r.state.currentMediaId,n=e.getCropData();r.setState((function(e){return{cropData:de(de({},e.cropData),{},m()({},t,n))}}))}}));var i=e.initialMediaMetadata,o=e.initialMediaId,c=e.media,u=e.history,d=i||{};return r.state={cropData:new Map,isProcessing:!1,mediaMetadata:d,currentMediaId:o||-1},c.length<=0||!o?(u.replace("/"),f()(r)):r}return o()(n,[{key:"render",value:function(){var e=this.props.history;return y.createElement(Y.b,{namespace:this._getCurrentNamespace()},y.createElement(W.b,{backButtonType:"back",containerStyle:J.root,documentTitle:ve,history:e,rightControl:this._renderAppBarRightControl(),title:ve,withBottomBorder:!1},this._renderSegmentedControl()))}},{key:"_getCurrentNamespace",value:function(){var e;return"alt_text"===(null===(e=this.props.location.state)||void 0===e?void 0:e.tab)?fe:pe}}]),n}(y.Component);t.a=Ee},lRnM:function(e,t,n){"use strict";n.d(t,"f",(function(){return Z})),n.d(t,"u",(function(){return $})),n.d(t,"y",(function(){return ee})),n.d(t,"z",(function(){return te})),n.d(t,"C",(function(){return re})),n.d(t,"D",(function(){return ae})),n.d(t,"B",(function(){return ie})),n.d(t,"A",(function(){return oe})),n.d(t,"v",(function(){return ce})),n.d(t,"w",(function(){return se})),n.d(t,"x",(function(){return ue})),n.d(t,"d",(function(){return de})),n.d(t,"k",(function(){return le})),n.d(t,"l",(function(){return fe})),n.d(t,"n",(function(){return pe})),n.d(t,"m",(function(){return ve})),n.d(t,"a",(function(){return _e})),n.d(t,"r",(function(){return me})),n.d(t,"G",(function(){return ye})),n.d(t,"o",(function(){return Oe})),n.d(t,"c",(function(){return he})),n.d(t,"p",(function(){return ge})),n.d(t,"q",(function(){return Ae})),n.d(t,"L",(function(){return Se})),n.d(t,"t",(function(){return Me})),n.d(t,"F",(function(){return Re})),n.d(t,"h",(function(){return Ce})),n.d(t,"j",(function(){return Pe})),n.d(t,"g",(function(){return De})),n.d(t,"i",(function(){return Ne})),n.d(t,"M",(function(){return xe})),n.d(t,"J",(function(){return we})),n.d(t,"K",(function(){return Le})),n.d(t,"I",(function(){return ke})),n.d(t,"b",(function(){return Be})),n.d(t,"s",(function(){return Ge})),n.d(t,"H",(function(){return qe})),n.d(t,"E",(function(){return Ke})),n.d(t,"e",(function(){return Qe}));n("1t7P"),n("jQ/y"),n("gqY9"),n("2G9S"),n("LW0h"),n("jwue"),n("lTEL"),n("7xRU"),n("z84I"),n("KOtZ"),n("HUPx"),n("ho0z"),n("6U7i"),n("ZVkB"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("+oxZ"),n("kYxP");var r=n("T0aG"),a=n.n(r),i=n("m3Bd"),o=n.n(i),c=n("RhWx"),s=n.n(c),u=n("ddV6"),d=n.n(u),l=n("KEM+"),f=n.n(l),p=n("oEOe"),v=n("AspN"),_=n("RqPI"),m=n("AQ79"),y=n("/kEJ"),b=n("xPna"),O=n("pXBW"),E=n("hqKg"),h=n("k49u"),I=n("/NU0"),g=n("aWyx"),A=n("WVrH"),S=n("uKEd"),T=n("k6jb"),M=n("kGix"),j=n("t0aI");function R(e){var t=function(e,t){if("object"!==a()(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a()(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a()(t)?t:String(t)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=p.a(m.b,"ACCEPT_CONVERSATION"),N=p.a(m.b,"MUTE_CONVERSATION"),x=p.a(m.b,"ADD_PARTICIPANTS"),w=p.a(m.b,"FETCH_CONVERSATION"),L=p.a(m.b,"FETCH_CONVERSATION_FROM_PARTICIPANTS"),U=p.a(m.b,"LEAVE_CONVERSATION"),k=p.a(m.b,"MARK_CONVERSATION_READ"),V=p.a(m.b,"DISABLE_MENTION_CONVERSATION_NOTIFICATIONS"),B=p.a(m.b,"DISABLE_CONVERSATION_NOTIFICATIONS"),F=p.a(m.b,"ENABLE_MENTION_CONVERSATION_NOTIFICATIONS"),G=p.a(m.b,"ENABLE_CONVERSATION_NOTIFICATIONS"),H=p.a(m.b,"UPDATE_CONVERSATION_NAME"),q=p.a(m.b,"UPLOAD_MEDIA"),K=p.a(m.b,"UPDATE_GROUP_AVATAR"),Q=function(e,t){return t+36e5*e},z=function(e){return[void 0,Q(1,e),Q(8,e),Q(168,e)]},W={};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.SUCCESS:var n=t.meta.conversationId,r=e[n];return P(P({},e),{},f()({},n,P(P({},r),{},{data:P(P({},r.data),{},{trusted:!0})})));case Ee:var a=Object.entries(t.payload||{}).reduce((function(t,n){var r,a=d()(n,2),i=a[0],o=a[1];return t[i]=P(P({},Y(e[i],o)),{},{fetchStatus:(r={},f()(r,T.a,M.a.LOADED),f()(r,T.b,M.a.LOADED),r)}),t}),{});return P(P({},e),a);case x.REQUEST:var i=t.meta.conversationId,c=e[i];return P(P({},e),{},f()({},i,P(P({},c),{},{fetchStatus:P(P({},c.fetchStatus),{},f()({},T.b,M.a.LOADING))})));case x.FAILURE:var u=t.meta.conversationId,l=e[u];return P(P({},e),{},f()({},u,P(P({},l),{},{fetchStatus:P(P({},l.fetchStatus),{},f()({},T.b,M.a.FAILED))})));case x.SUCCESS:var p=t.meta.conversationId,v=e[p],_=v.data.participants,m=t.payload.entities.entries?Object.values(t.payload.entities.entries)[0].participants:[];return P(P({},e),{},f()({},p,P(P({},v),{},{fetchStatus:P(P({},v.fetchStatus),{},f()({},T.b,M.a.LOADED)),data:P(P({},v.data),{},{participants:[].concat(s()(_),s()(m))})})));case w.REQUEST:var y=t.meta,b=y.conversationId,O=y.direction,E=void 0===O?T.a:O,h=e[b];return P(P({},e),{},f()({},b,P(P({},h),{},{fetchStatus:P(P({},h&&h.fetchStatus||{}),{},f()({},E,M.a.LOADING))})));case w.FAILURE:var I=t.meta,g=I.conversationId,S=I.direction,C=void 0===S?T.a:S,L=e[g];return P(P({},e),{},f()({},g,P(P({},L),{},{fetchStatus:P(P({},L&&L.fetchStatus||{}),{},f()({},C,M.a.FAILED)),error:t.payload})));case w.SUCCESS:var K=t.meta,Q=K.conversationId,Z=K.direction,X=void 0===Z?T.a:Z;return P(P({},e),{},f()({},Q,P(P({},e[Q]),{},{fetchStatus:P(P({},e[Q]&&e[Q].fetchStatus||{}),{},f()({},X,M.a.LOADED))})));case Ie:return Object.entries(e).reduce((function(n,r){var a=d()(r,2),i=a[0];a[1];return n[i]=Y(e[i],{last_read_event_id:t.payload}),n}),{});case k.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{last_read_event_id:t.meta.lastReadEventId})));case N.SUCCESS:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{muted:t.meta.mute})));case Te:var J=t.payload,$=(e[J],o()(e,[J].map(R)));return $;case U.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,P(P({},e[t.meta.conversationId]),{},{isDeleted:!0})));case je:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{notifications_disabled:!t.payload})));case B.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{notifications_disabled:!0,mute_expiration_time:z((new Date).getTime())[t.meta.duration]})));case V.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{mention_notifications_disabled:!0})));case G.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{notifications_disabled:!1})));case F.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{mention_notifications_disabled:!1})));case He:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{avatar_image_https:t.payload})));case H.REQUEST:case H.SUCCESS:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{name:t.meta.name})));case Ue:var ee=e[t.meta.conversationId],te=ee&&ee.data&&ee.data.max_entry_id||"0";return Object(j.b)(t.payload,te)?P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{max_entry_id:t.payload}))):e;case q.REQUEST:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{isUploading:!0})));case q.FAILURE:case q.SUCCESS:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{isUploading:!1})));case Ve:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{avatarMediaId:t.payload})));case Fe:return P(P({},e),{},f()({},t.meta.conversationId,Y(e[t.meta.conversationId],{avatarMediaId:null})));case A.a:return W;default:return e}}var X=function(e,t){return Object(j.c)(e,t)?e:t},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e.error,o()(e,["error"])),r=Object(I.a)(t.avatarMediaId)?t:n,a=r.avatarMediaId,i=void 0===a?null:a,c=t.isUploading,s=void 0!==c&&c,u=(t.avatarMediaId,t.isUploading,t.max_entry_id),d=o()(t,["avatarMediaId","isUploading","max_entry_id"]),l=P(P({},n&&n.data),d);return u&&(l.max_entry_id=X(u,n&&n.data&&n.data.max_entry_id)),P(P({},n),{},{avatarMediaId:i,data:l,isUploading:s})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.entries(e).reduce((function(e,n){var r=d()(n,2),a=r[0],i=r[1];return P(P({},e),{},f()({},a,P(P({},i),t)))}),{})},$=function(e,t){return e[m.a].conversations[t]},ee=function(e,t){var n=$(e,t);return n?Object(M.b)(n.fetchStatus,n.data):M.a.LOADED},te=function(e,t){var n=$(e,t);return!!n&&Object(M.b)(n.fetchStatus,n.data)===M.a.LOADED},ne=function(e,t){var n=$(e,t);return!!n&&n.fetchStatus[T.a]===M.a.LOADING},re=Object(E.createSelector)((function(e){return e[m.a].conversations}),(function(e){return Object.entries(e).reduce((function(e,t){var n=d()(t,2),r=n[0],a=n[1];return a.data&&!a.isDeleted&&(e[r]=a),e}),{})})),ae=function(e){return Object.keys(re(e)).length>0},ie=function(e,t){var n=(($(e,t)||{}).data||{}).sort_event_id;if(n){var r=_.g(e),a=Object(S.n)(e,n)||{},i=a.message_data,o=a.by_user_id,c=a.id,s=a.sender_id;if(s&&s!==r||i&&i.sender_id!==r||o&&o!==r)return c}return null},oe=function(e,t){var n=ie(e,t),r=($(e,t)||{}).data;return!n||!!(r&&r.last_read_event_id&&Object(j.c)(r.last_read_event_id,n))},ce=function(e,t){return($(e,t)||{}).avatarMediaId},se=function(e,t){return($(e,t)||{}).isUploading},ue=function(e,t){return v.h(e,ce(e,t))},de=function(e,t){return function(n,r,a){var i=a.api,o=t.join(",");return p.b(n,{params:{conversationId:e,joinedParticipantIds:o},request:i.DirectMessages.addParticipants})({actionTypes:x,context:"ACTION_DM_ADD_PARTICIPANTS",meta:{conversationId:e,participantIds:t}},(function(e){if(e){var t=e.entities;return[t.entries&&Object(S.a)(t.entries),Object(y.c)(t)]}})).then((function(e){var t=e.result.failed_participants;if(!t)return Promise.resolve(e);var n=Object.keys(t),r=1===n.length?t[n[0]]:h.a.DefaultApiError,a=new O.a("addParticpants URL",500,e.headers,[{code:r}]);return a.context.action="ACTION_DM_ADD_PARTICIPANTS",Promise.reject(a)}))}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId,o=e.context;return p.b(t,{params:e,request:a.DirectMessages.fetchConversation})({actionTypes:w,context:o,meta:{conversationId:i,direction:Object(T.c)(e)}},(function(e){if(e){var t=e.entities,n=t.cards,r=t.entries,a=t.tweets,i=t.users,o=e.result.conversation_timeline,c=o.conversations,s=o.max_entry_id,u=o.min_entry_id,d=o.status,l=J(c,{max_entry_id:s,min_entry_id:u,status:d});return Object(b.c)({conversations:l,entries:r,users:i,tweets:a,cards:n})}}))}},fe=function(e){return function(t,n,r){var a=r.api;return p.b(t,{params:{participantIds:e},request:a.DirectMessages.fetchConversationFromParticipants})({actionTypes:L,meta:{participantIds:e}})}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),a=e.conversationId,i=($(r,a)||{}).data,o=void 0===i?{}:i,c=ne(r,a);return(!o.status||o.status===g.c.HAS_MORE)&&!c?t(le({conversationId:a,context:"FETCH_DM_CONVERSATION"})):Promise.resolve()}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),a=e.conversationId,i=($(r,a)||{}).data||{},o=i.status,c=i.min_entry_id,s=ne(r,a);return o!==g.c.HAS_MORE||s?Promise.resolve():t(le(P(P({},e),{},{max_id:c,context:"FETCH_DM_CONVERSATION_HISTORY"})))}},_e=function(e){return function(t,n,r){var a=r.api;return p.b(t,{params:{conversationId:e},request:a.DirectMessages.acceptConversation})({actionTypes:D,meta:{conversationId:e}})}},me=function(e,t){return be(e,t,!0)},ye=function(e,t){return be(e,t,!1)},be=function(e,t,n){return function(r,a,i){var o=i.api;return p.b(r,{params:{userId:e,relationshipAction:n?"mute":"unmute",conversationId:t},request:o.DirectMessages.muteConversation})({actionTypes:N,meta:{userId:e,conversationId:t,mute:n}})}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId;return p.c(t,{params:e,request:a.DirectMessages.leaveConversation})({actionTypes:U,context:"ACTION_LEAVE_CONVERSATION",meta:{conversationId:i}})}},Ee=m.c("ADD_CONVERSATIONS"),he=function(e){return{payload:e,type:Ee}},Ie=m.c("MARK_ALL_AS_READ"),ge=function(e){return{payload:e,type:Ie}},Ae=function(e,t){return{type:k.REQUEST,meta:{conversationId:e,lastReadEventId:t}}},Se=function(e){return function(t,n,r){var a=r.api,i=n(),o=($(i,e)||{}).data,c=(void 0===o?{}:o).sort_event_id,s=!oe(i,e);return e&&c&&s?p.c(t,{params:{conversationId:e,last_read_event_id:c},request:a.DirectMessages.markRead})({actionTypes:k,bypassFailureOnErrors:function(){return!0},context:"APP_DM_UPDATE_CONVERSATION_READ_STATE",meta:{conversationId:e,lastReadEventId:c}}):Promise.resolve()}},Te=m.c("REMOVE_CONVERSATION"),Me=function(e){return[{payload:e,type:Te},Object(S.i)(e)]},je=m.c("TOGGLE_CONVERSATION_NOTIFICATIONS"),Re=function(e,t){return{meta:{conversationId:e},payload:t,type:je}},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId,o=e.duration;return p.c(t,{params:e,request:a.DirectMessages.disableNotifications})({actionTypes:B,context:"ACTION_DISABLE_NOTIFICATIONS",meta:{conversationId:i,duration:o}})}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId;return p.c(t,{params:e,request:a.DirectMessages.enableNotifications})({actionTypes:G,context:"ACTION_ENABLE_NOTIFICATIONS",meta:{conversationId:i}})}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId,o=P({mention_notifications_disabled:!0},e);return p.c(t,{params:o,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:V,context:"ACTION_DISABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId,o=P({mention_notifications_disabled:!1},e);return p.c(t,{params:o,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:F,context:"ACTION_ENABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){return r.api.DirectMessages.updateTyping(e)}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=e.conversationId,o=e.name;return p.c(t,{params:e,request:a.DirectMessages.updateConversationName})({actionTypes:H,context:"ACTION_UPDATE_CONVERSATION_NAME",meta:{conversationId:i,name:o}})}},Le=function(e){return{type:H.SUCCESS,meta:{conversationId:e.conversation_id,name:e.conversation_name}}},Ue=m.c("UPDATE_CONVERSATION_MAX_ENTRY_ID"),ke=function(e,t){return{meta:{conversationId:e},payload:t,type:Ue}},Ve=m.c("ADD_AVATAR_MEDIA"),Be=function(e,t){return{meta:{conversationId:e},payload:t,type:Ve}},Fe=m.c("REMOVE_AVATAR_MEDIA"),Ge=function(e,t){return{meta:{conversationId:e},payload:t,type:Fe}},He=m.c("UPDATE_CONVERSATION_AVATAR"),qe=function(e,t){return{meta:{conversationId:e},payload:t,type:He}},Ke=function(e){return function(t,n,r){var a=r.api;t({meta:{conversationId:e},type:q.REQUEST});var i=ce(n(),e),o=v.k(i);return t(o).then((function(n){var r=d()(n,1)[0];return t({meta:{conversationId:e},type:q.SUCCESS}),p.b(t,{params:{conversationId:e,avatar_id:r.uploadId},request:a.DirectMessages.updateConversationAvatar})({actionTypes:K,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"})}),(function(n){var r={errors:n,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"};return t({meta:{conversationId:e},type:q.FAILURE}),Promise.reject(r)}))}},Qe=function(e,t){return function(n,r,a){var i=a.api;return p.d(n,{params:{conversation_id:e,welcome_message_id:t},request:i.DirectMessages.addWelcomeMessageToConversation})("ADD_WELCOME_MESSAGE_TO_CONVERSATION")}}},pKoL:function(e,t,n){"use strict";n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),i=n("Y9Ll"),o=n.n(i),c=n("1Pcy"),s=n.n(c),u=n("5Yy7"),d=n.n(u),l=n("N+ot"),f=n.n(l),p=n("AuHH"),v=n.n(p),_=n("KEM+"),m=n.n(_),y=n("ERkP"),b=n("HPNB"),O=n("9HgX"),E=n("3XMw"),h=n.n(E),I=(n("uFXj"),n("mN6z")),g=(n("AxOO"),n("Qwev")),A=n("rHpw"),S=(n("aWzz"),n("1auM")),T=n("ude7"),M=n("U+bB"),j=n("MWbm");function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var C=h.a.gff1f69e,P=function(e){d()(n,e);var t=R(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),m()(s()(e),"state",{imagePreviewUrl:null}),m()(s()(e),"_getImageSrc",(function(){var t=e.props,n=t.mediaItem,r=t.enableGif,a=e.state.imagePreviewUrl;if(n&&n.mediaFile)return n.mediaFile.isGif&&!r?a:n.mediaFile.url})),e}return o()(n,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props,n=t.enableGif,r=t.mediaItem.mediaFile,a=this.state.imagePreviewUrl;n||a||r instanceof S.a&&r.isGif&&Object(T.a)(r).then((function(t){e.setState({imagePreviewUrl:t})}))}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(I.a)(e,this.props)||!Object(I.a)(t,this.state)}},{key:"render",value:function(){var e=this.props,t=e.borderRadius,n=e.enableGif,r=e.mediaItem,a=e.onClick,i=(this.state||{}).imagePreviewUrl,o=r.mediaFile&&r.mediaFile.isGif&&!n&&!i,c=r.needsProcessing||o,s=[N.root,D[t],c&&N.loadingBorder],u=this._getImageSrc();return y.createElement(j.a,{onClick:a,style:s},c||!u?y.createElement(g.a,{accessibilityLabel:C,style:N.activityIndicator}):y.createElement(M.a,{resizeMode:"cover",source:u,style:N.image}))}}]),n}(y.Component);m()(P,"defaultProps",{borderRadius:"none",enableGif:!0});var D=A.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.small},none:{borderRadius:e.borderRadii.none}}})),N=A.a.create((function(e){return{root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.mediumGray},activityIndicator:{height:"100%"}}})),x=P,w=(n("1t7P"),n("LW0h"),n("jwue"),n("z84I"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ"),n("m3Bd")),L=n.n(w),U=n("k/Ka"),k=n("eXeu"),V=n("iOGT");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var H=function(e){d()(n,e);var t=G(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),m()(s()(e),"_setVideoRef",(function(t){var n=e.props.getVideoRef;n&&n(t)})),e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.dataSaverMode,r=(e.getVideoRef,e.style),a=e.variants,i=L()(e,["children","dataSaverMode","getVideoRef","style","variants"]),o=Object(V.c)(a,n?V.a.MEDIUM:V.a.HIGH)||[],c=Object(k.e)(o.map((function(e){return{src:e.url,type:e.content_type}})));return Object(U.a)("video",F(F({},i),{},{children:[c.map((function(e){return y.createElement("source",{key:e.src,src:e.src,type:e.type})})),t],ref:this._setVideoRef,style:r}))}}]),n}(y.Component);m()(H,"defaultProps",{dataSaverMode:!1,variants:[]});var q=n("sjK1"),K=n("cHvH"),Q=n("mXq/"),z=n("/yvb"),W=n("a6qo"),Z=n("hOZg"),X=n("tuke"),Y=n("+/sI");function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var $=h.a.gd80afba,ee=h.a.abd845fd,te=h.a.df1b0707,ne=h.a.cd959e5b,re=h.a.add55c97,ae=function(e){d()(n,e);var t=J(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),m()(s()(e),"state",{isVideoPaused:!0,playGif:!1}),m()(s()(e),"_handleGifClick",(function(){e.setState({playGif:!e.state.playGif})})),m()(s()(e),"_handleMediaPreviewLayout",(function(t){var n=e.props,r=n.mediaItem,a=n.resizeIfNeeded,i=r.mediaFile||r.externalMediaDetails;if(i){var o=t.nativeEvent.layout,c=o.height,s=o.width,u=i.height,d=i.width/u;Math.abs(d-s/c)>.05&&e._mediaContainer&&("width"===a?e._mediaContainer.setNativeProps({style:{width:c*d}}):"height"===a&&e._mediaContainer.setNativeProps({style:{height:s/d}}))}})),m()(s()(e),"_handleVideoOnPlay",(function(t){e.setState({isVideoPaused:!1})})),m()(s()(e),"_handleVideoOnPause",(function(t){e.setState({isVideoPaused:!0})})),m()(s()(e),"_setMediaContainerRef",(function(t){e._mediaContainer=t})),m()(s()(e),"_setVideoRef",(function(t){e._video=t})),m()(s()(e),"_playVideo",(function(){if(e._video){var t=e._video.play();void 0!==t&&t.then((function(t){e._handleVideoOnPlay()})).catch()}})),m()(s()(e),"_pauseVideo",(function(){e._video&&(e._video.pause(),e._handleVideoOnPause())})),e}return o()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.accessibilityLabel,r=t.accessibilityRole,a=t.enableGif,i=t.mediaItem,o=t.onEdit,c=t.onRemove,s=t.style,u=t.withAltTextLabel,d=t.withCloseButton,l=t.withEditButton,f=this.state.playGif,p=i.externalMediaDetails&&i.externalMediaDetails.mediaType===O.a,v=p||a&&i.mediaFile&&i.mediaFile.isGif;return y.createElement(K.a,null,(function(t){var a=t.windowWidth,i=b.a.isTwoColumnLayout(a);return y.createElement(j.a,{accessibilityLabel:n||re,accessibilityRole:r,onLayout:e._handleMediaPreviewLayout,ref:e._setMediaContainerRef,style:[s,ie.cursor,p&&ie.gifPlayButton]},e._renderPreview(),p&&!f&&y.createElement(Q.a,{accessibilityLabel:te,onPress:e._handleGifClick,size:"small"}),d?y.createElement(z.a,{accessibilityLabel:ne,icon:y.createElement(Z.a,null),onPress:c,size:"small",style:ie.close,type:"onMedia"}):null,v?y.createElement(Y.c,{type:Y.a}):null,u?y.createElement(W.a,{align:"left",bold:!0},"ALT"):null,l?y.createElement(z.a,{accessibilityLabel:$,icon:i?void 0:y.createElement(X.a,null),onPress:o,size:i?"normalCompact":"small",style:ie.edit,type:"onMedia"},i&&ee):null)}))}},{key:"_renderPreview",value:function(){var e=this.props.mediaItem;if(e.externalMediaDetails){var t=e.externalMediaDetails.previewUrl,n=e.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(t,n)}if(e.mediaFile&&e.mediaFile.isVideo){var r=[{content_type:e.mediaFile.type,url:e.mediaFile.url}];return this._renderVideoPreview(r)}return y.createElement(j.a,{style:A.a.absoluteFill},this._renderImagePreview())}},{key:"_renderGifPreview",value:function(e,t){var n={uri:this.state.playGif?e:t};return y.createElement(j.a,{onClick:this._handleGifClick,style:A.a.absoluteFill},y.createElement(M.a,{resizeMode:"cover",source:n,style:ie.video}))}},{key:"_renderImagePreview",value:function(){var e=this.props,t=e.borderRadius,n=e.enableGif,r=e.mediaItem,a=e.onClick;return y.createElement(x,{borderRadius:t,enableGif:n,mediaItem:r,onClick:a})}},{key:"_renderVideoPreview",value:function(e){var t=this.props.mediaItem.mediaFile;return y.createElement(H,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:t instanceof q.c?t.thumbnail:"",style:ie.video,variants:e})}}]),n}(y.Component);m()(ae,"defaultProps",{enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1});var ie=A.a.create((function(e){return{close:{position:"absolute",left:e.spaces.xxSmall,top:e.spaces.xxSmall},cursor:{cursor:"pointer"},edit:{position:"absolute",right:e.spaces.xxSmall,top:e.spaces.xxSmall},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}}}));t.a=ae},tuke:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),i=n("ERkP"),o=n("Lsrn"),c=n("k/Ka");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("svg",u(u({},e),{},{style:[o.a.root,e.style],viewBox:"0 0 24 24"}),i.createElement("g",null,i.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})))};d.metadata={width:24,height:24},t.a=d},uKEd:function(e,t,n){"use strict";n.d(t,"e",(function(){return C})),n.d(t,"a",(function(){return x})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return L})),n.d(t,"k",(function(){return U})),n.d(t,"i",(function(){return V})),n.d(t,"r",(function(){return B})),n.d(t,"h",(function(){return F})),n.d(t,"b",(function(){return H})),n.d(t,"j",(function(){return K})),n.d(t,"c",(function(){return z})),n.d(t,"g",(function(){return Z})),n.d(t,"l",(function(){return X})),n.d(t,"n",(function(){return Y})),n.d(t,"o",(function(){return J})),n.d(t,"m",(function(){return $})),n.d(t,"p",(function(){return ee})),n.d(t,"q",(function(){return te}));n("1t7P"),n("2G9S"),n("LW0h"),n("hBpG"),n("jwue"),n("lTEL"),n("z84I"),n("KOtZ"),n("tQbP"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("DZ+c"),n("+oxZ"),n("kYxP");var r=n("m3Bd"),a=n.n(r),i=n("RhWx"),o=n.n(i),c=n("KEM+"),s=n.n(c),u=n("t0aI"),d=n("aWyx"),l=n("SrIh"),f=n("WVrH"),p=n("fEA7"),v=n.n(p),_=n("AQ79"),m=n("3A2y"),y=n("J4ZH"),b=n("4FGy"),O=n("s1N3"),E=n("lnti"),h=n("oEOe");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=Object(h.a)(_.b,"DELETE_MESSAGE"),S=Object(h.a)(_.b,"REACTION_CREATE"),T=Object(h.a)(_.b,"REACTION_DELETE"),M=Object(h.a)(_.b,"MARK_ENTRIES_AS_SPAM"),j=Object(h.a)(_.b,"MARK_ENTRIES_AS_NOT_SPAM"),R={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.meta||{},r=n.conversationId,a=n.requestId;switch(t.type){case G:var i=t.payload.id,c=g(g({},e.entries),{},s()({},i,P(e.entries[i],{data:t.payload})));return g(g({},e),{},{entries:c,entryIdsByConversationId:g(g({},e.entryIdsByConversationId),{},s()({},r,D([].concat(o()(e.entryIdsByConversationId[r]||[]),[i]),c)))});case N:var u=Object.values(t.payload).filter((function(e){return e.type!==d.b.CONVERSATION_READ})),p=u.reduce((function(t,n){var r=n.id,a=Object(m.a)(n,"message_reactions");return t.allEntries[r]=P(e.entries[r],{data:a,isLoading:!1,isLoaded:!0}),n.message_reactions&&(n.message_reactions.forEach((function(r){var a=g(g({},r),{},{affects_sort:!0,message_id:n.id,type:d.b.REACTION_CREATE});t.allEntries[a.id]=P(e.entries[a.id],{data:a,isLoading:!1,isLoaded:!0})})),t.embeddedReactionsByMessageId[r]=D([].concat(o()(e.reactionsByMessageId[r]||[]),o()(n.message_reactions.map((function(e){return e.id})))),g(g({},e.entries),t.allEntries))),t}),{allEntries:{},embeddedReactionsByMessageId:{}}),v=g(g({},e.entries),p.allEntries),_=Object(y.a)(Object.values(p.allEntries),(function(e){return e.data.conversation_id})),O=Object.keys(_).reduce((function(t,n){var r=_[n].map((function(e){return e.data.id}));return t[n]=D([].concat(o()(e.entryIdsByConversationId[n]||[]),o()(r)),v),t}),{});return g(g({},e),{},{entries:v,entryIdsByConversationId:g(g({},e.entryIdsByConversationId),O),reactionsByMessageId:g(g({},e.reactionsByMessageId),p.embeddedReactionsByMessageId)});case M.REQUEST:case j.REQUEST:var E=t.type===M.REQUEST,h=t.payload.reduce((function(t,n){var r=e.entries[n]&&e.entries[n].data;return g(g({},t),{},s()({},n,g(g({},e.entries[n]),{},{data:g(g({},r),{},{marked_as_spam:E})})))}),{});return g(g({},e),{},{entries:g(g({},e.entries),h)});case A.REQUEST:case k:var I=t.type===k&&!Array.isArray(t.payload),S=e.entryIdsByConversationId[r]||[],C=t.type===k?I?S:t.payload:[t.payload].concat(o()(e.reactionsByMessageId[t.payload]||[]));return g(g({},e),{},{entries:Object(m.a)(e.entries,C),entryIdsByConversationId:g(g({},Object(m.a)(e.entryIdsByConversationId,r)),I?{}:s()({},r,Object(b.a)(S,C))),reactionsByMessageId:Object(m.a)(e.reactionsByMessageId,C)});case q:var x=t.payload.id||a,w=g({},Object(m.a)(e.entries,x)),L=D((e.entryIdsByConversationId[r]||[]).filter((function(e){return e!==x})),w),U=L?s()({},r,L):{};return g(g({},e),{},{entries:w,entryIdsByConversationId:g(g({},Object(m.a)(e.entryIdsByConversationId,r)),U),reactionsByMessageId:Object(m.a)(e.reactionsByMessageId,x)});case Q:var V=t.payload,B=[].concat(o()(e.reactionsByMessageId[V.message_id]||[]),[V.id]),F=B.filter((function(t){return e.entries[t]}));B.length!==F.length&&Object(l.a)("DM add reaction is missing a backing entry",{extra:{filteredMessageReactionIds:F,messageReactionIds:B,currentId:V.id}});var H=D(F,e.entries);return g(g({},e),{},{reactionsByMessageId:g(g({},e.reactionsByMessageId),{},s()({},V.message_id,H))});case T.REQUEST:case W:var K=t.payload,z=(e.reactionsByMessageId[K.message_id]||[]).find((function(t){return e.entries[t].data.sender_id===K.sender_id}));if(!z)return e;var Z=Object(b.a)(e.entryIdsByConversationId[K.conversation_id],z),X=Object(b.a)(e.reactionsByMessageId[K.message_id],z);return g(g({},e),{},{entries:Object(m.a)(e.entries,z),entryIdsByConversationId:g(g({},e.entryIdsByConversationId),{},s()({},K.conversation_id,Z)),reactionsByMessageId:g(g({},e.reactionsByMessageId),{},s()({},K.message_id,X))});case f.a:return R;default:return e}}var P=function(e,t){var n=e||{},r=(n.error,n.isLoaded,n.isLoading,a()(n,["error","isLoaded","isLoading"])),i=t||{},o=i.data,c=a()(i,["data"]);return g(g({},r),{},{data:g(g({},r&&r.data),o)},c)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(O.a)(e).sort((function(e,n){var r=Object(u.a)(t[e].data.time,t[n].data.time);return 0===r?Object(u.a)(t[e].id,t[n].id):r}));return n.length?n:void 0},N=Object(_.c)("ADD_ENTRIES"),x=function(e){return{payload:e,type:N}},w=function(e){return function(t,n,r){var i=r.api,o=e||{},c=o.id,s=o.conversationId,u=o.requestId,d=void 0===u?v.a.v1():u,l=g(g({},a()(o,["id","conversationId","requestId"])),{},{id:c,request_id:d});return Object(h.c)(t,{params:l,request:i.DirectMessages.deleteMessage})({actionTypes:A,context:"ACTION_DELETE_DM",payload:c,meta:{conversationId:s}})}},L=function(e){return function(t,n,r){var a,i,o,c,s,u=r.api,l=(i=(a=e).reaction_key,o=a.conversation_id,c=a.dm_id,s=a.perspective,{id:v.a.v1(),time:(new Date).getTime().toString(),reaction_key:i,conversation_id:o,message_id:c,sender_id:s,type:d.b.REACTION_CREATE});t([H(l.conversation_id,l.id,l),Z(l),z(l)]);return Object(h.b)(t,{params:Object(m.a)(e,"perspective"),request:u.DirectMessages.addReaction})({actionTypes:S,context:"ACTION_REACTION_CREATE"},(function(e,t){if(t)return[Z(l)]}))}},U=function(e){return function(t,n,r){var i=r.api,o=e.perspective,c=a()(e,["perspective"]);return Object(h.c)(t,{params:c,request:i.DirectMessages.deleteReaction})({actionTypes:T,context:"ACTION_REACTION_DELETE",payload:{conversation_id:e.conversation_id,message_id:e.dm_id,sender_id:o}})}},k="rweb/dm/REMOVE_CONVERSATION_ENTRIES",V=function(e,t){return{meta:{conversationId:e},payload:t,type:k}},B=function(e,t){return{payload:e,type:t?M.REQUEST:j.REQUEST}},F=function(e){var t=e.conversationId,n=e.dmId,r=e.markSpam;return function(e,a,i){var o=i.api;return Object(h.c)(e,{params:{dm_id:n,report_as:r?"spam":"not_spam"},request:o.DirectMessages.reportSpam})({actionTypes:r?A:j,payload:r?n:[n],meta:{conversationId:t}})}},G=Object(_.c)("ADD_ENTRY"),H=function(e,t,n){return{meta:{conversationId:e,requestId:t},payload:n,type:G}},q=Object(_.c)("REMOVE_ENTRY"),K=function(e,t,n){return{meta:{conversationId:e,requestId:t},payload:n,type:q}},Q=Object(_.c)("ADD_REACTION"),z=function(e){return{payload:e,type:Q}},W=Object(_.c)("DELETE_REACTION"),Z=function(e){return{payload:e,type:W}},X=function(e){return e[_.a].entries},Y=function(e,t){var n=X(e).entries[t];return n&&n.data},J=function(e,t){return e[_.a].entries.entryIdsByConversationId[t]},$=function(e,t){var n=J(e,t);return n?Object(E.a)(n.map((function(t){return Y(e,t)}))):[]},ee=function(e,t){return X(e).reactionsByMessageId[t]},te=function(e,t){return(ee(e,t)||[]).map((function(t){return Y(e,t).sender_id}))}},ude7:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("7x/C"),n("JtPf");var r=n("A0bJ"),a=n("hJBK"),i=n("1auM"),o=1,c=2,s=3,u=function(e){if(Object(i.b)(e)){if(e.isGif){var t=e.img,n=e.width,u=e.height,d=e.orientation;return Object(a.b)(t,n,u,d).then((function(e){return Object(a.a)(e)}),(function(e){throw new r.a("Gif preview could not be generated",s)}))}var l=new r.a("The provided image must be a gif",c);return Promise.reject(l)}var f=new r.a("The provided file is not a valid image",o);return Promise.reject(f)}},xCUF:function(e,t,n){"use strict";n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return A})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return C}));n("1t7P"),n("2G9S"),n("LW0h"),n("jwue"),n("lTEL"),n("KOtZ"),n("tQbP"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("+oxZ"),n("kYxP");var r=n("RhWx"),a=n.n(r),i=n("m3Bd"),o=n.n(i),c=n("KEM+"),s=n.n(c),u=n("oEOe"),d=n("aWyx"),l=n("k6jb"),f=n("P1r1"),p=n("AQ79"),v=n("uKEd"),_=n("xPna"),m=n("lRnM"),y=n("WVrH");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=u.a(p.b,"FETCH_UPDATES"),h={isLoaded:!1,isLoading:!1};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.REQUEST:return O(O({},e),{},{isLoading:!0});case E.FAILURE:return O(O({},e),{},{error:t.payload,isLoaded:!1,isLoading:!1});case E.SUCCESS:e.error;var n=o()(e,["error"]);return O(O({},n),{},{isLoaded:!0,isLoading:!1});case S:return O(O({},e),{},{cursor:t.payload});case M:return O(O({},e),{},{tertiaryInboxStatus:t.payload});case y.a:return h;default:return e}}var g=function(e){return function(t,n,r){var i=r.api,c=n().directMessages,s=void 0===c?{}:c,d=(s.updates||{}).cursor,p=e||{},v=p.polling,m=o()(p,["polling"]),b=(s.updates||{}).tertiaryInboxStatus,h=!1,I=v?{"x-twitter-polling":"true"}:{},g=Object(f.p)(n())?"on":"off";b?b!==g&&(d=null,h=!0):h=!0;var A=Object(_.j)(O(O({},m),{},{cursor:d}),n());return u.b(t,{params:A,headers:I,request:i.DirectMessages.fetchUserUpdates})({actionTypes:E,context:"FETCH_DM_USER_UPDATES",meta:{direction:Object(l.c)(e)}},(function(e){if(e){var t=e.entities,n=t.entries,r=t.tweets,i=t.users,o=t.cards,c=e.result,s=c.user_events,u=c.inbox_initial_state;return[u&&Object(y.b)()].concat(a()(Object(_.c)(O(O({},s||u),{},{entries:n,users:i,tweets:r,cards:o}))),a()(s?R(Object.values(n||[])):[]),[h&&j(g)])}}))}},A=function(e){return function(t,n){return P(n())?Promise.resolve():t(g(e))}},S=Object(p.c)("UPDATE_CURSOR"),T=function(e){return{payload:e,type:S}},M=Object(p.c)("UPDATE_TERTIARY_INBOX_STATUS"),j=function(e){return{payload:e,type:M}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.id-t.id})).reduce((function(e,t){switch(t.type){case d.b.CONVERSATION_AVATAR_UPDATE:return[].concat(a()(e),[Object(m.H)(t.conversation_id,t.conversation_avatar_image_https),Object(m.I)(t.conversation_id,t.id)]).filter((function(e){return e}));case d.b.CONVERSATION_NAME_UPDATE:return[].concat(a()(e),[Object(m.K)(t),Object(m.I)(t.conversation_id,t.id)]).filter((function(e){return e}));case d.b.CONVERSATION_READ:return[].concat(a()(e),[Object(m.q)(t.conversation_id,t.last_read_event_id)]);case d.b.DISABLE_NOTIFICATIONS:case d.b.ENABLE_NOTIFICATIONS:var n=t.type===d.b.ENABLE_NOTIFICATIONS;return[].concat(a()(e),[Object(m.F)(t.conversation_id,n)]);case d.b.MARK_ALL_AS_READ:return[].concat(a()(e),[Object(m.p)(t.last_read_event_id)]);case d.b.MESSAGE_DELETE:return[].concat(a()(e),[Object(v.i)(t.conversation_id,t.messages.reduce((function(e,t){return[].concat(a()(e),a()(Object.values(t)))}),[]))]);case d.b.MESSAGE_MARK_AS_NOT_SPAM:case d.b.MESSAGE_MARK_AS_SPAM:var r=t.type===d.b.MESSAGE_MARK_AS_SPAM;return[].concat(a()(e),[Object(v.r)(t.messages.reduce((function(e,t){return[].concat(a()(e),a()(Object.values(t)))}),[]),r)]);case d.b.REMOVE_CONVERSATION:return[].concat(a()(e),a()(Object(m.t)(t.conversation_id)));case d.b.JOIN_CONVERSATION:case d.b.PARTICIPANTS_JOIN:case d.b.PARTICIPANTS_LEAVE:return[].concat(a()(e),[Object(m.I)(t.conversation_id,t.id)]);case d.b.REACTION_CREATE:return[].concat(a()(e),[Object(v.g)(t),Object(v.c)(t),Object(m.I)(t.conversation_id,t.id)]);case d.b.REACTION_DELETE:return[].concat(a()(e),[Object(v.g)(t)]);case d.b.MESSAGE:return[].concat(a()(e),[Object(m.I)(t.conversation_id,t.id)]).filter((function(e){return e}));default:return e}}),[])},C=function(e){return e[p.a].updates},P=function(e){return C(e).isLoading}},xPna:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return D})),n.d(t,"d",(function(){return x})),n.d(t,"j",(function(){return U})),n.d(t,"t",(function(){return F})),n.d(t,"p",(function(){return G})),n.d(t,"o",(function(){return H})),n.d(t,"w",(function(){return q})),n.d(t,"y",(function(){return K})),n.d(t,"q",(function(){return Q})),n.d(t,"s",(function(){return z})),n.d(t,"r",(function(){return W})),n.d(t,"n",(function(){return Y})),n.d(t,"u",(function(){return J})),n.d(t,"z",(function(){return $})),n.d(t,"v",(function(){return ee})),n.d(t,"x",(function(){return te})),n.d(t,"e",(function(){return re})),n.d(t,"f",(function(){return ae})),n.d(t,"h",(function(){return oe})),n.d(t,"i",(function(){return ce})),n.d(t,"g",(function(){return se})),n.d(t,"c",(function(){return le})),n.d(t,"D",(function(){return fe})),n.d(t,"E",(function(){return pe})),n.d(t,"C",(function(){return ve})),n.d(t,"m",(function(){return me})),n.d(t,"B",(function(){return Oe})),n.d(t,"l",(function(){return Ee})),n.d(t,"A",(function(){return ge})),n.d(t,"k",(function(){return Ae}));n("1t7P"),n("2G9S"),n("LW0h"),n("jwue"),n("lTEL"),n("z84I"),n("KOtZ"),n("tQbP"),n("yH/f"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("+oxZ"),n("kYxP");var r,a,i=n("m3Bd"),o=n.n(i),c=n("KEM+"),s=n.n(c),u=n("oEOe"),d=n("/kEJ"),l=n("uKEd"),f=n("4q8G"),p=n("kGix"),v=n("aWyx"),_=n("WVrH"),m=n("xCUF"),y=n("AQ79"),b=n("lRnM"),O=n("tn7R"),E=n("YeIG"),h=n("t0aI"),I=n("P1r1");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=u.a(y.b,"FETCH_INBOX"),T=u.a(y.b,"UPDATE_LAST_SEEN_EVENT_ID"),M="inbox",j="trusted",R="untrusted",C="untrusted_low_quality",P=Object.freeze({CLOSED:"closed",COLLAPSED:"collapsed",EXPANDED:"expanded"}),D={primary:"primary",secondary:"secondary",tertiary:"tertiary"},N={cursors:(r={},s()(r,M,{fetchStatus:p.a.NONE}),s()(r,j,{fetchStatus:p.a.NONE}),s()(r,R,{fetchStatus:p.a.NONE}),s()(r,C,{fetchStatus:p.a.NONE}),r),lastSeenEventIds:{},poppedOutConversationId:null,drawerVisibility:P.COLLAPSED,drawerExperimentEnabled:!1};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.REQUEST:var n=t.meta.timelineType;return A(A({},e),{},{cursors:A(A({},e.cursors),{},s()({},n,A(A({},e.cursors[n]),{},{fetchStatus:p.a.LOADING})))});case S.FAILURE:var r=t.meta.timelineType;return A(A({},e),{},{cursors:A(A({},e.cursors),{},s()({},r,A(A({},e.cursors[r]),{},{error:t.payload,fetchStatus:p.a.FAILED})))});case S.SUCCESS:var a=t.meta.timelineType;return A(A({},e),{},{cursors:A(A({},e.cursors),{},s()({},a,A(A({},e.cursors[a]),{},{error:void 0,fetchStatus:p.a.LOADED})))});case ue:return A(A({},e),{},{cursors:A(A({},e.cursors),t.payload.cursors),lastSeenEventIds:w(e.lastSeenEventIds,t.payload.lastSeenEventIds)});case T.REQUEST:return A(A({},e),{},{lastSeenEventIds:A(A({},e.lastSeenEventIds),t.meta.lastSeenEventIds)});case _.a:return A(A({},N),{},{cursors:A(A({},N.cursors),{},{inbox:e.cursors.inbox})});case _e:return A(A({},e),{},{poppedOutConversationId:t.conversationId,drawerVisibility:P.EXPANDED});case ye:return A(A({},e),{},{drawerVisibility:t.visibility});case he:return A(A({},e),{},{drawerExperimentEnabled:t.enabled});default:return e}}var w=function(e,t){return{last_seen_event_id:L(e.last_seen_event_id,t.last_seen_event_id),trusted_last_seen_event_id:L(e.trusted_last_seen_event_id,t.trusted_last_seen_event_id),untrusted_last_seen_event_id:L(e.untrusted_last_seen_event_id,t.untrusted_last_seen_event_id)}},L=function(e,t){return Object(h.c)(e,t)?e:t},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=Object(I.p)(t),a=Object(I.o)(t);return r?A(A({},e),{},{filter_low_quality:a,include_quality:n}):e},k=function(e){return e[y.a].inbox},V=function(e){return k(e).cursors},B=function(e){return k(e).lastSeenEventIds},F=function(e){return k(e).poppedOutConversationId},G=function(e){return k(e).drawerVisibility},H=function(e){return k(e).drawerExperimentEnabled},q=function(e){return V(e)[R]},K=function(e){return V(e)[C]},Q=function(e){return function(e){return V(e)[M]}(e).fetchStatus},z=function(e){return Q(e)===p.a.LOADING},W=function(e){return Q(e)===p.a.LOADED},Z=(a={},s()(a,D.primary,(function(e){return e.trusted})),s()(a,D.secondary,(function(e,t){return t?!e.trusted&&!e.muted&&!e.low_quality:!e.trusted&&!e.muted})),s()(a,D.tertiary,(function(e,t){return t?!e.trusted&&(e.muted||e.low_quality):!e.trusted&&e.muted})),a),X=function(e,t){var n=Object(I.o)(e);return Object(O.a)(Object(b.C)(e)).filter((function(e){return Z[t](e.data,n)}))},Y=function(e,t){return X(e,t).map((function(e){return e.data})).sort(f.a).map((function(e){return e.conversation_id}))},J=function(e){var t=X(e,D.primary),n=X(e,D.secondary),r=t.concat(n),a=B(e).last_seen_event_id;return ne(e,r,a)},$=function(e){var t=X(e,D.secondary),n=B(e).untrusted_last_seen_event_id;return ne(e,t,n)},ee=function(e){var t=X(e,D.secondary),n=X(e,D.tertiary);return t.length+n.length},te=function(e){return X(e,D.tertiary).length},ne=function(e,t,n){return n?t.reduce((function(t,r){var a=r.data.conversation_id,i=Object(b.B)(e,a),o=Object(b.A)(e,a);return i&&Object(h.b)(i,n)&&!o?t+1:t}),0):0},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var a=r.api,i=U(e,n());return u.b(t,{params:i,request:a.DirectMessages.fetchUserInbox})({actionTypes:S,context:"FETCH_DM_INBOX",meta:{timelineType:M}},(function(e){if(e){var t=e.entities,n=t.entries,r=t.users,a=t.tweets,i=t.cards;return le(A(A({},e.result.inbox_initial_state),{},{entries:n,users:r,tweets:a,cards:i}))}}))}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),a=Q(r);return a!==p.a.LOADED&&a!==p.a.LOADING?t(re(e)):Promise.resolve()}},ie=function(e,t){return function(n,r,a){var i=a.api,o=V(r())[e],c=o.status,d=o.min_entry_id,l=e===C?R:e,f=A(A({},t),{},{max_id:d,timelineType:l});if(c!==v.c.HAS_MORE)return Promise.resolve();return u.b(n,{params:f,request:i.DirectMessages.fetchInboxHistory})({actionTypes:S,context:"FETCH_DM_INBOX_HISTORY",meta:{timelineType:e}},(function(t){if(t){var n=t.entities,r=n.entries,a=n.users,i=n.tweets,o=n.cards,c=t.result.inbox_timeline;return le({conversations:c.conversations,inbox_timelines:s()({},e,c),entries:r,users:a,tweets:i,cards:o})}}))}},oe=function(e){return function(t,n){var r=U(e,n(),"high");return t(ie(R,r))}},ce=function(e){return function(t,n){var r=U(e,n(),"low");return t(ie(C,r))}},se=function(e){return function(t,n){var r=U(e,n());return t(ie(j,r))}},ue=Object(y.c)("UPDATE_INBOX"),de=function(e){return{payload:{cursors:e.inbox_timelines,lastSeenEventIds:o()(e,["inbox_timelines"])},type:ue}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conversations,n=e.entries,r=e.users,a=e.tweets,i=e.cards,c=e.cursor,s=o()(e,["conversations","entries","users","tweets","cards","cursor"]),u=[Object(d.c)({cards:i,tweets:a,users:r}),!Object(E.a)(t)&&Object(b.c)(t),!Object(E.a)(n)&&Object(l.a)(n),!Object(E.a)(c)&&Object(m.f)(c),!Object(E.a)(s)&&de(s)];return u.filter((function(e){return e}))},fe=function(){return function(e){return e(ve({withTrusted:!0}))}},pe=function(){return function(e){return e(ve({withUntrusted:!0}))}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withTrusted,n=e.withUntrusted;return function(e,r,a){var i=a.api,o=r(),c=Object(b.C)(o),s=B(o),d=s.last_seen_event_id,l=s.trusted_last_seen_event_id,f=s.untrusted_last_seen_event_id,p=Object.values(c).reduce((function(e,t){var n=t.data,r=n.sort_event_id,a=n.trusted;return e.last_seen_event_id=L(e.last_seen_event_id,r),e.trusted_last_seen_event_id=a?L(e.trusted_last_seen_event_id,r):e.trusted_last_seen_event_id,e.untrusted_last_seen_event_id=a?e.untrusted_last_seen_event_id:L(e.untrusted_last_seen_event_id,r),e}),A({},s));return Object(h.b)(p.last_seen_event_id,d)||t&&Object(h.b)(p.trusted_last_seen_event_id,l)||n&&Object(h.b)(p.untrusted_last_seen_event_id,f)?(t||delete p.trusted_last_seen_event_id,n||delete p.untrusted_last_seen_event_id,u.c(e,{params:p,request:i.DirectMessages.updateLastSeenEventId})({actionTypes:T,context:"APP_DM_UPDATE_LAST_SEEN",meta:{lastSeenEventIds:p}})):Promise.resolve()}},_e=Object(y.c)("POP_OUT_CONVERSATION"),me=function(e){return function(t,n,r){return r.userPersistence.set("rweb.dmDrawerVisibility",{visibility:P.EXPANDED}),t({conversationId:e,type:_e})}},ye=Object(y.c)("SET_DRAWER_VISIBILITY"),be=function(e){return{visibility:e,type:ye}},Oe=function(e){return function(t,n,r){return r.userPersistence.set("rweb.dmDrawerVisibility",{visibility:e}),e===P.CLOSED&&t({type:_e}),t(be(e))}},Ee=function(){return function(e,t,n){return n.userPersistence.get("rweb.dmDrawerVisibility").then((function(t){t&&e(be(t.visibility))}))}},he=Object(y.c)("SET_DRAWER_EXPERIMENT_ENABLED"),Ie=function(e){return{enabled:e,type:he}},ge=function(e){return function(t,n,r){return r.userPersistence.set("rweb.dmQuickAccessEnabled",{enabled:e}),t(Ie(e))}},Ae=function(){return function(e,t,n){return n.userPersistence.get("rweb.dmQuickAccessEnabled").then((function(t){t&&e(Ie(t.enabled))}))}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.ComposeMedia.630912d5.js.map