(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{"3A2y":function(e,t,r){"use strict";r("KOtZ"),r("+KXO");var n=r("zrOZ");t.a=function(e,t){var r=Object(n.a)(Array.isArray(t)?t:[t]);return Object.keys(e).reduce((function(t,n){return r.has(n)||(t[n]=e[n]),t}),{})}},"72nz":function(e,t,r){"use strict";r.r(t),r.d(t,"SearchBoxContainer",(function(){return Be}));r("1t7P"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("KqXw"),r("DZ+c"),r("WNMA"),r("MvUL"),r("hBvt"),r("+oxZ");var n=r("97Jx"),a=r.n(n),c=r("VrFO"),o=r.n(c),s=r("Y9Ll"),i=r.n(s),u=r("1Pcy"),l=r.n(u),d=r("5Yy7"),f=r.n(d),h=r("N+ot"),p=r.n(h),m=r("AuHH"),y=r.n(m),v=r("KEM+"),S=r.n(v),b=r("ERkP"),_=r("E2gn"),O=r("wtjx"),g=r("rxPX"),I=Object(g.a)().propsFromActions((function(){return{addQuery:O.a}})).withAnalytics({component:"search_box"}),R=r("3XMw"),E=r.n(R),w=r("8jkQ"),D=r("u3ZE"),j=r("rRIm"),C=(r("hBpG"),r("vrRf"),r("z84I"),r("M+/F"),r("lnti")),P=r("0KEI"),x=r("hqKg"),k=r("kGix"),A=r("3IPs"),T=r("G6rE"),N=r("k49u"),F=r("J4ZH"),U=r("v4XE");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=function(e){return Object(N.c)(e,N.a.GenericUserNotFound)||Object(N.c)(e,N.a.OtherUserSuspended)||Object(N.c)(e,N.a.AddressBookLookupNotFound)},q=Object(g.a)().propsFromState((function(){var e=Object(x.createSelector)(O.g,T.e.selectFetchStatuses,(function(e,t){var r=Object(C.a)(e.map((function(e){return e.user&&e.user.id})));return Object(F.a)(r.map((function(e){return{id:e,fetchStatus:t[e]}})),(function(e){return e.fetchStatus}))})),t=Object(x.createSelector)(e,(function(e){return(e[k.a.FAILED]||[]).map((function(e){return e.id}))})),r=Object(x.createSelector)(e,T.e.selectErrors,(function(e,t){return(e[k.a.FAILED]||[]).filter((function(e){var r=e.id;return H(t[r]||{})})).map((function(e){return e.id}))})),n=Object(x.createSelector)(e,T.e.selectErrors,(function(e,t){var r=(e[k.a.FAILED]||[]).filter((function(e){var r=e.id;return!H(t[r]||{})}));return(e[k.a.LOADING]||[]).length>0?k.a.LOADING:(e[k.a.LOADED]||[]).length>0?k.a.LOADED:r.length>0?k.a.FAILED:k.a.NONE})),a=Object(x.createSelector)(O.g,(function(e){return e.map((function(e){return M(M({},e),{},{category:A.b.RecentSearch})}))})),c=Object(x.createSelector)(U.d,(function(e){return e.map((function(e){return{keyword:{query:e.query},savedSearchId:e.id_str,category:A.b.SavedSearch}}))}));return{isRecentSearchDataLoaded:O.e,recentSearches:a,usersFetchStatus:n,invalidRecentSearchUserIds:r,failedRecentSearchUserIds:t,savedSearches:c}})).adjustStateProps((function(e){var t=e.isRecentSearchDataLoaded,r=e.recentSearches,n=e.usersFetchStatus,a=e.invalidRecentSearchUserIds,c=e.failedRecentSearchUserIds,o=e.savedSearches,s=!r.filter((function(e){var t=e.user;return t&&a.indexOf(t.id)<0})).length,i=n!==k.a.LOADING&&t&&s?k.a.LOADED:n;return{failedRecentSearchUserIds:c,invalidRecentSearchUserIds:a,recentSearches:r,fetchStatus:i,savedSearches:o}})).propsFromActions((function(){return{clearAll:O.b,createLocalApiErrorHandler:Object(P.d)("SEARCH_ONE_CLICK"),deleteSavedSearch:U.a,fetchRecentSearchesIfNeeded:O.c,fetchSavedSearchesIfNeeded:U.b,fetchUsersIfNeeded:T.e.fetchManyIfNeeded,removeQuery:O.d}})).withAnalytics({element:"typeahead"}),K=r("sYRn"),V=r("v//M"),W=r("7nmT"),B=r.n(W),G=r("Rp9C"),z=(r("2G9S"),r("ho0z"),function(e,t){return T.e.select(e,t.id)}),Q=Object(g.a)().propsFromState((function(){return{user:z}})),Z=r("hOZg"),X=r("/yvb"),Y=r("IMA+"),J=r("rHpw");function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var ee=b.createElement(Z.a,null),te=E.a.e68b09b4,re=Q(function(e){f()(r,e);var t=$(r);function r(){return o()(this,r),t.apply(this,arguments)}return i()(r,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.onRef;e&&e(this)}},{key:"componentWillUnmount",value:function(){var e=this.props.onRef;e&&e(void 0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.onRef;e.onRef&&e.onRef!==t&&e.onRef(void 0),t&&t!==e.onRef&&t(this)}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.onRemove;if(!t)return null;var n=b.createElement(X.a,{accessibilityLabel:te,icon:ee,onPress:r,size:"small",type:"text"});return b.createElement(Y.a,{avatarSize:"xLarge",avatarUri:t.profile_image_url_https,decoration:n,displayMode:"UserCompact",isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,style:ne.cell,userId:t.id_str,withLink:!1})}},{key:"searchItemData",get:function(){return this.props.user?{category:A.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:A.a.User}:null}}]),r}(b.Component)),ne=J.a.create((function(e){return{cell:{paddingHorizontal:0,paddingVertical:0}}})),ae=r("I7xG"),ce=r("j7Bv"),oe=r("5mJL"),se=r("t62R"),ie=r("hiGS"),ue=r("VwDm");function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var de=b.createElement(Z.a,null),fe=b.createElement(ie.a,null),he=function(e){f()(r,e);var t=le(r);function r(){var e;o()(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),S()(l()(e),"_getButtonType",Object(ae.a)(l()(e),(function(e){return e.category}),(function(e){return e===A.b.SavedSearch?"destructiveText":"text"}))),S()(l()(e),"_getRemoveIcon",Object(ae.a)(l()(e),(function(e){return e.category}),(function(e){return e===A.b.SavedSearch?fe:de}))),e}return i()(r,[{key:"render",value:function(){var e=this.props,t=e.query,r=e.onRemove,n=b.createElement(ce.a,{Icon:ue.a,color:"neutral",size:"xLarge",style:pe.searchIcon});return b.createElement(oe.a,{avatarCell:n,avatarSize:"xLarge",cellStyle:pe.bodyColumn},b.createElement(se.c,{numberOfLines:1,withHashflags:!0},t),b.createElement(X.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:r,size:"small",type:this._getButtonType()}))}},{key:"searchItemData",get:function(){var e=this.props,t=e.category;return{category:t,query:e.query,recentSearchType:t===A.b.RecentSearch?A.a.Keyword:void 0}}}]),r}(b.Component),pe=J.a.create((function(e){return{bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.xSmall}}})),me=he,ye=r("htQn");function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var Se=function(e){f()(r,e);var t=ve(r);function r(){var e;o()(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),S()(l()(e),"_renderSearchItem",(function(){var t=e.props.item;return t.keyword?b.createElement(me,{category:t.category,onRemove:e._handleOnRemove,query:t.keyword.query,ref:e._handleItemRef}):t.user?b.createElement(re,{id:t.user.id||"",onRef:e._handleItemRef,onRemove:e._handleOnRemove}):null})),S()(l()(e),"_handleItemRef",(function(t){e._itemRef=t})),S()(l()(e),"_handleOnRemove",(function(t){var r=e.props;(0,r.onRemoveQuery)(r.item,r.index),t.stopPropagation()})),S()(l()(e),"_handleOnClick",(function(){var t=e.props,r=t.onItemClick,n=t.index;e.searchItemData&&r(e.searchItemData,n)})),e}return i()(r,[{key:"render",value:function(){var e=this.props.domId;return b.createElement(_.a,{viewType:"search_item"},b.createElement(ye.a,{accessibilityRole:"option",accessibilityState:{selected:!!e},accessible:!0,nativeID:e,onClick:this._handleOnClick,style:[be.root,e&&be.focused]},this._renderSearchItem()))}},{key:"searchItemData",get:function(){return this._itemRef&&this._itemRef.searchItemData}}]),r}(b.Component),be=J.a.create((function(e){return{root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.faintGray}}})),_e=Se,Oe=r("MWbm"),ge=r("eb3s"),Ie=r("MXDK");function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var Ee=E.a.ee295fbe,we={headline:E.a.f45c425f,text:E.a.caae4dd9,confirmButtonLabel:E.a.dbd5d40f},De=E.a.a8d68f61,je=E.a.c6530778,Ce=E.a.e047b8fa,Pe=function(e){f()(r,e);var t=Re(r);function r(e){var n;return o()(this,r),n=t.call(this,e),S()(l()(n),"_getRecentSearchItems",(function(){var e=n.props,t=e.failedRecentSearchUserIds,r=e.recentSearches.filter((function(e){var r=e.user;return!r||t.indexOf(r.id)<0}));return r.length>15?r.slice(0,15):r})),S()(l()(n),"_render",(function(){var e=n.props,t=e.domId,r=e.savedSearches,a=0===n._getNumOfSearchItems(),c=n._getRecentSearchItems();return a?b.createElement(Oe.a,{style:[xe.emptyState]},b.createElement(se.c,{align:"center",color:"deepGray"},Ee)):b.createElement(Oe.a,{accessibilityRole:"listbox",nativeID:t},c.length>0?b.createElement(b.Fragment,null,b.createElement(Oe.a,{importantForAccessibility:"no-hide-descendants",style:xe.header},b.createElement(se.c,{numberOfLines:1,size:"large",weight:"bold"},De),b.createElement(X.a,{onPress:n._handleClearAllClick,size:"small",type:"text"},Ce)),c.map((function(e,t){return n._renderRecentSearchItem(e,t)}))):null,r.length>0?b.createElement(b.Fragment,null,b.createElement(Oe.a,{importantForAccessibility:"no-hide-descendants",style:xe.header},b.createElement(se.c,{numberOfLines:1,size:"large",weight:"bold"},je)),n._renderSavedSearches()):null)})),S()(l()(n),"_renderRecentSearchItem",(function(e,t){var r=n.props.ariaDescendantId,a=n.state.focusIndex===t,c=e.keyword?"keyword_".concat(e.keyword.query):e.user?"user_".concat(e.user.id):"".concat(t);return b.createElement(_e,{domId:a?r:void 0,index:t,item:e,key:c,onItemClick:n._handleOnItemClick,onRemoveQuery:n._handleRemoveQuery,ref:a?n._setFocusedItemRef:void 0})})),S()(l()(n),"_renderSavedSearches",(function(){var e=n.props,t=e.ariaDescendantId,r=e.savedSearches,a=n.state.focusIndex,c=n._getRecentSearchItems();return b.createElement(Oe.a,null,r.map((function(e,r){var o=a===r+c.length;return b.createElement(_e,{domId:o?t:void 0,index:r,item:e,key:e.savedSearchId,onItemClick:n._handleOnItemClick,onRemoveQuery:n._handleRemoveQuery,ref:o?n._setFocusedItemRef:void 0})})))})),S()(l()(n),"_getNumOfSearchItems",(function(){var e=n.props.savedSearches,t=n._getRecentSearchItems();return e.length+t.length})),S()(l()(n),"_handleUsersRetry",(function(){n._fetchUsersIfNeeded()})),S()(l()(n),"_fetchUsersIfNeeded",(function(){var e=n.props,t=e.fetchUsersIfNeeded,r=e.createLocalApiErrorHandler,a=e.recentSearches,c=e.invalidRecentSearchUserIds;t(a.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id})).filter((function(e){return c.indexOf(e)<0}))).catch(r({}))})),S()(l()(n),"_handleRemoveQuery",(function(e,t){var r=n.props,a=r.analytics,c=r.removeQuery;switch(e.category){case A.b.RecentSearch:var o={keyword:e.keyword,user:e.user};c(o),n._resetFocus();var s=G.a.forRecentSearchResult(o,t),i=e.user?"clear_user":"clear_topic";s&&a.scribe({action:i,data:{items:[s]}});break;case A.b.SavedSearch:n.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}})),S()(l()(n),"_handleClearAllClick",(function(){n.setState({shouldShowClearAllConfirmationSheet:!0})})),S()(l()(n),"_handleOnClearAllConfirm",(function(){var e=n.props,t=e.analytics;(0,e.clearAll)(),t.scribeAction("clear_all"),n.setState({shouldShowClearAllConfirmationSheet:!1})})),S()(l()(n),"_handleOnClearAllCancel",(function(){n.setState({shouldShowClearAllConfirmationSheet:!1})})),S()(l()(n),"_handleOnDeleteSavedSearchConfirm",(function(){var e=n.props,t=e.analytics,r=e.deleteSavedSearch,a=e.savedSearches,c=n.state.savedSearchIdToDelete,o=a.find((function(e){return e.savedSearchId===c}));if(c){r(c);var s=o&&G.a.forSavedSearchResult(o.keyword.query);s&&t.scribe({element:"saved_search",action:"delete",data:{items:[s]}})}n.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),S()(l()(n),"_handleOnDeleteSavedSearchCancel",(function(){n.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),S()(l()(n),"_handleOnItemClick",(function(e,t){var r=n.props,a=r.onDismiss;(0,r.onItemClick)(e,t),n._scribeClick(e,t),a&&a()})),S()(l()(n),"_scribeRecentSearchImpression",(function(){var e=n.props,t=e.analytics,r=e.recentSearches;if(r&&r.length){var a=Object(C.a)(r.map((function(e,t){return G.a.forRecentSearchResult(e,t)})));t.scribe({action:"impression",data:{items:a}})}})),S()(l()(n),"_scribeSavedSearchImpression",(function(){var e=n.props,t=e.analytics,r=e.savedSearches;if(r&&r.length){var a=Object(C.a)(r.map((function(e,t){return G.a.forSavedSearchResult(e.keyword.query)})));t.scribe({element:"saved_search",action:"impression",data:{items:a}})}})),S()(l()(n),"_scribeClick",(function(e,t){var r=n.props.analytics;switch(e.category){case A.b.SavedSearch:var a=G.a.forSavedSearchResult(e.query);r.scribe({element:"saved_search",action:"search",data:{targets:[a]}});break;case A.b.RecentSearch:var c;e.recentSearchType&&(c=e.recentSearchType===A.a.User?{user:{type:A.a.User,id:e.query}}:{keyword:{type:A.a.Keyword,query:e.query}});var o=c&&G.a.forRecentSearchResult(c,t);o&&r.scribe({action:"click",data:{targets:[o]}})}})),S()(l()(n),"_setFocusedItemRef",(function(e){n._focusedItemRef=e,e&&n._shouldScrollToFocusedItem&&(Object(Ie.c)(n._getScrollParent(),n._getFocusedItem()),n._shouldScrollToFocusedItem=!1)})),S()(l()(n),"hasFocusedItem",(function(){return n._getNumOfSearchItems()>0})),S()(l()(n),"selectFocusedItem",(function(){if(n.hasFocusedItem()){var e=n._focusedItemRef&&n._focusedItemRef.searchItemData;e&&n._handleOnItemClick(e,n.state.focusIndex)}})),S()(l()(n),"_setFocusIndex",(function(e,t){var r=n.props.onItemFocusChanged;n._shouldScrollToFocusedItem=t,n.setState({focusIndex:e}),r&&r()})),S()(l()(n),"_resetFocus",(function(){n._setFocusIndex(-1)})),S()(l()(n),"focusNext",(function(){var e=n.state.focusIndex,t=n._getNumOfSearchItems();if(0!==t){var r=e+1>=t?0:e+1;n._setFocusIndex(r,!0)}})),S()(l()(n),"focusPrevious",(function(){var e=n.state.focusIndex,t=n._getNumOfSearchItems();if(0!==t){var r=e-1<0?t-1:e-1;n._setFocusIndex(r,!0)}})),n.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1},n}return i()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.createLocalApiErrorHandler,r=e.fetchRecentSearchesIfNeeded,n=e.fetchSavedSearchesIfNeeded,a=e.recentSearches,c=e.savedSearches,o=e.onRef;o&&o(this),r(),this._fetchUsersIfNeeded(),n().catch(t({})),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(a&&a.length||c&&c.length)&&this._resetFocus()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.recentSearches,n=t.savedSearches,a=t.onRef;e.recentSearches!==r&&(this._fetchUsersIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==n&&(this._resetFocus(),this._scribeSavedSearchImpression()),e.onRef&&e.onRef!==a&&e.onRef(void 0),a&&a!==e.onRef&&a(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(void 0)}},{key:"render",value:function(){var e=this.props,t=e.style,r=e.fetchStatus,n=this.state,a=n.shouldShowClearAllConfirmationSheet,c=n.shouldShowDeleteSavedSearchConfirmation;return b.createElement(Oe.a,{style:t},b.createElement(V.a,{fetchStatus:r,onRequestRetry:this._handleUsersRetry,render:this._render}),a?b.createElement(ge.a,{confirmButtonLabel:we.confirmButtonLabel,confirmButtonType:"destructive",headline:we.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,text:we.text}):null,c?b.createElement(K.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}},{key:"_getScrollParent",value:function(){if(!this._scrollParent){var e=Object(Ie.a)(B.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}},{key:"_getFocusedItem",value:function(){var e=this._focusedItemRef&&B.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}]),r}(b.Component),xe=J.a.create((function(e){return{emptyState:{padding:e.spaces.xSmall,paddingTop:e.spaces.medium},header:{alignItems:"center",borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}}})),ke=q(Pe),Ae="SearchBox_Search_Input",Te=r("TnY3"),Ne=r("GZwR"),Fe=r("4e/K");function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){S()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var He=E.a.ib2e46ee,qe=E.a.hbc99b02,Ke=/^(\w+)$/,Ve=[Ne.a.Events,Ne.a.Users,Ne.a.Topics],We=function(e){return"@"===e[0]?e.substring(1):e},Be=function(e){f()(r,e);var t=Me(r);function r(e,n){var c;return o()(this,r),c=t.call(this,e,n),S()(l()(c),"_renderSearchBoxEmptyState",(function(e){return b.createElement(ke,a()({},e,{onItemClick:c._handleSearchItemClick}))})),S()(l()(c),"_handleSearchItemClick",(function(e){var t=e.link,r=e.query,n=e.recentSearchType,a=e.category,o=c.props.addQuery;a===A.b.SavedSearch?c._submitQuery({query:r,shouldAddToRecentSearch:!1,src:D.a.SavedSearchClick}):n===A.a.Keyword?c._submitQuery({query:r,shouldAddToRecentSearch:!0,src:D.a.RecentSearchClick}):t&&(c._routeTransition({pathname:"/".concat(t)}),o({user:{id:r,type:A.a.User}}))})),S()(l()(c),"_handleSearchShortcut",(function(e){var t=c._inputRef;t&&(e&&t.setQuery(e),t.focus())})),S()(l()(c),"_getUserExactMatch",(function(e){var t=e.query,r=(e.hasResults,e.isLoaded,We(t));if(r.match(Ke))return{id:"".concat(t,"_no_result_user"),type:Ne.b.NoResult,data:{text:qe({screenName:r}),type:"user"}}})),S()(l()(c),"_handleOnDismiss",(function(){var e=c.props.history,t=e.location,r=t.state||{};if(r.searchFocused){var n=Le(Le({},t),{},{state:Le(Le({},r),{},{lockScroll:!1,searchFocused:!1})});e.replace(n)}})),S()(l()(c),"_handleOnFocus",(function(){var e=c.props,t=e.analytics,r=e.history,n=r.location,a=n.state||{};if(!a.searchFocused){var o=Le(Le({},n),{},{state:Le(Le({},a),{},{searchFocused:!0,lockScroll:!0})});t.scribe({action:"focus_field"}),r.push(o)}})),S()(l()(c),"_handleChange",(function(e){c.setState({query:e,querySubmitted:!1})})),S()(l()(c),"_handleTypeaheadSubmit",(function(){var e=c.state.query;/^\s*$/.test(e)||c._submitQuery({query:e,shouldAddToRecentSearch:!0})})),S()(l()(c),"_handleItemClick",(function(e,t){var r=c.props.addQuery,n=c.state.query;switch(e.type){case Ne.b.User:if(e.data.id_str)r({user:{id:e.data.id_str,type:A.a.User}});c._routeTransition({pathname:"/".concat(e.data.screen_name)});break;case Ne.b.Topic:case Ne.b.Hashtag:c._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:D.a.TypeaheadClick});break;case Ne.b.Event:e.data&&e.data.url?c._routeTransition({pathname:w.b.parseInternalUrl(e.data.url)}):c._submitQuery({query:e.data.topic,src:D.a.TypeaheadClick});break;case Ne.b.NoResult:var a=e.data.type;"user"===a?c._routeTransition({pathname:"/".concat(We(n))}):"topic"===a&&c._submitQuery({query:n,shouldAddToRecentSearch:!0,src:D.a.TypeaheadClick})}})),S()(l()(c),"_routeTransition",(function(e){var t=e.pathname,r=e.query,n=e.params,a=e.src,o=c.props,s=o.history,i=o.location,u=Le(Le({},i),{},{pathname:t,search:"",query:n||(r?{q:r,src:a}:{}),state:Le(Le({},i.state),{},{searchFocused:!1,lockScroll:!1})});s.replace(u)})),S()(l()(c),"_submitQuery",(function(e){var t=e.query,r=e.shouldAddToRecentSearch,n=void 0!==r&&r,a=e.src,o=void 0===a?D.a.Typed:a,s=c.props,i=s.addQuery,u=s.mode,l=s.onSubmit,d=s.searchFilters,f=s.searchRoute;(l&&l(t,o),n)&&i({keyword:{query:t,type:A.a.Keyword}});var h=Object(A.g)({query:t,querySrc:o,mode:u,searchFilters:d});c._routeTransition({pathname:f,params:h,src:o}),c.setState({querySubmitted:!0})})),S()(l()(c),"_setInputRef",(function(e){c._inputRef=e})),c.state={query:e.initialValue,querySubmitted:!0},c}return i()(r,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.location,r=e.shouldHandleSearchShortcut,n=(t.state||{}).searchFocused;this._autoFocus=!!n,r&&(this._unregisterSearchShortcutHandler=Object(j.b)(this._handleSearchShortcut))}},{key:"componentWillUnmount",value:function(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({query:e.initialValue,querySubmitted:!0})}},{key:"render",value:function(){var e=this.props,t=e.location,r=e.placeholder,n=this.state.query,a=(t.state||{}).searchPrefill,c=this.props.initialValue||a;return b.createElement(_.a,{viewType:"search_field"},b.createElement(Oe.a,{style:Ge.root},b.createElement(Fe.default,{filter:Ve,getTopicExactMatch:n?Ne.e:void 0,getUserExactMatch:n?this._getUserExactMatch:void 0,initialValue:c,inputStyle:Ge.input,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,placeholder:r,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:!!this._autoFocus,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:Ne.d.SearchBox,testID:Ae,withFixedPositioning:!0,withFocusStyling:!0})))}}]),r}(b.Component);S()(Be,"defaultProps",{initialValue:"",placeholder:He,searchRoute:"/search"});var Ge=J.a.create((function(e){return{root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}}}));t.default=Object(Te.a)(I(Be))},V2l4:function(e,t,r){"use strict";r.r(t),r.d(t,"UserPicker",(function(){return x}));r("2G9S"),r("vrRf"),r("z84I"),r("ho0z"),r("7x/C"),r("OZaJ"),r("DZ+c"),r("uFXj");var n=r("VrFO"),a=r.n(n),c=r("Y9Ll"),o=r.n(c),s=r("1Pcy"),i=r.n(s),u=r("5Yy7"),l=r.n(u),d=r("N+ot"),f=r.n(d),h=r("AuHH"),p=r.n(h),m=r("KEM+"),y=r.n(m),v=r("ERkP"),S=r("ZcYN"),b=r("3XMw"),_=r.n(b),O="searchPeople",g=r("4e/K"),I=r("MWbm"),R=r("aV/s"),E=r("rHpw"),w=r("GZwR");function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var j=[w.a.Users],C=_.a.fc9dd578,P=_.a.gdb7bc24,x=function(e){l()(r,e);var t=D(r);function r(e,n){var c;return a()(this,r),c=t.call(this,e,n),y()(i()(c),"_renderSelectedUsersList",(function(){var e=c.props.selectedUsers;return v.createElement(I.a,{style:k.selectedUsersList},e.map(c._renderSelectedUserPill))})),y()(i()(c),"_renderSelectedUserPill",(function(e){var t,r=c.props.withCompactPills,n=c.props.onRemove.bind(i()(c),e);return e.type===w.b.User&&(t=e.data.profile_image_url_https),v.createElement(R.a,{accessibilityLabel:P({name:e.data.name}),compact:r,key:e.id,mode:"remove",onClick:n,style:k.selectionPill,text:e.data.name,userAvatarURI:t})})),y()(i()(c),"_getItemIsDisabled",(function(e){var t=c.props,r=t.getItemIsDisabled;return t.preselectedUsers.indexOf(e.id)>=0||!(!r||!r(e))})),y()(i()(c),"_getItemDisabledMessage",(function(e){var t=c.props,r=t.getItemDisabledMessage;return t.preselectedUsers.indexOf(e.id)>=0?null:r&&r(e)})),y()(i()(c),"_handleQueryChange",(function(e){var t=c.props.onQueryChange;c.setState({query:e}),t&&t(e)})),y()(i()(c),"_handleOnSelect",(function(e){var t=c.props.onSelect;t&&t(e)})),c.state={query:""},c}return o()(r,[{key:"render",value:function(){var e=this.props,t=e.injections,r=e.selectedUsers,n=e.shouldAutoFocus,a=e.preselectedUsers,c=e.source,o=r.map((function(e){return e.id})).concat(a);return v.createElement(I.a,{style:k.root},v.createElement(g.default,{alwaysOpen:!0,disableClearButton:!0,filter:j,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:t,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:C,renderInSearchField:r.length?this._renderSelectedUsersList:null,renderUserDecoration:S.a,selectedItems:o,shouldAutoFocus:n,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:c,testID:O,withSectionDivider:!1}))}}]),r}(v.Component);y()(x,"defaultProps",{preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1});var k=E.a.create((function(e){return{root:{flex:1},selectionPill:{margin:e.spaces.xxSmall,maxWidth:"calc(100% - ".concat(e.spaces.small,")")},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.xxSmall}}}));t.default=x},aWyx:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return o}));r("yH/f");var n=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),a=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),c=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",CONVO_METADATA_UPDATE:"convo_metadata_update",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),o=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},bJYH:function(e,t,r){"use strict";r.r(t),r.d(t,"GenericTypeaheadComposeWrapper",(function(){return M}));r("1t7P"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("DZ+c"),r("uFXj"),r("+oxZ");var n=r("VrFO"),a=r.n(n),c=r("Y9Ll"),o=r.n(c),s=r("1Pcy"),i=r.n(s),u=r("5Yy7"),l=r.n(u),d=r("N+ot"),f=r.n(d),h=r("AuHH"),p=r.n(h),m=r("KEM+"),y=r.n(m),v=r("ERkP"),S=r("oEoC"),b=r("oQhu"),_=r("7nmT"),O=r.n(_),g=r("7JQg"),I=r("WPfJ"),R=r("OEYw"),E=r("MWbm"),w=r("Irs7"),D=r("0FVZ"),j=r("xoZN"),C=r("7N4s"),P=r("rHpw"),x=r("GZwR");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var N={component:"compose"},F=[x.a.Users],U=[x.a.Topics],L=0,M=function(e){l()(r,e);var t=T(r);function r(e,n){var c;return a()(this,r),c=t.call(this,e,n),y()(i()(c),"_typeaheadActive",!1),y()(i()(c),"_renderTypeaheadDropdown",(function(e){var t=c.props,r=t.contextText,n=t.isInline,a=t.onSelectItem,o=t.source,s=c.context.isModal,i=e.resultType===x.a.Topics?"hashtag":void 0,u=v.createElement(R.a,{ariaDescendantId:c.state.ariaDescendantId,contextText:r,domId:c._dropdownDomId,filter:c._getFilter(e.resultType),maxTopics:8,onItemClick:a,onItemFocusChanged:c._handleItemFocusChanged,onRef:c._handleTypeaheadRef,query:e.word,source:o,style:c._calcStyle(),topicType:i,withItemAlwaysSelected:!0});return s||n?v.createElement(D.a.HalfSheet,null,v.createElement(g.b,{namespace:N},v.createElement(v.Fragment,null,v.createElement(E.a,{onClick:c._handleDismiss,style:H.mask}),u))):v.createElement(v.Fragment,null,v.createElement(E.a,{onClick:c._handleDismiss,style:H.mask}),u)})),y()(i()(c),"render",(function(){var e=c.props,t=e.children,r=e.query,n=v.cloneElement(t,{ariaAutocomplete:"list",ariaControls:c._dropdownDomId,ariaActiveDescendant:c.state.ariaDescendantId,ref:function(e){c._textInputNode=O.a.findDOMNode(e),c._textInputRef=e;var r=t.ref;r&&r(e)}});return v.createElement(E.a,{style:H.inputContainer},v.createElement(j.a,{onKeyDown:c._handleKeyDown},n,c._textInputNode&&r?c._renderTypeaheadDropdown(r):null))})),y()(i()(c),"_getFilter",(function(e){return"users"===e?F:U})),y()(i()(c),"_calcStyle",(function(){var e=c.context.isModal,t=c.props.isInline,r=c._textInputNode,n=window.innerHeight,a=window.innerWidth,o=c._textInputRef&&c._textInputRef.getTextInputHeight()||20;if(r instanceof window.HTMLElement){var s=r.getBoundingClientRect();return e||t?[c._getDropdownPositioningStyle(n,a,s.top,s.top+o,s.left),H.dropdownStyle]:[c._getInlinePositioningStyle(o),H.inlineStyle]}return[c._getDropdownPositioningStyle(o,a,0,0,0),H.dropdownStyle]})),y()(i()(c),"_handleKeyDown",(function(e){var t=c.state.selectedItem,r=c.props,n=r.onSelectItem,a=r.query,o=e.key;S.e(e)&&a&&("ArrowDown"===o?(c._typeaheadRef&&c._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===o?(c._typeaheadRef&&c._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===o||"Tab"===o?t&&(n(t),e.preventDefault()):"Escape"===o&&(c._handleDismiss(),e.preventDefault()))})),y()(i()(c),"_handleItemFocusChanged",(function(e){return c.setState({ariaDescendantId:S.b(),selectedItem:e})})),y()(i()(c),"_handleTypeaheadRef",(function(e){c._typeaheadRef=e})),y()(i()(c),"_handleDismiss",(function(){c._textInputRef&&c._textInputRef.focus(),c.props.onDismiss()})),y()(i()(c),"_getDropdownHeight",Object(b.a)((function(e,t){var r=50*e/100;return r>t?t:r}))),y()(i()(c),"_getDropdownPositioningStyle",Object(b.a)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e-n,s=r,i=s>o,u=o/e<.5,l=10,d=t-a-l,f=Math.min(d,300);return u&&i?{bottom:"".concat(e-r,"px"),left:"".concat(a,"px"),maxHeight:"".concat(c._getDropdownHeight(e,s-l),"px"),maxWidth:"".concat(d,"px"),minWidth:"".concat(f,"px")}:{top:"".concat(n,"px"),left:"".concat(a,"px"),maxHeight:"".concat(c._getDropdownHeight(e,o-l),"px"),maxWidth:"".concat(d,"px"),minWidth:"".concat(f,"px")}}))),y()(i()(c),"_getInlinePositioningStyle",Object(b.a)((function(e){return{position:"absolute",top:"".concat(e||0,"px"),overflowX:"hidden",overflowY:"auto"}}))),c.state={ariaDescendantId:S.b()},c._dropdownDomId="typeaheadDropdownWrapped-".concat(L),L+=1,c}return o()(r,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.onTypeaheadStateChange,r=e.query,n=!(!this._textInputNode||!r);n!==this._typeaheadActive&&(this._typeaheadActive=n,t&&t(n))}},{key:"resetSelectedItem",value:function(){this.setState({selectedItem:void 0})}}]),r}(v.Component);y()(M,"contextType",C.a),y()(M,"defaultProps",{source:x.d.Compose});var H=P.a.create((function(e){return{dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,position:"fixed",overflowX:"hidden",overflowY:"auto"},mask:A(A({},P.a.absoluteFillObject),{},{position:"fixed"}),inlineStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"static",width:"100%",zIndex:I.g}}}));t.default=Object(w.a)(M,N)},hiGS:function(e,t,r){"use strict";r("1t7P"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("+oxZ");var n=r("KEM+"),a=r.n(n),c=r("ERkP"),o=r("Lsrn"),s=r("k/Ka");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)("svg",u(u({},e),{},{style:[o.a.root,e.style],viewBox:"0 0 24 24"}),c.createElement("g",null,c.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),c.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})))};l.metadata={width:24,height:24},t.a=l},kIAd:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var n=r("0vv5"),a=500,c={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:r.n(n).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},oEoC:function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"e",(function(){return h})),r.d(t,"a",(function(){return p}));r("1t7P"),r("2G9S"),r("LW0h"),r("hBpG"),r("jwue"),r("vrRf"),r("z84I"),r("M+/F"),r("daRM"),r("FtHn"),r("+KXO"),r("KqXw"),r("WNMA"),r("LJOr"),r("tVqn"),r("+oxZ");var n=r("RhWx"),a=r.n(n),c=r("KEM+"),o=r.n(c),s=r("kIAd");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){var r,n=s.b.scoper.find((function(n){if(-1!==n.srcInputs.indexOf(t))return r=e.match(n.regexp)})),a="";return r&&(a=r&&(1===r.length?r[0]:r[1])),n?u(u({},n.scope),{},{src:t,q:a}):null}function d(e,t){var r=t.slice(0,e),n=t.slice(e,t.length),a=r.search(s.b.WordEnd),c=a>=0?r.slice(a):"",o=n.search(s.b.WordBoundary),i=c+n.slice(0,o);return i.trim()?{start:a,end:e+o,word:i}:{start:-1,end:-1,word:""}}function f(){return"typeaheadFocus-".concat(Math.random())}function h(e){var t=e.altKey,r=e.ctrlKey,n=e.metaKey;return!(t||r||n)}function p(e,t){var r=[];e.forEach((function(e){var n=t.find((function(t){return t.id===e.id}));n&&n.data&&n.data.result_context?r.push(n):r.push(e)}));var n=r.map((function(e){return e.id})),c=t.filter((function(e){return n.indexOf(e.id)<0}));return[].concat(r,a()(c))}},rRIm:function(e,t,r){"use strict";r.d(t,"b",(function(){return q}));r("1t7P"),r("2G9S"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("KqXw"),r("DZ+c"),r("LJOr"),r("+oxZ");var n=r("VrFO"),a=r.n(n),c=r("Y9Ll"),o=r.n(c),s=r("1Pcy"),i=r.n(s),u=r("5Yy7"),l=r.n(u),d=r("N+ot"),f=r.n(d),h=r("AuHH"),p=r.n(h),m=r("KEM+"),y=r.n(m),v=r("ERkP"),S=r("sTyV"),b=r("rxPX"),_=r("G6rE"),O=Object(b.a)().propsFromState((function(){return{loggedInUser:_.e.selectLoggedInUser}})).adjustStateProps((function(e){var t=e.loggedInUser;return{loggedInUserScreenName:t?t.screen_name:void 0}})),g=r("3XMw"),I=r.n(g),R=r("V/Zl"),E=r("OrGc"),w=r("QK5w"),D=r("aITJ"),j=r("MWbm"),C=r("TnY3"),P=r("rHpw"),x=r("t62R"),k=r("uScj"),A=r("BcsE");r("aWzz");function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var U=I.a.b47e760d,L=I.a.fd2c7b43,M=new k.a,H=function(e){if(e.target instanceof HTMLInputElement){var t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},q=function(e){return M.subscribe(e).unsubscribe},K=O(function(e){l()(r,e);var t=F(r);function r(){var e;a()(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c)),y()(i()(e),"_bindKeyboardShortcuts",(function(){var t,r,n,a=e.props,c=a.history,o=a.loggedInUserScreenName,s=function(e){return function(t){t.preventDefault(),M._listeners.length?M.notify(e):c.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:e}})}},i=(t={},y()(t,E.d.search,s()),y()(t,E.d.goToUser,s("@")),y()(t,E.d.openKeyboardShortcuts,(function(){return c.push("/i/keyboard_shortcuts")})),y()(t,E.d.goExplore,(function(){return c.push("/explore")})),y()(t,E.d.goSettings,(function(){return c.push("/settings")})),t),u=o?(r={},y()(r,E.d.goProfile,(function(){return c.push("/".concat(o))})),y()(r,E.d.goLikes,(function(){return c.push("/".concat(o,"/likes"))})),y()(r,E.d.goLists,(function(){return c.push("/".concat(o,"/lists"))})),r):{},l=N(N(N({},i),u),{},(n={},y()(n,E.d.goHome,(function(){return c.push("/home")})),y()(n,E.d.goDisplay,(function(){return c.push("/i/display")})),y()(n,E.d.goNotifications,(function(){return c.push("/notifications")})),y()(n,E.d.goMentions,(function(){return c.push("/notifications/mentions")})),y()(n,E.d.goMessages,(function(){return c.push("/messages")})),y()(n,E.d.newMessage,(function(){return c.push("/messages/compose")})),y()(n,E.d.newTweet,(function(){return c.push("/compose/tweet")})),y()(n,E.d.goBookmarks,(function(){return c.push("/i/bookmarks")})),n)),d=e.props.loggedInUserScreenName?l:i;e._unbindKeyboardShortcuts=Object(S.a)(d)})),y()(i()(e),"_handleKeyDown",(function(t){H(t)||"Backspace"!==t.key||(e._backspaceDown=Date.now(),t.preventDefault(),t.stopPropagation())})),y()(i()(e),"_handleKeyUp",(function(t){if(!H(t)&&"Backspace"===t.key){t.preventDefault(),t.stopPropagation();var r=e._backspaceDown,n=!!Object(A.a)(r)&&Date.now()-r<500,a=Object(w.a)({},{location:e.props.location});n&&a?e.props.history.goBack():window.close()}})),e}return o()(r,[{key:"componentDidMount",value:function(){this._bindKeyboardShortcuts(),D.a.isKaiOS()&&Object(R.a)()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}},{key:"componentWillUnmount",value:function(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),D.a.isKaiOS()&&Object(R.a)()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}},{key:"render",value:function(){return this.props.loggedInUserScreenName?v.createElement(j.a,{accessibilityRole:"heading","aria-level":"2",style:P.a.visuallyHidden},v.createElement(x.c,null,U),v.createElement(x.c,{importantForAccessibility:"no",link:"/i/keyboard_shortcuts"},L)):null}}]),r}(v.Component));t.a=Object(C.a)(K)},sYRn:function(e,t,r){"use strict";var n=r("ERkP"),a=r("eb3s"),c=r("3XMw"),o=r.n(c),s=o.a.hffea05c,i=o.a.j037e373,u=o.a.d96cf7cd;t.a=function(e){var t=e.onCancel,r=e.onConfirm;return n.createElement(a.a,{confirmButtonLabel:u,confirmButtonType:"destructive",headline:s,onCancel:t,onConfirm:r,text:i})}},v4XE:function(e,t,r){"use strict";r.d(t,"d",(function(){return b})),r.d(t,"c",(function(){return _})),r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return g}));r("1t7P"),r("2G9S"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("JtPf"),r("+oxZ");var n=r("RhWx"),a=r.n(n),c=r("KEM+"),o=r.n(c),s=r("kGix"),i=r("Ssj5"),u=r("RqPI"),l=r("oEOe");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h="rweb/".concat("savedSearches"),p={fetchStatus:s.a.NONE,savedSearches:[]},m=Object(l.a)(h,"FETCH_SAVED_SEARCHES"),y=Object(l.a)(h,"SAVE_SEARCH"),v=Object(l.a)(h,"DELETE_SAVED_SEARCH");function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SUCCESS:return f(f({},e),{},{fetchStatus:s.a.LOADED,savedSearches:t.payload});case m.FAILURE:return f(f({},e),{},{fetchStatus:s.a.FAILED});case y.SUCCESS:return f(f({},e),{},{savedSearches:[].concat(a()(e.savedSearches),[t.payload])});case v.SUCCESS:return f(f({},e),{},{savedSearches:e.savedSearches.filter((function(e){return e.id_str!==t.payload.id_str}))});default:return e}}i.a.register(o()({},"savedSearches",S));var b=function(e){return e.savedSearches.savedSearches},_=function(e){return function(t,r,n){var a=n.api;return Object(l.b)(t,{request:a.SavedSearches.create,params:{query:e}})({actionTypes:y,context:"SAVE_SEARCH"})}},O=function(e){return function(t,r,n){var a=n.api;return Object(l.b)(t,{request:a.SavedSearches.destroy,params:{id:e}})({actionTypes:v,context:"DELETE_SAVED_SEARCH"})}},g=function(){return function(e,t,r){r.api;var n=t();return Object(u.e)(n)?function(e){return e.savedSearches.fetchStatus}(n)===s.a.LOADED?Promise.resolve():e((function(e,t,r){var n=r.api;return Object(l.b)(e,{request:n.SavedSearches.fetch,params:{}})({actionTypes:m,context:"FETCH_SAVED_SEARCHES"})})):Promise.resolve()}}},wtjx:function(e,t,r){"use strict";r.d(t,"g",(function(){return f})),r.d(t,"f",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"d",(function(){return S})),r.d(t,"b",(function(){return _})),r.d(t,"a",(function(){return g})),r.d(t,"c",(function(){return I}));r("1t7P"),r("LW0h"),r("jwue"),r("Ee2X"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("JtPf"),r("+oxZ");var n=r("KEM+"),a=r.n(n),c=r("Ssj5"),o=r("RqPI");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){return function(t,r,n){return n.userPersistence.set("rweb.recentSearches",{recentSearches:e}).catch((function(){Promise.resolve()}))}},l=function(e,t){var r=[];if(e&&e.user){var n=e.user;r=t.filter((function(e){return e.keyword||e.user&&e.user.id!==n.id}))}else if(e&&e.keyword){var a=e.keyword;r=t.filter((function(e){return e.keyword&&e.keyword.query!==a.query||e.user}))}return r},d={fetched:!1,recentSearches:[]};var f=function(e){return e.recentSearches.recentSearches},h=function(e){return f(e)[0]||null},p=function(e){return e.recentSearches.fetched},m="rweb/recentSearches/INIT_FROM_CACHE",y=function(e){return{type:m,payload:e}},v="rweb/recentSearches/REMOVE_QUERY",S=function(e){return function(t,r,n){n.userPersistence;t({payload:e,type:v});var a=r().recentSearches;return Object(o.e)(r())?t(u(a.recentSearches)):Promise.resolve()}},b="rweb/recentSearches/CLEAR_ALL",_=function(){return function(e,t,r){r.userPersistence;e({type:b});var n=t().recentSearches;return Object(o.e)(t())?e(u(n.recentSearches)):Promise.resolve()}},O="rweb/recentSearches/ADD_QUERY",g=function(e){return function(t,r,n){n.userPersistence;t({payload:e,type:O});var a=r().recentSearches;return Object(o.e)(r())?t(u(a.recentSearches)):Promise.resolve()}},I=function(){return function(e,t,r){r.userPersistence;return t().recentSearches.fetched?Promise.resolve():e((function(e,t,r){var n=r.userPersistence,a=t();return Object(o.e)(a)?n.get("rweb.recentSearches").then((function(t){e(y(t))})).catch((function(){e(y())})):(e(y()),Promise.resolve())}))}};c.a.register(a()({},"recentSearches",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var r=t.payload,n=r?l(r,e.recentSearches):[];return n.length>49&&n.splice(49,1),r&&n.unshift(r),i(i({},e),{},{recentSearches:n});case v:var a=t.payload,c=a?l(a,e.recentSearches):[];return i(i({},e),{},{recentSearches:c});case b:return{fetched:!0,recentSearches:[]};case m:return i(i(i({},e),t.payload),{},{fetched:!0});default:return e}})))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/loader.Typeahead.66c007c5.js.map