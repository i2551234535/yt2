(window.webpackJsonp=window.webpackJsonp||[]).push([[66,13,62],{"1RVd":function(e,t,n){"use strict";n.r(t),n.d(t,"InlineComposeContainer",(function(){return u}));var r=n("97Jx"),a=n.n(r),o=n("ERkP"),i=n("GVND"),s=n("Ub51"),c=n("MWbm"),l=n("cHvH"),d=n("rHpw"),u=function(e){var t=e.getTweetHeight,n=e.history,r=e.location,d=e.richTextInputContext,u=e.typeaheadWrapper,h=e.parentTweetId,f=e.replyPressToggle;return o.createElement(l.a,null,(function(e){var l=e.windowWidth;return o.createElement(i.a.Consumer,null,(function(e){return o.createElement(c.a,{style:p.root},o.createElement(s.a,a()({},e,{getTweetHeight:t,history:n,isInline:!0,location:r,parentTweetId:h,replyPressToggle:f,richTextInputContext:d,typeaheadWrapper:u,windowWidth:l})))}))}))},p=d.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,zIndex:1}}}));t.default=u},"45mF":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("2G9S");var r=n("1YZw"),a=n("pXBW"),o=n("3XMw"),i=n.n(o),s=n("SrIh"),c=i.a.a5d4fda0,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{customErrorHandler:function(n){var o=n.context;return!n instanceof a.a&&(n.message="Strato error occurred in ".concat(o.id,": ").concat(o.action)),Object(s.a)(n,{extra:{context:o,isStrato:!0}}),t?Object(r.b)({text:e}):[]}}}},EweD:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("Lsrn"),s=n("k/Ka");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)("svg",l(l({},e),{},{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M16.04 7.266c-.45 0-.815.297-.947.7l-.03.113s-1.064-1.397-3.277-1.397c-2.855 0-4.928 2.4-4.928 5.706 0 2.495 1.755 4.525 3.912 4.525 2.307 0 3.632-1.492 3.632-1.492s.597 1.75 3.503 1.75c.49 0 4.837-.297 4.837-5.172 0-5.923-4.82-10.743-10.744-10.743-5.922 0-10.74 4.82-10.74 10.743 0 5.924 4.818 10.743 10.742 10.743 2.244 0 4.04-.544 5.82-1.765.163-.112.273-.283.31-.48s-.005-.394-.118-.557c-.224-.327-.71-.418-1.037-.193-1.516 1.04-3.05 1.504-4.976 1.504-5.102 0-9.25-4.15-9.25-9.25S6.9 2.75 12 2.75 21.25 6.9 21.25 12c0 2.916-1.822 3.9-3.234 3.9-.53 0-2.234-.213-1.906-2.103 0 0 .938-5.4.938-5.523-.002-.557-.452-1.008-1.01-1.008zm-2.235 6.55c-.58.83-1.378 1.305-2.247 1.335l-.105.003c-1.483 0-2.52-1.112-2.578-2.768-.075-2.12 1.366-3.964 3.146-4.027l.102-.002c1.423 0 2.417 1.07 2.474 2.66.035 1.024-.245 2.018-.79 2.8z"})))};d.metadata={width:24,height:24},t.a=d},M5JI:function(e,t,n){"use strict";n.r(t);var r=n("1RVd"),a=n("SADN");t.default=Object(a.a)(r.default)},MXY2:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("3XMw"),a=n.n(r),o=a.a.bea869b3,i=a.a.f70a36d0,s=a.a.bac8f4c1,c=a.a.d17df547,l=a.a.h735a98d,d=function(e){var t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?l:e.isQuoteTweet||e.isRetweet?s:t?c:e.isThread?i:o}},"S+H3":function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("Lsrn"),s=n("k/Ka");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)("svg",l(l({},e),{},{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M15.09 9.07c-.25-1.83-1.43-2.98-3.1-2.98-1.66 0-2.85 1.15-3.09 2.98-.18 1.32 0 2.26.55 2.89.66.76 1.66.86 2.54.86.89 0 1.88-.1 2.54-.86.56-.63.74-1.57.56-2.89zm-1.68 1.9c-.21.24-.65.35-1.42.35-.76 0-1.2-.11-1.41-.35-.24-.28-.31-.86-.2-1.7.1-.76.47-1.68 1.61-1.68.58 0 .95.23 1.2.56.24.32.36.74.41 1.12.12.84.05 1.42-.19 1.7zm2.67 4.09c-.99-.99-2.4-1.52-4.07-1.52h-.03c-1.62 0-3.06.55-4.06 1.55-.87.87-1.34 2.02-1.34 3.25 0 .79.64 1.44 1.44 1.44h7.95c.79 0 1.44-.65 1.44-1.44 0-1.26-.47-2.43-1.33-3.28zm-7.44 3.276c-.318.002-.562-.288-.502-.6.116-.595.406-1.14.842-1.576.72-.72 1.78-1.12 3.01-1.12H12c1.27 0 2.32.37 3.02 1.08.432.432.715.962.83 1.564.06.308-.178.598-.492.6l-6.72.052zM21.75 6.97c-.22-1.7-1.32-2.75-2.86-2.75-1.53 0-2.64 1.05-2.87 2.75-.16 1.2.02 2.07.52 2.65.62.71 1.53.81 2.35.81.81 0 1.73-.1 2.34-.8.39-.45.59-1.07.59-1.85 0-.22-.02-.47-.07-.81zm-4.22.2c.13-.95.59-1.43 1.36-1.43.43 0 .77.15 1 .46.23.29.32.69.35.97.03.22.05.43.05.61 0 .4-.07.69-.21.84-.16.2-.54.28-1.19.28-.66 0-1.04-.08-1.2-.28-.2-.22-.25-.73-.16-1.45zm6.3 8.37c0 .74-.62 1.34-1.37 1.34h-3.75c-.41 0-.76-.34-.76-.76 0-.43.34-.76.76-.76h3.24c.1 0 .2-.05.26-.13.07-.09.1-.2.07-.3-.12-.53-.37-.99-.74-1.36-.61-.62-1.53-.94-2.64-.94-.73 0-1.39.15-1.93.44l-.5.32c-.36.21-.83.1-1.04-.25-.23-.36-.12-.82.24-1.05l.54-.34c.78-.42 1.71-.64 2.66-.64h.03c1.52 0 2.81.47 3.72 1.38.79.8 1.22 1.88 1.21 3.05zM2.18 7.78c0 .78.2 1.4.59 1.85.61.7 1.53.8 2.34.8.82 0 1.73-.1 2.35-.81.5-.58.68-1.45.52-2.65-.23-1.7-1.34-2.75-2.87-2.75-1.54 0-2.64 1.05-2.86 2.75-.05.34-.07.59-.07.81zm4.13.84c-.16.2-.54.28-1.2.28-.65 0-1.03-.08-1.19-.28-.14-.15-.21-.44-.21-.84 0-.18.02-.39.05-.61.03-.28.12-.68.35-.97.23-.31.57-.46 1-.46.77 0 1.23.48 1.36 1.43.09.72.04 1.23-.16 1.45zM.17 15.54c0 .74.62 1.34 1.37 1.34h3.75c.41 0 .76-.34.76-.76 0-.43-.34-.76-.76-.76H2.05c-.1 0-.2-.05-.26-.13-.07-.09-.1-.2-.07-.3.12-.53.37-.99.74-1.36.61-.62 1.53-.94 2.64-.94.73 0 1.39.15 1.93.44l.5.32c.36.21.83.1 1.04-.25.23-.36.12-.82-.24-1.05l-.54-.34c-.78-.42-1.71-.64-2.66-.64H5.1c-1.52 0-2.81.47-3.72 1.38-.79.8-1.22 1.88-1.21 3.05z"})))};d.metadata={width:24,height:24},t.a=d},SADN:function(e,t,n){"use strict";var r=n("97Jx"),a=n.n(r),o=n("ERkP"),i=n("RH6X"),s=n("rziq"),c=n("hHEM"),l=n("keCP"),d={convertEmojiToEntities:c.a.convertEmojiToEntities,element:l.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:s.a,sendTweetCommandName:s.b};t.a=function(e){return function(t){return o.createElement(e,a()({},t,{richTextInputContext:d,typeaheadWrapper:i.a}))}}},Ub51:function(e,t,n){"use strict";n("1t7P"),n("2G9S"),n("DfhM"),n("LW0h"),n("jwue"),n("jQ3i"),n("vrRf"),n("lTEL"),n("7xRU"),n("z84I"),n("M+/F"),n("5BYb"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("Blm6"),n("JtPf"),n("Qavd"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("x4t0"),n("87if"),n("MvUL"),n("uFXj"),n("+oxZ"),n("kYxP");var r=n("ddV6"),a=n.n(r),o=n("97Jx"),i=n.n(o),s=n("VrFO"),c=n.n(s),l=n("Y9Ll"),d=n.n(l),u=n("1Pcy"),p=n.n(u),h=n("5Yy7"),f=n.n(h),m=n("N+ot"),g=n.n(m),v=n("AuHH"),y=n.n(v),_=n("KEM+"),b=n.n(_),w=n("ERkP"),C=n("6/RC"),T=(n("hBpG"),n("KOtZ"),n("ho0z"),n("Ysgh"),n("wpu3")),S=(n("yH/f"),Object.freeze({all:"all",community:"community",by_invitation:"by_invitation"})),x=n("wrlS"),R=n("3XMw"),E=n.n(R),I=n("MWbm"),O=n("t62R"),k=n("CKsB"),D=n("/yvb"),A=n("rHpw"),P=n("Zg3A"),M=n("S+H3"),B=n("EweD"),j=E.a.g6185a9e,H=E.a.g2d04222,L=E.a.cfda7b45,N=E.a.baffe39a,F=E.a.af293dc2,U=E.a.h1053f7e,V=E.a.cfd2f35d,W=A.a.create((function(e){return{root:{flexDirection:"column",paddingTop:e.spaces.small,paddingBottom:e.spaces.xxSmall,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.jumbo},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.small,marginBottom:e.spaces.xSmall},menuRow:{flexDirection:"row",paddingTop:e.spaces.xSmall,paddingBottom:e.spaces.xSmall,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.small,marginVertical:e.spaces.small}}})),z=function(e){var t=e.dismiss,n=e.isModal,r=e.value,a=function(t){return function(){e.onChange(t),e.dismiss()}},o=x.b.isTrue("conversation_controls_flexible_participation_enabled");return w.createElement(I.a,{accessibilityRole:"dialog","aria-describedby":"conversation-controls-details","aria-labelledby":"conversation-controls-title",style:[W.root,n?W.modal:W.popover]},w.createElement(I.a,{style:W.title},w.createElement(O.c,{nativeID:"conversation-controls-title",weight:"bold"},j),w.createElement(O.c,{color:"deepGray",nativeID:"conversation-controls-details",size:"normal"},o?L:H)),w.createElement(I.a,null,w.createElement(k.a,{Icon:P.a,actionText:N,isSelected:S.all===r,onClick:a(S.all),selectable:!0,style:W.menuRow,withIconAsThumbnail:!0}),w.createElement(k.a,{Icon:M.a,actionText:F,isSelected:S.community===r,onClick:a(S.community),selectable:!0,style:W.menuRow,withIconAsThumbnail:!0}),w.createElement(k.a,{Icon:B.a,actionText:U,isSelected:S.by_invitation===r,onClick:a(S.by_invitation),selectable:!0,style:W.menuRow,withIconAsThumbnail:!0}),e.isModal?w.createElement(D.a,{key:"button_cancel",onPress:t,style:W.cancelButton,type:"neutral"},V):null))},G=n("PmiK"),q=n("Irs7"),K=n("efqG"),X=n("DlMI"),Z=n("gBde"),Y=n("fBGZ"),Q=w.createElement(X.a,null),J=w.createElement(Z.a,null),$=w.createElement(Y.a,null),ee=Object.freeze({all:{icon:Q,label:E.a.i8ea6d4e},community:{icon:$,label:E.a.ec5a4a25},by_invitation:{icon:J,label:E.a.b4543009}}),te=Object(q.a)((function(e){var t=ee[e.value],n=t.icon,r=t.label,a=e.analytics,o=e.disabled,s=e.hidden,c=w.useCallback((function(e){a.scribe({element:"conversation_control",action:"click"})}),[a]),l=w.useCallback((function(t,n){return w.createElement(z,i()({},e,{dismiss:t,isModal:"sheet"===n}))}),[e]),d=["community","by_invitation"].includes(e.value);return w.createElement(w.Fragment,null,w.createElement(I.a,{style:[ne.container,s&&ne.hidden]},w.createElement(K.a,{disabled:o,renderContent:l},w.createElement(D.a,{disabled:o,icon:n,onPress:c,size:"small",style:ne.button,type:"text"},r))),w.createElement(I.a,{style:[ne.separator,s&&ne.hidden]}),d?w.createElement(G.a,null):null)})),ne=A.a.create((function(e){return{button:{paddingHorizontal:e.spaces.xxSmall},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.xSmall},separator:{height:"1px",backgroundColor:e.colors.borderColor,width:"100%"},hidden:{visibility:"hidden"}}})),re=n("krmn"),ae=n("oEoC"),oe=n("cIoY"),ie=n("w3n3"),se=n("MLl7"),ce=n("DtVZ"),le=n("1auM"),de=n("07FG"),ue=n("Q8CU"),pe=n("QbaN"),he=n("VPdC"),fe=n("B1L3"),me=(n("aWzz"),n("p+r5")),ge=n("GWvE");function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ye=function(e){f()(n,e);var t=ve(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"_setInputRef",(function(t){e._inputRef=t})),e}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.autoFocus,n=e.defaultValue,r=e.editable,a=e.label,o=e.onChange,i=e.name;return w.createElement(I.a,{style:_e.root},w.createElement(me.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:t,defaultValue:n,editable:r,label:a,maxLength:25,name:i,onChange:o,ref:this._setInputRef,spellCheck:"false",style:_e.formTextInput}))}},{key:"value",get:function(){return this._inputRef&&this._inputRef.getValue()}},{key:"isValid",get:function(){var e=this.props.optional;return!this.value&&e||this.value&&!Object(ge.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}]),n}(w.Component);b()(ye,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});var _e=A.a.create((function(e){return{root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.xLarge},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.xSmall}}})),be=ye,we=n("mtvn"),Ce=n("6XNv");function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Se=function(e){f()(n,e);var t=Te(n);function n(){return c()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.label,r=e.last,a=e.max,o=e.min,i=e.onChange,s=!t||o===a,c=e.value.toString(),l=Object(we.a)(o,a+1).map((function(e){return{label:"".concat(E.a.ia24dc8c(e)),value:"".concat(e)}}));return w.createElement(Ce.a,{disabled:s,label:n,onChange:i,options:l,style:[xe.selector,!r&&xe.rightMargin],value:c})}}]),n}(w.PureComponent);b()(Se,"defaultProps",{last:!1});var xe=A.a.create((function(e){return{rightMargin:{marginRight:e.spaces.medium},selector:{flexGrow:1}}})),Re=Se;function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Ie=E.a.caf8edc4,Oe=E.a.g93586be,ke=E.a.d073b644,De=E.a.a2f0728e,Ae=function(e){f()(n,e);var t=Ee(n);function n(e,r){var a;return c()(this,n),a=t.call(this,e,r),b()(p()(a),"_handleDaysChange",(function(e){var t=parseInt(e,10);a.setState((function(e){var n=e.duration,r=n.hours,a=n.minutes,o=0===t&&0===r&&0===a?1:7===t?0:r;return{duration:{days:t,hours:o,minutes:7===t?0:0===t&&0===o&&a<5?5:a}}}))})),b()(p()(a),"_handleHoursChange",(function(e){var t=parseInt(e,10);a.setState((function(e){var n=e.duration,r=n.days,a=n.minutes;return{duration:{days:r,hours:t,minutes:0===r&&0===t&&a<5?5:a}}}))})),b()(p()(a),"_handleMinutesChange",(function(e){var t=parseInt(e,10);a.setState((function(e){var n=e.duration;return{duration:{days:n.days,hours:n.hours,minutes:t}}}))})),a.state={duration:e.initialDuration},a}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.isActive;return w.createElement(I.a,{style:t},w.createElement(O.c,{color:"normal",style:Pe.durationLabel},n?Ie:""),this._renderPicker())}},{key:"_renderPicker",value:function(){var e=this.props,t=e.editable,n=e.isActive,r=this.state.duration,a=r.days,o=r.hours,i=r.minutes;return w.createElement(I.a,{style:Pe.durationControls},w.createElement(Re,{editable:t&&n,label:Oe,max:7,min:0,onChange:this._handleDaysChange,value:a}),w.createElement(Re,{editable:t&&n,label:ke,max:7===a?0:23,min:0,onChange:this._handleHoursChange,value:o}),w.createElement(Re,{editable:t&&n,label:De,last:!0,max:7===a?0:59,min:0===a&&0===o?5:0,onChange:this._handleMinutesChange,value:i}))}},{key:"duration",get:function(){return this.state.duration}}]),n}(w.Component);b()(Ae,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});var Pe=A.a.create((function(e){return{durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.xxSmall}}})),Me=Ae,Be=n("iY63"),je=n("jtO7");function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Le=E.a.g589c2e1,Ne=E.a.a1e6c3a1,Fe=E.a.a739e006,Ue=E.a.d89a5b92,Ve=E.a.c2a8118d,We=E.a.a8ede1de,ze=function(e){f()(n,e);var t=He(n);function n(e,r){var a;c()(this,n),a=t.call(this,e,r),b()(p()(a),"_setChoice1Ref",(function(e){a._choice1=e})),b()(p()(a),"_setChoice2Ref",(function(e){a._choice2=e})),b()(p()(a),"_setChoice3Ref",(function(e){a._choice3=e})),b()(p()(a),"_setChoice4Ref",(function(e){a._choice4=e})),b()(p()(a),"_setDurationPickerRef",(function(e){a._durationPicker=e})),b()(p()(a),"_handleValidation",(function(){var e=a.props,t=e.onValid,n=e.onInvalid,r=a.choices,o=p()(a),i=[o._choice1,o._choice2,o._choice3,o._choice4].filter(Boolean).every((function(e){return e.isValid}));r&&r.length>=2&&i?t():n()})),b()(p()(a),"_handleAdd",(function(){a.props.analytics.scribe({element:"add_poll_option",action:"click"}),a.setState((function(e){return{autoFocus:!0,choiceCount:e.choiceCount+1}}))}));var o=e.initialChoices,i=void 0===o,s=(o||[]).length,l=s>2?s:2;return a.state={autoFocus:i,choiceCount:l},a}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.initialChoices,r=void 0===n?[]:n,a=e.initialDuration,o=e.isActive,i=e.onRemove,s=this.state,c=s.autoFocus,l=s.choiceCount;return w.createElement(I.a,{style:Ge.root},w.createElement(I.a,{style:Ge.choicesAndAddButton},w.createElement(I.a,{style:Ge.choices},w.createElement(be,{autoFocus:c,defaultValue:r[0],editable:t&&o,label:Le,name:"Choice1",onChange:this._handleValidation,ref:this._setChoice1Ref}),w.createElement(be,{defaultValue:r[1],editable:t&&o,label:Ne,name:"Choice2",onChange:this._handleValidation,ref:this._setChoice2Ref}),l>=3?w.createElement(be,{autoFocus:c,defaultValue:r[2],editable:t&&o,label:Fe,name:"Choice3",onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===l?w.createElement(be,{autoFocus:c,defaultValue:r[3],editable:t&&o,label:Ue,name:"Choice4",onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),w.createElement(I.a,{style:Ge.rightColumn},l<4?w.createElement(D.a,{accessibilityLabel:We,disabled:!(t&&o),icon:w.createElement(Be.a,null),onPress:this._handleAdd,size:"normal",style:Ge.addButton,type:"text"}):null)),w.createElement(Me,{editable:t,initialDuration:a,isActive:o,ref:this._setDurationPickerRef,style:Ge.durationPicker}),w.createElement(I.a,{style:Ge.removePollButton},w.createElement(je.a,{color:"red",label:Ve,onPress:i,withBottomBorder:!1})))}},{key:"choices",get:function(){var e=this._choice1,t=this._choice2,n=this._choice3,r=this._choice4;return[e&&e.value,t&&t.value,n&&n.value,r&&r.value].filter(Boolean)}},{key:"duration",get:function(){return this._durationPicker?this._durationPicker.duration:void 0}}]),n}(w.Component),Ge=A.a.create((function(e){return{root:{flexDirection:"column",backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,paddingTop:e.spaces.xSmall,overflow:"hidden"},choicesAndAddButton:{paddingLeft:e.spaces.small,paddingRight:e.spaces.small,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1,marginRight:e.spaces.xxSmall},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse",marginRight:"calc(-1 * ".concat(e.spaces.xSmall,")"),paddingBottom:e.spaces.xSmall,width:e.spaces.xLarge},addButton:{marginBottom:e.spaces.large},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:1,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:1,paddingBottom:e.spaces.xSmall,paddingLeft:e.spaces.small,paddingRight:e.spaces.small,paddingTop:e.spaces.xSmall}}})),qe=Object(q.a)(ze),Ke=n("kIAd"),Xe=n("rcen"),Ze=n("zmS9"),Ye=n("WPfJ"),Qe=A.a.create((function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.xxSmall},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},rightColumn:{paddingTop:e.spaces.xxSmall,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:Ye.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.xLarge,padding:0},tweetAttachmentArea:{zIndex:Ye.e},iconEmojiPicker:{zIndex:Ye.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.micro,zIndex:Ye.a},firstToolBarButton:{marginLeft:"-".concat(e.spaces.xSmall)},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.xSmall},separator:{width:"1px",backgroundColor:e.colors.mediumGray,height:e.fontSizes.jumbo,marginRight:e.spaces.xSmall,marginLeft:"calc(".concat(e.spaces.xSmall," - 2px)")},conversationLine:{alignSelf:"center",backgroundColor:e.colors.lightGray,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},conversationLineWithOverflow:{marginTop:"-".concat(e.spaces.xxSmall)},attachmentContainer:{marginTop:e.spaces.xxSmall,marginBottom:e.spaces.xxSmall},mediaPreview:{marginTop:e.spaces.xxSmall},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.xxSmall,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},noBackground:{backgroundColor:e.colors.transparent},addImageActionIcon:{marginRight:e.spaces.micro},addImageTextPadding:{marginEnd:e.spaces.xxLarge},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.xxSmall},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{paddingVertical:e.spaces.xSmall,paddingLeft:e.spaces.xSmall,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.xxSmall}}})),Je="addButton",$e="altTextLabel",et="attachments",tt="taggedUsersLabel",nt="tweetTextarea_",rt="toolBar",at="scheduleOption",ot=n("xM7j"),it=n("6OUF"),st=n("uCxL"),ct=n("tZIO"),lt=n("5mJL"),dt=n("DNho"),ut=n("oSwX"),pt=n("rFBM"),ht=n("zfvc"),ft=n("yTN1"),mt=n("gpVt"),gt=n("hOZg"),vt=n("ll3R"),yt=n("J0mu"),_t=n("boUI"),bt=n("6ZHn"),wt=n("/WPq"),Ct=n("wpLu"),Tt=n("oQhu"),St=n("YeIG"),xt=n("pKoL"),Rt=n("9Xij");function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var It=function(e){f()(n,e);var t=Et(n);function n(){return c()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.media,n=e.style;return w.createElement(I.a,{style:n},this._renderImageGroup(t.length))}},{key:"_renderImageGroup",value:function(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}},{key:"_renderGroupOf1",value:function(){var e=this.props.media,t=e&&!!e[0].mediaFile,n=e&&!t&&e[0].externalMediaDetails||{},r=n.width,a=n.height;return w.createElement(Rt.a,{ratio:t?A.a.theme.aspectRatios.landscape:r/a},w.createElement(I.a,{style:Ot.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}},{key:"_renderGroupOf2",value:function(){return w.createElement(Rt.a,{ratio:A.a.theme.aspectRatios.landscape},w.createElement(I.a,{style:Ot.mediaPreviewWrapper},this._renderMediaAtIndex(0,Ot.gutterRight),this._renderMediaAtIndex(1)))}},{key:"_renderGroupOf3",value:function(){return w.createElement(Rt.a,{ratio:A.a.theme.aspectRatios.landscape},w.createElement(I.a,{style:Ot.mediaPreviewWrapper},this._renderMediaAtIndex(0,Ot.gutterRight),this._renderColumnWithIndices([1,2])))}},{key:"_renderGroupOf4",value:function(){return w.createElement(Rt.a,{ratio:A.a.theme.aspectRatios.landscape},w.createElement(I.a,{style:Ot.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],Ot.gutterRight),this._renderColumnWithIndices([1,3])))}},{key:"_renderColumnWithIndices",value:function(e,t){return w.createElement(I.a,{style:[Ot.column,t]},this._renderMediaAtIndex(e[0],Ot.gutterBottom),this._renderMediaAtIndex(e[1]))}},{key:"_renderMediaAtIndex",value:function(e,t){var n=this.props,r=n.media,a=n.mediaMetadata,o=n.editable,i=n.isActive,s=n.onClickMedia,c=n.onEditMedia,l=n.onRemoveMedia,d=n.onSetMediaPreviewRef,u=r[e],p=u.id.toString(),h=a&&a[p]&&a[p].altText,f=a&&a[p]&&a[p].defaultAltText;return w.createElement(xt.a,{accessibilityLabel:h||f,accessibilityRole:"group",enableGif:i,key:u.id,mediaItem:u,onClick:s?s(u.id):void 0,onEdit:c?c(u.id):void 0,onRemove:l(u.id),ref:d,style:[Ot.mediaContainer,t],withAltTextLabel:!!h,withCloseButton:o&&i,withEditButton:c&&o&&i})}}]),n}(w.Component),Ot=A.a.create((function(e){return{column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.xSmall},gutterBottom:{marginBottom:e.spaces.xSmall},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}}})),kt=n("S1qy"),Dt=n.n(kt),At=n("cjAp"),Pt=n.n(At);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Bt=E.a.f0afcc0e,jt=E.a.ha5e2e79,Ht=E.a.a3de3b68,Lt=E.a.cc2b28fc,Nt=E.a.g45af04e,Ft=E.a.ee9c4013,Ut=E.a.j499fbcb,Vt=E.a.b7d8e3f0,Wt=E.a.d1175c78,zt=E.a.e349147b,Gt=E.a.e3a24e4b,qt=E.a.de4669e2,Kt=E.a.d2c7a41c,Xt=E.a.f7364fa1,Zt=E.a.j6304a5d,Yt=["ja","zh-cn","zh-tw","ko"],Qt=E.a.ia24dc8c,Jt=w.createElement(gt.a,null),$t=w.createElement(Be.a,null),en=w.createElement(vt.a,null),tn=w.createElement(yt.a,null),nn=function(e){f()(n,e);var t=Mt(n);function n(e){var r;c()(this,n),r=t.call(this,e),b()(p()(r),"_handleConversationControlsValueChange",(function(e){r.props.updateConversationControlsValue(e)})),b()(p()(r),"_triggerConversationControlsImpression",Object(Tt.a)((function(){return x.b.isTrue("conversation_controls_limited_replies_creation_enabled")}))),b()(p()(r),"_renderConversationControls",(function(e){var t=r.state.isFocused,n=r.props,a=n.conversationControlsValue,o=n.isActive,i=n.isInline,s=n.isReply;if(s||!t&&i||r._triggerConversationControlsImpression(),!r._conversationControlsCreationEnabled)return null;var c=o&&!s&&(!i||(t||e)),l=!c&&!i&&!s;return l||c?w.createElement(te,{disabled:r._isScheduled(),hidden:l,onChange:r._handleConversationControlsValueChange,value:a}):null})),b()(p()(r),"_renderFlexibleParticipationEducation",(function(e){var t=r.state,n=t.isFocused,a=t.hasMentions,o=r.props,i=o.isInline,s=o.isReply;return o.withFlexibleParticipation&&(a&&s&&(!i||(n||e)))&&x.b.isTrue("conversation_controls_flexible_participation_reply_enabled")?w.createElement(ce.a,{Icon:Z.a,iconSize:"medium",size:"small",style:Qe.highlightedText,text:Zt,textStyle:Qe.highlightedTextInner}):null})),b()(p()(r),"_renderMainContent",(function(){var e=r.props,t=e.additionalToolbarContent,n=e.autoFocus,a=e.data,o=e.editable,i=e.index,s=e.isActive,c=e.isExpanded,l=e.isInline,d=e.isInlineReply,u=e.isLast,p=e.keyCommandHandlers,h=e.onFilesAdded,f=e.onTextInputBlur,m=e.onTypeaheadStateChange,g=e.positionCursorAtBeginning,v=e.richTextInputContext,y=a.cardUrl,_=a.media,b=a.pollActive,C=a.quotedStatus,T=a.text,S=Object(mt.b)(T)||y&&!Object(de.a)(y)&&[y],x=!!_.length||b||!!C,R=0===i&&u,E=r.props.typeaheadWrapper,O=!!v,k=v||{},D=k.element,A=k.sendTweetCommandName,P=k.dismissComposerCommandName,M=v?{dismissComposerCommandName:P,editorState:r.state.editorState,element:D,sendTweetCommandName:A}:void 0,B=d&&!v&&!c;return w.createElement(I.a,{style:Qe.textInputArea},w.createElement(I.a,{style:c?Qe.inputStyle:Qe.collapsedInputStyle},w.createElement(E,{contextText:T,isInline:l,onTextUpdated:r._handleTextChange,onTypeaheadStateChange:m},(function(e){return w.createElement(it.a,{appTextSize:"large",ariaLabel:Ht,autoFocus:n||s&&!l,closeButton:s&&r._isEmpty()&&!R?r._renderCloseButton():void 0,contentBelow:r._renderTweetAttachment(),editable:o,inputStyle:[Qe.textInputStyle,B&&Qe.textInputMobileCollapsed],keyCommandHandlers:p,maxNumberOfLines:O?30:10,multiline:!0,numberOfLines:r._calcNumberOfLines(),onBlur:f,onChange:r._getHandleChange(e),onFilesAdded:h,placeholder:r._getPlaceHolderText(),positionCursorAtBeginning:g,positionCursorAtEnd:!g,ref:r._setTextInputRef,richTextInputContext:M,style:Qe.noBackground,styleType:"selection",testID:"".concat(nt).concat(i),value:T})})),S&&!x?w.createElement(mt.a,{index:i,isCardPreviewTombstoned:Object(de.a)(y),urls:S}):null),c?null:t)})),b()(p()(r),"_calcNumberOfLines",(function(){var e=r.props,t=e.richTextInputContext,n=e.isInline,a=e.data,o=!!t,i=a.media,s=a.pollActive,c=a.quotedStatus;return o?n||i.length||s||c?1:6:4})),b()(p()(r),"_renderScheduledTweetLegend",(function(){var e=r.props.scheduledFor;return w.createElement(Ze.a,{onPress:r._handlePressScheduledTweetLegend,scheduledFor:e})})),b()(p()(r),"_handlePressScheduledTweetLegend",(function(){var e=r.props,t=e.history,n=e.analytics,a=e.setActiveParentKey;t.push("/compose/tweet/schedule"),n.scribe({element:"tweet_legend",action:"click"}),a()})),b()(p()(r),"_renderEmojiPicker",(function(){return w.createElement(re.a,{onEmojiSelect:r._handleInsertEmoji,size:"normal",style:r._getEmojiPickerButtonStyles(),textInputRef:r._textInputRef||void 0})})),b()(p()(r),"_getEmojiPickerButtonStyles",Object(Tt.a)((function(){return[Qe.iconEmojiPicker,Qe.toolBarButton]}))),b()(p()(r),"_isSchedulingDisabled",(function(){var e=r.props,t=e.conversationControlsValue,n=e.index,a=e.isLast,o=e.data,i=o.pollActive,s=o.quotedStatus,c=o.text,l=o.media,d=o.mediaTags,u=0===n&&a,p=t!==S.all;return Boolean(i||!u||s&&""===c&&!l.length||p||d.length>0)})),b()(p()(r),"_renderSchedulingButton",(function(){return w.createElement(D.a,{accessibilityLabel:jt,disabled:r._isSchedulingDisabled(),icon:tn,onClick:r._handleClickScheduler,size:"normal",style:Qe.toolBarButton,testID:at,type:"text"})})),b()(p()(r),"_handleClickScheduler",(function(){var e=r.props,t=e.analytics,n=e.history,a=e.setActiveParentKey;n.push("/compose/tweet/schedule"),t.scribe({element:"schedule_tweet",action:"click"}),a()})),b()(p()(r),"_renderCloseButton",(function(){var e=r.props.onRemoveComposer;return w.createElement(D.a,{accessibilityLabel:Ft,icon:Jt,onPress:e,size:"small",type:"text"})})),b()(p()(r),"_renderTweetAttachment",(function(){var e=r.props,t=e.data,n=e.editable,a=e.isActive,o=t.media,i=t.mediaMetadata,s=t.pollActive,c=t.initialPollChoices,l=t.initialPollDuration,d=t.quotedStatus;return 0!==o.length||s||d?w.createElement(I.a,{onClick:r._handleFocus,style:[Qe.attachmentContainer,Qe.tweetAttachmentArea],testID:et},o.length>0?w.createElement(It,{editable:n,isActive:a,media:o,mediaMetadata:i,onClickMedia:r.hasAttachedImage?r._handleClickMediaDetail:void 0,onEditMedia:r.hasAttachedImage?r._handleClickMediaDetail:void 0,onRemoveMedia:r._handleMediaRemoveFactory,onSetMediaPreviewRef:r._handleSetMediaPreviewRef,style:Qe.mediaPreview}):null,a?r._renderMediaActions():null,s?w.createElement(qe,{editable:n,initialChoices:c,initialDuration:l,isActive:a,onInvalid:r._handlePollInvalid,onRemove:r._handlePollRemove,onValid:r._handlePollValid,ref:r._setPollCreatorRef}):null,d?r._renderQuoteTweet(d):null):null})),b()(p()(r),"_renderQuoteTweet",(function(e){var t=r.props.data.media,n=e.tombstoneInfo;return n&&n.richText?w.createElement(ot.a,null,w.createElement(Xe.c,{entities:n.richText.entities,rtl:n.richText.rtl,text:n.richText.text})):w.createElement(st.a,{isCondensed:t.length>0,style:Qe.quoteTweet,tweet:e,withLink:!1,withUserHoverCard:!1})})),b()(p()(r),"_renderToolbar",(function(e){var t=r.props,n=t.additionalToolbarContent,a=t.hidePollAndScheduling,o=t.isReply,i=t.richTextInputContext,s=t.isSelfThreadReply,c=!!i,l=!t.isInlineReply&&!a;return w.createElement(I.a,{style:Qe.toolBar,testID:rt},w.createElement(I.a,{style:Qe.toolBarIconsContainer},r._renderMediaPickerButton(),r._renderGifButton(),l?r._renderPollButton():null,c?r._renderEmojiPicker():null,l?r._renderSchedulingButton():null),w.createElement(I.a,{style:Qe.toolBarIconsContainer},e?r._renderCountdownCircle():null,o&&!s||!e?null:w.createElement(w.Fragment,null,w.createElement(I.a,{style:Qe.separator}),r._renderAddComposerButton()),n))})),b()(p()(r),"_addOverflowStyle",(function(e){var t=r.props.richTextInputContext;if(t){var n=e.getCurrentContent().getPlainText(),a=n.length,o=r._getParsedTweet(n).validRangeEnd,i=o+1<a;if(r.state.hasOverflowStyle||i){var s=i?o+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,s,r.state.hasOverflowStyle),hasOverflowStyle:i}}return{editorState:e,hasOverflowStyle:i}}})),b()(p()(r),"_getHandleChange",Object(Tt.a)((function(e){return function(t){e(t),r._handleTextChange(t)}}))),b()(p()(r),"_handleTextChange",(function(e){var t,n=r.props,a=n.data,o=a.key,i=a.text,s=n.onTextChange,c=n.richTextInputContext;if(c){t=e.getCurrentContent().getPlainText();var l=c.convertEmojiToEntities(e);r.setState(r._addOverflowStyle(l))}else t=ct.a.replaceCarriageReturns(e.target.value);var d=r._hasMentions(t);r.setState({hasMentions:d}),i!==t&&s(t,o)})),b()(p()(r),"_handleClickAltTextShortcut",(function(){r.props.analytics.scribe({element:"alt_text_button",action:"click"})})),b()(p()(r),"_handleClickMediaDetail",(function(e){return function(){var t=r.props,n=t.analytics,a=t.history;n.scribe({element:"media_detail_button",action:"click"}),r.hasAttachedImage&&a.push("/compose/tweet/media",{mediaId:e,tab:"crop"})}})),b()(p()(r),"_handleDragDrop",(function(e){var t=r.props,n=t.addToast,a=t.data.pollActive,o=t.onFilesAdded;a?n({text:Lt}):o(e)})),b()(p()(r),"_handleMediaRemoveFactory",(function(e){return function(){r.props.onRemoveMedia(r.props.index,e)}})),b()(p()(r),"_handleInsertEmoji",(function(e){var t=r.state.editorState,n=r.props.richTextInputContext;if(n){var a=n.insertTextAtCursor(t,e.text);r._handleTextChange(a)}})),b()(p()(r),"_validateMedia",(function(e){var t=r.props.data.media;return T.c(t.concat(e))})),b()(p()(r),"_handlePollAdd",(function(){var e=r.props,t=e.analytics,n=e.index,a=e.updateSingleComposer;t.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},n)})),b()(p()(r),"_handlePollRemove",(function(){var e=r.props,t=e.analytics,n=e.index,a=e.updateSingleComposer;t.scribe({element:"remove_poll",action:"click"}),a({pollActive:!1},n)})),b()(p()(r),"_handlePollInvalid",(function(){var e=r.props,t=e.data.pollValid,n=e.index,a=e.updateSingleComposer;t&&a({pollValid:!1},n)})),b()(p()(r),"_handlePollValid",(function(){var e=r.props,t=e.data.pollValid,n=e.index,a=e.updateSingleComposer;!t&&a({pollValid:!0},n)})),b()(p()(r),"_handleFocus",(function(){var e=r.props,t=e.isActive,n=e.index,a=e.onFocus;(0,e.setActiveParentKey)(),t||(window.requestAnimationFrame((function(){r._mediaPreviewRef&&r._mediaPreviewRef._playVideo()})),a(n))})),b()(p()(r),"_handleEditorFocus",(function(){return r.setState({isFocused:!0})})),b()(p()(r),"_formatCountdownNumber",(function(e){return Qt(Math.ceil(e/r._userLanguageWeight))})),b()(p()(r),"_getPlaceHolderText",(function(){var e=r.props,t=e.data,n=t.quotedStatus,a=t.pollActive,o=e.isReply,i=e.isSelfThreadReply,s=e.index;return n?qt:a?Xt:o&&!i?Kt:i||s>0?Gt:zt})),b()(p()(r),"_getNumberOfAltTextEntries",(function(){var e=r.props.data,t=e.mediaMetadata;return e.media.reduce((function(e,n){var r;return t&&!Object(St.a)(null===(r=t[n.id.toString()])||void 0===r?void 0:r.altText)?e+1:e}),0)})),b()(p()(r),"_getParsedTweet",Object(Tt.a)((function(e){var t=Pt.a[r.props.twitterTextConfigurationVersion];return Dt()(e,t)}))),b()(p()(r),"_isEmpty",(function(){var e=r.props.data;return Object(ue.b)(e)})),b()(p()(r),"_isScheduled",(function(){var e=r.props.data.scheduledFor;return Object(pe.h)(e)})),b()(p()(r),"_hasMentions",(function(e){return!!e.split(Ke.b.WordBoundary).find((function(e){var t=Object(ae.d)(e,"compose");return t&&"users"===t.result_type}))})),b()(p()(r),"_setPollCreatorRef",(function(e){r._pollCreatorRef=e})),b()(p()(r),"_handleSetMediaPreviewRef",(function(e){r._mediaPreviewRef=e})),b()(p()(r),"_setTextInputRef",(function(e){r._textInputRef=e}));var a=e.richTextInputContext,o=e.userLanguage,i=e.data.text,s=(a||{}).initEditorState;return r._conversationControlsCreationEnabled=!0===x.b.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),r._userLanguageWeight=o&&Yt.indexOf(o)>-1?2:1,r.state={editorState:s&&s(i),hasOverflowStyle:!1,isFocused:!1,hasMentions:r._hasMentions(i)},r}return d()(n,[{key:"componentDidUpdate",value:function(e){(this.hasExternalMedia||this.props.data.media.some((function(e){return e.mediaFile&&!(e.mediaFile instanceof le.a)&&e.mediaFile.isVideo})))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef._pauseVideo()}},{key:"focus",value:function(){this._textInputRef&&this._textInputRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,r=t.isExpanded,a=t.isInline,o=t.isLast,i=t.loggedInUser,s=t.withAvatar,c=!this._isEmpty();return w.createElement(I.a,{onFocus:this._handleFocus,style:[Qe.root,!n&&Qe.blurStyle]},w.createElement(lt.a,{avatarCell:w.createElement(w.Fragment,null,s?w.createElement(dt.a.Consumer,null,(function(e){var t=e.avatarSize;return w.createElement(ut.default,{accessibilityLabel:i?i.name:void 0,screenName:i?i.screen_name:void 0,size:t,style:Qe.avatar,uri:i?i.profile_image_url_https:void 0,withLink:a})})):null,o?null:w.createElement(I.a,{style:[Qe.conversationLine,!s&&Qe.conversationLineWithOverflow]})),avatarCellStyle:r?Qe.avatarContainerExpanded:Qe.avatarContainer,cellStyle:Qe.rightColumn},this._renderScheduledTweetLegend(),w.createElement(I.a,{onFocus:this._handleEditorFocus,style:Qe.inputArea},w.createElement(pt.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleDragDrop,style:Qe.dragDrop},(function(t){return w.createElement(w.Fragment,null,w.createElement(I.a,{style:[Qe.composeBoxContainer]},e._renderMainContent()))}))),this._renderConversationControls(c),this._renderFlexibleParticipationEducation(c),w.createElement(ht.b,{show:n&&r},this._renderToolbar(c))))}},{key:"_renderMediaPickerButton",value:function(){var e=this.props,t=e.data.media,n=e.onFilesAdded,r=e.setActiveParentKey,a=this.mediaAttachDisabled,o=t.length<3;return w.createElement(he.a,{acceptGifs:0===t.length,disabled:a,multiple:o,onChange:n,onPress:r,style:[Qe.toolBarButton,Qe.firstToolBarButton],type:"text"})}},{key:"_renderGifButton",value:function(){var e=this.props,t=e.data,n=t.media,r=t.pollActive,a=e.history,o=e.loggedInUser,i=e.setActiveParentKey,s=r||n.length||!o;return w.createElement(ie.a,{enabled:!s,gifSearchKeySource:se.a.Composition,history:a,onPress:i})}},{key:"_renderPollButton",value:function(){var e=this.props,t=e.data,n=t.media,r=t.pollActive,a=t.quotedStatus,o=e.loggedInUser,i=this._isScheduled(),s=!(!(r||n.length||a||i)&&o);return w.createElement(D.a,{accessibilityLabel:Bt,disabled:s,icon:en,onPress:this._handlePollAdd,size:"normal",style:Qe.toolBarButton,type:"text"})}},{key:"_renderMediaActions",value:function(){var e=this.props.data,t=e.gifMetadata,n=e.media,r=0!==e.mediaTags.length,a=n.some((function(e){return e.mediaFile&&e.mediaFile.isGif}))||this.hasExternalMedia;return this.hasAttachedImage||t||a?w.createElement(I.a,{style:Qe.imageActions},t&&t.url&&t.provider?w.createElement(I.a,{style:Qe.addImageTextPadding},w.createElement(oe.a,{gifUrl:t.url,provider:t.provider})):null,this.hasAttachedImage&&!this._isScheduled()?w.createElement(O.c,{accessibilityLabel:Wt,color:"deepGray",link:"/compose/tweet/tags",style:[Qe.addImageTextContainer,Qe.addImageTextPadding]},r?this._renderTaggedUsers():this._renderTagPeopleLabel()):null,this.hasAttachedImage||a?w.createElement(O.c,{accessibilityLabel:Ut({numberOfImages:n.length}),color:"deepGray",link:{pathname:"/compose/tweet/media",state:{mediaId:n[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:Qe.addImageTextContainer},this._renderAltTextLabel()):null):null}},{key:"_renderTagPeopleLabel",value:function(){return w.createElement(O.c,{color:"deepGray",size:"small"},w.createElement(_t.a,{style:Qe.addImageActionIcon}),Wt)}},{key:"_renderTaggedUsers",value:function(){var e=this.props.data.mediaTags.map((function(e){return{name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str}}));return w.createElement(O.c,{color:"deepGray",size:"small",testID:tt},w.createElement(bt.a,{style:Qe.addImageActionIcon}),w.createElement(fe.a,{users:e}))}},{key:"_renderAltTextLabel",value:function(){var e=this.props.data,t=e.media,n=e.mediaMetadata;return this.hasAttachedAltText?t.length>1?w.createElement(O.c,{color:"deepGray",size:"small",testID:$e},w.createElement(Ct.a,{style:Qe.addImageActionIcon}),Vt({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):w.createElement(O.c,{color:"deepGray",numberOfLines:1,size:"small",testID:$e},w.createElement(Ct.a,{style:Qe.addImageActionIcon}),n&&n[t[0].id.toString()]&&n[t[0].id.toString()].altText):w.createElement(O.c,{color:"deepGray",size:"small",testID:$e},w.createElement(wt.a,{style:Qe.addImageActionIcon}),Ut({numberOfImages:t.length}))}},{key:"_renderCountdownCircle",value:function(){var e=this.props,t=e.data.text,n=e.twitterTextConfigurationVersion,r=Pt.a[n],a=this._getParsedTweet(t).weightedLength;return w.createElement(ft.a,{count:a,formatNumber:this._formatCountdownNumber,maxCount:r.maxWeightedTweetLength,warningCount:260})}},{key:"_renderAddComposerButton",value:function(){var e=this.props,t=e.disableAddTweet,n=e.loggedInUser,r=e.isInline,a=e.onAddComposer,o=this._isEmpty(),i=this._isScheduled(),s=t||o||i||!n;return w.createElement(D.a,{accessibilityLabel:Nt,disabled:s,icon:$t,link:!r||o||s?void 0:"/compose/tweet",onPress:a,size:"small",testID:Je,type:"secondary"})}},{key:"pollChoices",get:function(){return this.props.data.pollActive&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}},{key:"pollDuration",get:function(){return this.props.data.pollActive&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}},{key:"mediaAttachDisabled",get:function(){var e=this.props,t=e.data,n=t.media,r=t.pollActive,a=e.loggedInUser,o=n.length,i=n.some((function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isGif})),s=n.some((function(e){return e.mediaFile&&!(e.mediaFile instanceof le.a)&&e.mediaFile.isVideo}));return 4===o||i||s||r||this.hasExternalMedia||!a}},{key:"hasAttachedImage",get:function(){return this.props.data.media.some((function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isImage}))}},{key:"hasAttachedAltText",get:function(){return this._getNumberOfAltTextEntries()>0}},{key:"hasExternalMedia",get:function(){return this.props.data.media.some((function(e){return!!e.externalMediaDetails}))}}]),n}(w.Component);b()(nn,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0,conversationControlsValue:"all",updateConversationControlsValue:function(){}});var rn=Object(q.a)(nn),an=n("SrIh"),on=n("BLtI"),sn=(n("AxOO"),n("kY28")),cn=n("mN6z"),ln=n("fs1G");function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var un=function(e){var t=e.children;return w.createElement(O.c,{color:"link"},t)},pn=function(e){return"@".concat(e)},hn=function(e){f()(n,e);var t=dn(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"_handleTweetAction",(function(e){e&&e.preventDefault&&e.preventDefault()})),e}return d()(n,[{key:"shouldComponentUpdate",value:function(e){return!Object(cn.a)(this.props,e)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.excludedRecipients,n=e.inReplyToStatus,r=e.loggedInUserId;this._calculatedRecipients=T.a({inReplyToStatus:n,loggedInUserId:r}).filter((function(e){var n=e.id_str;return t.indexOf(n)<0}))}},{key:"render",value:function(){var e=this.props,t=e.dataSaverMode,n=e.shouldDisplayRepliesText,r=e.showParentTweet,a=e.onPress;return w.createElement(I.a,null,r?w.createElement(on.b,{conversationPosition:{isStart:!0},dataSaverMode:t,linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:ln.a,onAvatarClick:this._handleTweetAction,onEntityClick:this._handleTweetAction,onMediaClick:this._handleTweetAction,onReplyContextClick:this._handleTweetAction,replyContext:sn.a.ReplyContextTypes.None,tweet:this.props.inReplyToStatus,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,w.createElement(I.a,{style:fn.replyUsersContainer},w.createElement(lt.a,{avatarCell:r?w.createElement(I.a,{style:fn.conversationLine}):null,avatarCellStyle:fn.conversationLineContainer,cellStyle:fn.repliesTextContainer,style:fn.grid},n?w.createElement(O.c,{accessibilityRole:"button",color:"deepGray",onPress:a,style:r&&fn.repliesMessage},this._renderContextMessage()):null)))}},{key:"_renderContextMessage",value:function(){var e=this.props.inReplyToStatus,t=(e.retweeted_status||e).user;switch(this._calculatedRecipients.length){case 0:return Object(an.a)("Compose reply context should not have 0 recipients"),null;case 1:return w.createElement(E.a.I18NFormatMessage,{$i18n:"e34022a7"},w.createElement(un,null,E.a.b50e199a({userName:pn(t.screen_name)})));case 2:var n=this._calculatedRecipients.find((function(e){return e.id_str!==t.id_str}))||{};return w.createElement(E.a.I18NFormatMessage,{$i18n:"bfd9c99a"},w.createElement(un,null,E.a.f2e4dd37({replyUserName:pn(t.screen_name),otherUserName:pn(n.screen_name)})));case 3:var r=this._calculatedRecipients.filter((function(e){return e.id_str!==t.id_str})),o=a()(r,2),i=o[0],s=o[1];return w.createElement(E.a.I18NFormatMessage,{$i18n:"g7a1000e"},w.createElement(un,null,E.a.eccfddc3({userOneName:pn(t.screen_name),userTwoName:pn(i.screen_name),userThreeName:pn(s.screen_name)})));default:var c=this._calculatedRecipients.find((function(e){return e.id_str!==t.id_str}))||{};return w.createElement(E.a.I18NFormatMessage,{$i18n:"i558c201"},w.createElement(un,null,E.a.h758cd22({userOneName:pn(t.screen_name),userTwoName:pn(c.screen_name),othersCount:this._calculatedRecipients.length-2})))}}}]),n}(w.Component);b()(hn,"defaultProps",{showParentTweet:!0});var fn=A.a.create((function(e){return{replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.xSmall,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.small,paddingTop:e.spaces.xxSmall},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.lightGray,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.xxSmall}}})),mn=hn,gn=n("m3Bd"),vn=n.n(gn),yn=n("Tb0w"),_n=n("ge3j"),bn=n("1YZw"),wn=n("pidX"),Cn=n("0KEI"),Tn=n("zhf3"),Sn=n("RqPI"),xn=n("XOJV"),Rn=n("G6rE"),En=n("AspN"),In=n("oEGd"),On=n("hqKg"),kn=n("P1r1");function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=function(e){return e.parentTweetId||(e.isInline?Tn.a.homeTimeline:Tn.a.modal)},Mn=function(e){return function(t,n){var r=function(e,t){return t.location.state}(0,n);return r?e(r):void 0}},Bn=Object(On.createSelector)((function(e,t){return t.activeUser}),Rn.e.selectLoggedInUser,(function(e,t){return e||t})),jn=function(e,t){return t.parentTweetId||Hn(e,t)||Ln(e,t)},Hn=function(e,t){var n=t.location.query;return n&&"string"==typeof n.in_reply_to?n.in_reply_to:void 0},Ln=Mn((function(e){return e.inReplyToStatusId})),Nn=function(e,t){return t.location.pathname.indexOf("/intent/")>-1},Fn=Mn((function(e){return e.convoCardData})),Un=Mn((function(e){return e.externalMedia})),Vn=Mn((function(e){return e.externalMediaFiles})),Wn=Mn((function(e){return e.defaultText})),zn=function(e,t){var n=Wn(e,t),r=Object(wn.a)(t.location);return(Nn(0,t)||function(e,t){return t.location.pathname.indexOf("/compose/tweet")>-1}(0,t))&&r?r:n},Gn=Mn((function(e){return e.quotedStatusId})),qn=Mn((function(e){return e.quotedStatus})),Kn=Mn((function(e){return e.isSelfThreadReply})),Xn=Mn((function(e){return e.positionCursorAtBeginning})),Zn=Mn((function(e){return e.promotedContent})),Yn=Object(On.createSelector)((function(e,t){var n=Pn(t);return _n.l(e,n)}),zn,(function(e,t){return function(e,t){return t.quotedStatus?t.quotedStatus:qn(e,t)}(e,t)||function(e,t){var n=Gn(e,t);return n?xn.a.selectHydratedMemoized(e,n):void 0}(e,t)}),En.f,(function(e,t,n,r){return e.map((function(e,a){return An(An({},function(e){e.mediaIds;return vn()(e,["mediaIds"])}(e)),{},{media:r.filter((function(t){return e.mediaIds.some((function(e){return e===t.id}))})),quotedStatus:0===a?n:void 0,text:0===a&&t?t:e.text})}))})),Qn=Object(On.createStructuredSelector)({activeComposerIndex:function(e,t){var n=Pn(t);return _n.k(e,n)},activeUser:Bn,composerData:Yn,conversationControlsValue:function(e,t){var n=Pn(t);return _n.m(e,n)},conversationTreeEnabled:kn.h,dataSaverMode:kn.j,excludedRecipients:function(e,t){var n=Pn(t);return _n.n(e,n)},externalMedia:Un,externalMediaFiles:Vn,inReplyToStatus:function(e,t){var n=jn(e,t);return n?xn.a.selectHydrated(e,n):void 0},inReplyToStatusId:jn,isIntentRoute:Nn,isSelfThreadReply:Kn,isSending:function(e,t){var n=Pn(t);return _n.o(e,n)},positionCursorAtBeginning:Xn,loggedInUser:Rn.e.selectLoggedInUser,prepopulatedText:zn,promotedContent:Zn,scheduledFor:_n.p,sendingProgress:_n.q,convoCardData:Fn,userLanguage:Sn.f,quotedStatusId:Gn}),Jn={addComposer:_n.a,addToast:bn.b,createLocalApiErrorHandler:Object(Cn.d)("SCREEN_COMPOSE_V2"),createNudge:_n.d,fetchTweetIfNeeded:xn.a.fetchOneIfNeeded,removeComposer:_n.h,resetDraft:_n.i,retweet:xn.a.retweet,recordNudgeAction:_n.f,recordNudgeResult:_n.g,schedule:_n.j,draftTweet:_n.e,send:_n.r,updateActiveComposerIndex:_n.t,updateConvoCardState:yn.c,updateConversationControlsValue:_n.u,uploadMedia:En.k,addMedia:En.b,processMultipleMedia:En.d,removeMediaUpload:En.e,updateSingleComposer:_n.w,setActiveParentKey:_n.s,copyDataFromInlineComposerToModalComposer:_n.b,copyDataFromInlineReplyComposerToModalComposer:_n.c},$n=Object(In.g)(Qn,Jn),er=n("45mF"),tr=n("c0ZR"),nr=n("W5XZ"),rr=n("MXY2"),ar=n("I8M8"),or=n("eyty"),ir=n("gUG0"),sr=n("ymux"),cr=n("rxPX"),lr=n("0pUJ"),dr=n("HAhZ"),ur=Object(cr.a)().propsFromState((function(){return{tips:dr.c}})).propsFromActions((function(e){var t=e.conversationModule,n=void 0===t?{}:t;return{addTip:dr.a,addToast:bn.b,block:Rn.e.block,createLocalApiErrorHandler:Object(Cn.d)("NUDGE"),hideReply:xn.a.hideReply,mute:lr.a,recordNudgeAction:_n.f,recordNudgeResult:_n.g,unblock:Rn.e.unblock,unmute:Rn.e.unmute,updateDismissCauseConversationTrees:sr.e,updateDismissCause:n&&n.updateDismissCause}})),pr=n("VjLy"),hr=n("95Se"),fr=n("xKuM");function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var gr=E.a.cd33a61c,vr=E.a.g97558f6,yr=E.a.cd80d930,_r=E.a.b0476eb2,br=E.a.j24c37b2,wr=function(e){f()(n,e);var t=mr(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"_handleHideMoreInfo",(function(){(0,e.props.hideEducation)()})),e}return d()(n,[{key:"render",value:function(){var e=this.props.isSmallBreakPoint;return w.createElement(ht.b,{animateMount:!0,duration:"longer",show:!0,type:"fade"},w.createElement(I.a,{style:Cr.moreInfoContainer},w.createElement(fr.a,{leftControl:w.createElement(D.a,{icon:w.createElement(hr.a,{onClick:this._handleHideMoreInfo}),pullLeft:!0,type:"text"}),style:Cr.moreInfoAppBar,title:"More Info"}),w.createElement(I.a,{style:Cr.moreInfoContentContainer},w.createElement(O.c,{color:"normal",size:"large",style:Cr.headlineText,weight:"bold"},gr),w.createElement(O.c,{color:"deepGray",style:Cr.moreInfoFirstDescription},yr),w.createElement(O.c,{color:"normal",size:"large",style:Cr.headlineText,weight:"bold"},vr),w.createElement(O.c,{color:"deepGray",style:Cr.moreInfoSecondDescription},_r),e&&w.createElement(D.a,{onClick:this._handleHideMoreInfo,style:Cr.confirmationButton,type:"neutral"},br))))}}]),n}(w.Component),Cr=A.a.create((function(e){return{headlineText:{marginBottom:e.spaces.xSmall},confirmationButton:{marginVertical:e.spaces.medium},moreInfoAppBar:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},moreInfoContainer:{borderRadius:e.borderRadii.xLarge},moreInfoContentContainer:{padding:e.spaces.medium,paddingBottom:0},moreInfoFirstDescription:{marginBottom:e.spaces.small},moreInfoSecondDescription:{marginBottom:e.spaces.small}}})),Tr=n("euJ+"),Sr=n("1bnC"),xr=n("Qwev"),Rr=n("yrzJ"),Er=n("eb3s"),Ir=n("sgih"),Or=n("P2xQ"),kr=Object.freeze({ReviseOrMute:"ReviseOrMute",ReviseOrBlock:"ReviseOrBlock",ReviseOrHideThenBlock:"ReviseOrHideThenBlock"}),Dr=Object.freeze({BlockUser:"BlockUser",CancelOnBlockUserPrompt:"CancelOnBlockUserPrompt",CancelTweet:"CancelTweet",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",NudgeNotShown:"NudgeNotShown",ReviseTweet:"ReviseTweet",SendTweet:"SendTweet"}),Ar=Object.freeze({BlockUser:"BlockUser",CancelComposer:"CancelComposer",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",SaveTweetToDrafts:"SaveTweetToDrafts",SentTweet:"SentTweet",TweetSentWithoutShowingNudge:"TweetSentWithoutShowingNudge"});function Pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Mr=E.a.ic011119,Br=E.a.f6b7745a,jr=E.a.a75cc0f8,Hr=E.a.a6450e83,Lr=E.a.a9fd20be,Nr=E.a.i2b9632d,Fr=E.a.e133be4e,Ur=E.a.ge5067bb,Vr=E.a.ea626ab3,Wr=E.a.i62a03aa,zr=E.a.h3032750,Gr=E.a.af250eb6,qr=E.a.ib147a39,Kr=E.a.e8ff17e5,Xr=E.a.e3275464,Zr=function(e){f()(n,e);var t=Pr(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"_isNudgeEducationEnabled",x.b.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),b()(p()(e),"state",{loadingSecondaryButton:!1,showMoreInfo:!1}),b()(p()(e),"_renderInnerBody",(function(){var t=e.state.loadingSecondaryButton;return w.createElement(w.Fragment,null,w.createElement(O.c,{align:"center",color:"normal",size:"large",style:Yr.headlineText,weight:"bold"},e._getHeadline()),w.createElement(O.c,{align:"center",color:"deepGray"},e._getDescription()),w.createElement(O.c,{align:"center",color:"link",onClick:e._handleMoreInfo,style:Yr.moreInfoButton},zr),w.createElement(I.a,{style:Yr.buttons},w.createElement(D.a,{onPress:e._handleRevise,style:Yr.button,type:"secondary"},Kr),w.createElement(D.a,{onPress:e._handleSecondaryAction,style:Yr.button,type:"secondary"},t?e._renderSpinner():e._getSecondaryActionLabel()),w.createElement(D.a,{onPress:e._handleSend,style:Yr.button,type:"secondary"},Xr)))})),b()(p()(e),"_renderSpinner",(function(){var t=e.props.nudgeType,n=t===kr.ReviseOrMute?Or.g:t===kr.ReviseOrBlock?Gr:qr;return w.createElement(xr.a,{accessibilityLabel:n,style:Yr.spinner})})),b()(p()(e),"_renderBlockSheet",(function(){var t=e.props.recipient.screen_name,n=w.createElement(Rr.a,{color:"normal",screenName:t}),r=w.createElement(Rr.a,{screenName:t});return w.createElement(Er.a,{cancelButtonLabel:Wr,confirmButtonLabel:Hr,confirmButtonType:"destructive",headline:w.createElement(E.a.I18NFormatMessage,{$i18n:"ja6527ba"},n),onCancel:e._handleBlockCancel,onConfirm:e._handleBlockUser,text:w.createElement(E.a.I18NFormatMessage,{$i18n:"a899eb22"},r)})})),b()(p()(e),"_getDescription",(function(){var t=e.props,n=t.nudgeType,r=t.recipient,a=w.createElement(Rr.a,{screenName:r.screen_name});switch(n){case kr.ReviseOrMute:return w.createElement(E.a.I18NFormatMessage,{$i18n:"d98723c4"},a);case kr.ReviseOrBlock:return w.createElement(E.a.I18NFormatMessage,{$i18n:"fa1a3797"},a);case kr.ReviseOrHideThenBlock:return w.createElement(E.a.I18NFormatMessage,{$i18n:"fa2ffaa7"},a);default:return null}})),b()(p()(e),"_getHeadline",(function(){switch(e.props.nudgeType){case kr.ReviseOrMute:return Mr;case kr.ReviseOrBlock:return Br;case kr.ReviseOrHideThenBlock:return jr;default:return null}})),b()(p()(e),"_getSecondaryActionLabel",(function(){switch(e.props.nudgeType){case kr.ReviseOrMute:return Or.f;case kr.ReviseOrBlock:return Hr;case kr.ReviseOrHideThenBlock:return Ur;default:return null}})),b()(p()(e),"_handleSecondaryAction",(function(){var t=e.props.nudgeType;switch(e.setState({loadingSecondaryButton:!0}),t){case kr.ReviseOrMute:e._handleMuteUser();break;case kr.ReviseOrBlock:e._handleBlockUser();break;case kr.ReviseOrHideThenBlock:e._handleHideReplyThenBlock();break;default:return}})),b()(p()(e),"_handleSend",(function(){var t=e.props.onSend;e._recordNudgeAction(Dr.SendTweet),t()})),b()(p()(e),"_handleBlockCancel",(function(){var t=e.props,n=t.onDiscard;t.showBlockModal&&(e._recordNudgeAction(Dr.CancelOnBlockUserPrompt),e._handleHideReply()),n()})),b()(p()(e),"_handleBlockUser",(function(){var t=e.props,n=t.addToast,r=t.block,a=t.onDiscard,o=t.recipient,i=t.showBlockModal,s=t.unblock;e._recordNudgeAction(Dr.BlockUser),r(o.id_str).then((function(){i&&e._handleHideReply(),e._recordNudgeResult(Ar.BlockUser),a(),n({actionLabel:Fr,text:Lr,onAction:function(){s(o.id_str).then((function(){n({text:Nr})})).catch(e._createApiErrorHandler())}})})).catch(e._createApiErrorHandler())})),b()(p()(e),"_handleMuteUser",(function(){var t=e.props,n=t.addToast,r=t.mute,a=t.onDiscard,o=t.recipient,i=t.unmute;e._recordNudgeAction(Dr.MuteUser),r(o.id_str).then((function(){e._recordNudgeResult(Ar.MuteUser),a(),n({actionLabel:Sr.a,text:Object(Or.b)(o.screen_name),onAction:function(){i(o.id_str).then((function(){n({text:Object(Or.d)(o.screen_name)})})).catch(e._createApiErrorHandler())}})})).catch(e._createApiErrorHandler())})),b()(p()(e),"_handleHideReplyThenBlock",(function(){var t=e.props,n=t.addTip,r=t.tips,a=t.hidePopover,o=t.setShowBlockModal,i=t.setShowHideReplyEducation,s=t.showHideReplyEducation;if(a(),s)i(!1);else if(!r.hide_reply_author_education)return n(b()({},"hide_reply_author_education",!0)),void i(!0);o(!0)})),b()(p()(e),"_handleHideReply",(function(){var t=e.props,n=t.addToast,r=t.conversationId,a=t.conversationTreeEnabled,o=t.hideReply,i=t.inReplyToStatusId,s=t.updateDismissCause,c=t.updateDismissCauseConversationTrees;e._recordNudgeAction(Dr.HideReply),o(i,{conversation_id:r}).then((function(){e._recordNudgeResult(Ar.HideReply),a?c({entryId:"module-tweet-".concat(i),feedbackKeys:[Tr.d]}):s&&s({entryId:"tweet-".concat(i),feedbackKeys:[Tr.d]}),n({text:Vr})})).catch(e._createApiErrorHandler())})),b()(p()(e),"_handleRevise",(function(){var t=e.props.onRevise;e._recordNudgeAction(Dr.ReviseTweet),t()})),b()(p()(e),"_handleCancelHideReplyEducation",(function(){(0,e.props.setShowHideReplyEducation)(!1),e._handleRevise()})),b()(p()(e),"_handleBeforeWindowUnload",(function(){e._recordNudgeAction(Dr.CloseApp),e._recordNudgeResult(Ar.CloseApp)})),b()(p()(e),"_handleMoreInfo",(function(){e.setState({showMoreInfo:!0})})),b()(p()(e),"_hideMoreInfo",(function(){e.setState({showMoreInfo:!1})})),b()(p()(e),"_recordNudgeAction",(function(t){var n=e.props,r=n.nudgeId;(0,n.recordNudgeAction)({nudgeId:r,nudgeActionType:t})})),b()(p()(e),"_recordNudgeResult",(function(t){var n=e.props,r=n.nudgeId;(0,n.recordNudgeResult)({nudgeId:r,nudgeResultType:t})})),b()(p()(e),"_createApiErrorHandler",(function(){return e.props.createLocalApiErrorHandler({showToast:!0})})),e}return d()(n,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this._handleBeforeWindowUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this._handleBeforeWindowUnload)}},{key:"render",value:function(){var e=this.props,t=e.screenWidth,n=e.showBlockModal,r=e.showHideReplyEducation,a=this.state.showMoreInfo;if(n)return this._renderBlockSheet();if(r)return w.createElement(pr.a,{onCancel:this._handleCancelHideReplyEducation,onConfirm:this._handleHideReplyThenBlock});var o=t<A.a.theme.breakpoints.small;return this._isNudgeEducationEnabled?o?w.createElement(Ir.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:[Yr.container,Yr.smallBreakPointContainer,a&&Yr.noPadding],type:"bottom",withMask:!0},a?w.createElement(wr,{hideEducation:this._hideMoreInfo,isSmallBreakPoint:!0}):this._renderInnerBody()):w.createElement(w.Fragment,null,a&&w.createElement(wr,{hideEducation:this._hideMoreInfo}),w.createElement(I.a,{style:Yr.container},!a&&this._renderInnerBody())):w.createElement(Ir.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:Yr.container,type:"center",withMask:!0},this._renderInnerBody())}}]),n}(w.Component),Yr=A.a.create((function(e){return{container:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.xLarge,padding:e.spaces.medium,paddingBottom:e.spaces.xSmall},smallBreakPointContainer:{borderRadius:e.borderRadii.none},noPadding:{padding:0},headlineText:{marginBottom:e.spaces.xSmall},buttons:{marginTop:e.spaces.xSmall,width:"100%"},button:{width:"100%",marginBottom:e.spaces.small},moreInfoButton:{marginTop:e.spaces.xxSmall},spinner:{marginTop:"5px"}}})),Qr=ur(Zr),Jr=n("OiMc"),$r=n("cHvH");function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ta,na=function(e){f()(n,e);var t=ea(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"state",{nudgeDismissed:!1,showBlockModal:!1,showHideReplyEducation:!1,shouldHidePopover:!1}),b()(p()(e),"_isNudgeEducationEnabled",x.b.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),b()(p()(e),"_renderNudge",(function(){var t=e.props,n=t.conversationTreeEnabled,r=t.location,a=t.inReplyToStatus,o=t.nudgeId,i=t.nudgeType,s=t.onDiscard,c=t.screenWidth,l=e.state,d=l.showBlockModal,u=l.showHideReplyEducation,p=null==a?void 0:a.conversation_id_str,h=r.state&&r.state.previousPath&&r.state.previousPath.split("/status/").slice(-1)[0].split("/")[0];return i&&o&&a&&a.id_str?w.createElement(Qr,{conversationId:p,conversationModule:h&&e._getConversationModule(h,n),conversationTreeEnabled:n,hidePopover:e._hidePopover,inReplyToStatusId:a.id_str,nudgeId:o,nudgeType:i,onDiscard:s,onRevise:e._handleDismissNudge,onSend:e._handleSend,recipient:a.user,screenWidth:c,setShowBlockModal:e.setShowBlockModal,setShowHideReplyEducation:e.setShowHideReplyEducation,showBlockModal:d,showHideReplyEducation:u}):null})),b()(p()(e),"_getConversationModule",Object(Tt.a)((function(e,t){return Object(sr.a)({focalTweetId:e,conversationTreeEnabled:t})}))),b()(p()(e),"_handleSend",(function(){var t=e.props.onSend;e._handleDismissNudge(),t()})),b()(p()(e),"_handleDismissNudge",(function(t){var n=e.props,r=n.clearNudgeType,a=n.nudgeType,o=n.screenWidth;t&&t.stopPropagation(),e._isNudgeEducationEnabled&&o>=A.a.theme.breakpoints.small&&a&&e.setState({nudgeDismissed:!0}),r()})),b()(p()(e),"_hidePopover",(function(){e.setState({shouldHidePopover:!0})})),b()(p()(e),"setShowHideReplyEducation",(function(t){e.setState({showHideReplyEducation:t})})),b()(p()(e),"setShowBlockModal",(function(t){e.setState({showBlockModal:t})})),e}return d()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.nudgeType,r=e.screenWidth,a=this.state,o=a.nudgeDismissed,i=a.shouldHidePopover;return this._isNudgeEducationEnabled&&r>=A.a.theme.breakpoints.small&&!i?w.createElement(Jr.a,{disabled:o,onDismiss:this._handleDismissNudge,renderContent:this._renderNudge,visibilityBehavior:n?Jr.a.VISIBILITY_BEHAVIOR.forceVisible:Jr.a.VISIBILITY_BEHAVIOR.forceHidden,withArrow:!0,withFixedPosition:!0,withMask:!!n},t):w.createElement(w.Fragment,null,t,this._renderNudge())}}]),n}(w.Component),ra=function(e){return w.createElement($r.a,null,(function(t){var n=t.screenWidth;return w.createElement(na,i()({},e,{screenWidth:n}))}))},aa=n("7myi"),oa=n("7nmT"),ia=n.n(oa),sa=n("vbWy"),ca=n("Rp9C"),la=n("k49u"),da=E.a.i859a9d3,ua=E.a.a7478929,pa=E.a.adf527d2,ha=E.a.b25c5b2a,fa=E.a.cc85b9f5,ma=E.a.a3f10d61,ga=E.a.d74da9b8,va=E.a.c3ebec63,ya=E.a.b6266b34,_a=E.a.a59566d7,ba=E.a.g30d7ec5,wa=E.a.d484fca9,Ca=E.a.c51ba396,Ta=E.a.ef2fa90b,Sa=(ta={defaultToast:{text:pa}},b()(ta,la.a.OverStatusUpdateLimit,{toast:{text:ua,actionLabel:da,actionLink:"https://support.twitter.com/articles/15364"}}),b()(ta,la.a.DuplicateStatusError,{toast:{text:ha}}),b()(ta,la.a.CurrentUserSuspended,{toast:{text:fa}}),b()(ta,la.a.InReplyToTweetNotFound,{toast:{text:ma}}),b()(ta,la.a.MentionLimitInTweetExceeded,{toast:{text:ga}}),b()(ta,la.a.UrlLimitInTweetExceeded,{toast:{text:va}}),b()(ta,la.a.HashtagLimitInTweetExceeded,{toast:{text:ya}}),b()(ta,la.a.CashtagLimitInTweetExceeded,{toast:{text:_a}}),b()(ta,la.a.HashtagLengthLimitInTweetExceeded,{toast:{text:ba}}),b()(ta,la.a.AttachmentTypesLimitInTweetExceeded,{toast:{text:wa}}),b()(ta,la.a.StatusMalwareError,{toast:{text:Ca,actionLabel:da,actionLink:"https://support.twitter.com/articles/90491"}}),b()(ta,la.a.StatusTooLongError,{toast:{text:Ta}}),b()(ta,"showToast",!0),ta),xa=n("N5qz"),Ra="tweetButton",Ea="tweetButtonInline",Ia=n("aITJ"),Oa=n("sCk0"),ka=n("4zmP"),Da=n("JYMr"),Aa=n("7N4s"),Pa=n("rziq"),Ma=n("jTgF"),Ba=n("3A2y"),ja=n("s1N3"),Ha=n("4FGy"),La=n("+d3d"),Na=n("sXY3");function Fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Wa=E.a.dad5a4b8,za=E.a.e65aed64,Ga=E.a.d8222374,qa=E.a.j890123a,Ka=E.a.bb01231c,Xa=E.a.d4ab68e2,Za=E.a.d8af8a4c,Ya=E.a.d09d4c05,Qa=E.a.i2209530,Ja=E.a.bf9b89e4,$a=E.a.f277e949,eo=E.a.b551cd22,to=E.a.f026a7fa,no=E.a.a5d4fda0,ro=E.a.ib067d6a,ao=C.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,oo=function(e){f()(n,e);var t=Va(n);function n(e,r){var a,o;return c()(this,n),o=t.call(this,e,r),b()(p()(o),"_getParentKey",(function(){var e=o.props,t=e.isInline;return e.parentTweetId||(t?Tn.a.homeTimeline:Tn.a.modal)})),b()(p()(o),"_updateSingleComposer",(function(e,t){return(0,o.props.updateSingleComposer)({updates:e,index:t,parentKey:o._getParentKey()})})),b()(p()(o),"_resetDraft",(function(){return(0,o.props.resetDraft)(o._getParentKey())})),b()(p()(o),"_syncTexts",(function(){var e=o.props.composerData,t=o.state.textMap;e.forEach((function(e,n){var r=t[e.key];"string"==typeof r&&r!==e.text&&o._updateSingleComposer({text:r},n)}))})),b()(p()(o),"_hasGif",(function(e){return e.gifMetadata||e.media.some((function(e){return e.mediaFile&&e.mediaFile.isGif}))})),b()(p()(o),"_hasPhoto",(function(e){return e.media&&e.media.some((function(e){return e.mediaFile&&e.mediaFile.isImage}))})),b()(p()(o),"_hasVideo",(function(e){return e.media&&e.media.some((function(e){return e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif}))})),b()(p()(o),"_handleAnimateComplete",(function(){var e=o.props,t=e.activeComposerIndex,n=e.onHandleAppBarHeight,r=ia.a.findDOMNode(o._composerRefs[t]);if(r instanceof window.Element){var a=r.getBoundingClientRect(),i=a.top,s=a.bottom,c=Math.max(i,window.scrollY);if(c<window.pageYOffset||s>window.innerHeight){var l=n?c-n()-14:c-14,d=Math.max(l,0);window.requestAnimationFrame((function(){ao?window.scrollTo({top:d,left:0,behavior:"smooth"}):window.scrollTo(0,d)}))}}})),b()(p()(o),"_handleFetchTweetIfNeeded",(function(){var e=o.props,t=e.createLocalApiErrorHandler,n=e.inReplyToStatus,r=e.inReplyToStatusId,a=e.fetchTweetIfNeeded,i=e.quotedStatus,s=e.quotedStatusId;!n&&r&&a(r).catch(t(nr.a)),!i&&s&&a(s).catch(t(nr.a))})),b()(p()(o),"_blockHistory",(function(e,t){var n=o.props.isInline,r=!n&&/unsent/.test(e.pathname),a=!n&&!/\/compose\/tweet\/?$/.test(e.pathname);return o.shouldShowDiscardConfirmation&&"POP"===t&&a?(o.setState({showDiscardTweetConfirmation:!0}),!1):o._canSaveDraft&&r&&"PUSH"===t?o.shouldShowDiscardConfirmation?(o.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:r}),!1):(o._resetDraft(),!0):!o.shouldShowBackgroundSendConfirmation||"POP"!==t||!a||(o._cancelAllMediaUploads(),!1)})),b()(p()(o),"_getKeyCommandHandlers",(function(){return o.state.typeaheadActive?o._keyCommandHandlersForActiveTypeahead:o._keyCommandHandlers})),b()(p()(o),"handleTweetOrRetweet",(function(){if(o._scribe({section:"composition",element:"send_tweet",action:"click"}),o._areComposersValid())return o.isRetweet?o._handleRetweet():o._handleTweet()})),b()(p()(o),"_render",(function(e){var t,n,r=o.props,a=r.activeUser,s=r.addComposer,c=r.addToast,l=r.composeHeader,d=r.composerData,u=r.conversationControlsValue,p=r.conversationTreeEnabled,h=r.copyDataFromInlineComposerToModalComposer,f=r.customizePropsForSingleComposerItem,m=r.history,g=r.isInline,v=r.isSending,y=r.isSelfThreadReply,_=r.inReplyToStatus,b=r.location,C=r.parentTweetId,T=r.positionCursorAtBeginning,S=r.scheduledFor,x=r.richTextInputContext,R=r.typeaheadWrapper,E=r.userLanguage,O=r.windowWidth,k=o.context.isModal,A=o.state,P=A.errorMessage,M=A.focused,B=A.nudgeId,j=A.nudgeType,H=A.showDiscardTweetConfirmation,L=A.typeaheadActive,N=A.shouldDisableButton,F=!k&&L,U=g?0:o.props.activeComposerIndex,V=F||g?[d[U]]:d,W=o._areComposersValid(),z=o.hasNonCompliantQuote&&o.isRetweet,G=g?I.a:Oa.a,q=g?{}:{onAnimateComplete:k?void 0:o._handleAnimateComplete},K=["community","by_invitation"].includes(null==_||null===(t=_.conversation_control)||void 0===t?void 0:t.policy)&&(null==_||null===(n=_.conversation_control)||void 0===n?void 0:n.invite_via_mention);return w.createElement(I.a,{ref:e?o._setHiddenRootRef:o._setRootRef,style:[C?io.rootInlineReply:io.root,e&&io.hidden]},g?o._renderProgressBar():null,P&&w.createElement(I.a,{style:io.inlineCallout},w.createElement(ka.a,{action:P.actionLabel&&P.actionLink?{label:P.actionLabel,link:P.actionLink}:void 0,text:P.text,type:"danger"})),w.createElement(I.a,{onFocus:o._handleFocus,style:[io.content,C&&io.contentInlineReply]},_?o._renderReplyContext(e):null,l,w.createElement(G,q,V.map((function(t,n){var r=Object(pe.h)(t.scheduledFor),l=d.indexOf(t),A=f(t,n,V),P=w.createElement(ra,{clearNudgeType:o.clearNudgeType,conversationTreeEnabled:p,inReplyToStatus:_,location:b,nudgeId:B,nudgeType:j,onDiscard:o._handleDismissComposerFromNudge,onSend:o._handleSendTweet},k||g?w.createElement(D.a,{disabled:N||!W||z,onPress:o.handleTweetOrRetweet,size:"normal",style:io.inlineSendButton,testID:k?Ra:Ea,type:"primary"},Object(rr.a)({inReplyToStatus:!!_,isSelfThreadReply:!!y,isQuoteTweet:!!o.isQuoteTweet,isRetweet:!!o.isRetweet,isScheduled:!!r,isThread:o.isThread})):null),H=o._getSingleComposerDataWithLatestText(t);return w.createElement(I.a,{key:t.key},w.createElement(rn,i()({addToast:c,additionalToolbarContent:P,autoFocus:!!C&&M,conversationControlsValue:u,data:H,disableAddTweet:d.length>=25,editable:!v&&!!a,hidePollAndScheduling:g&&xa.a.isOneColumnSquishedLayout(O),history:m,index:l,isActive:l===U&&!v,isExpanded:0!==n||o._shouldBeExpanded(e),isInline:g,isInlineReply:!!C,isLast:g||l===d.length-1,isReply:!!_||!!C,isSelfThreadReply:!!y,keyCommandHandlers:o._getKeyCommandHandlers(),loggedInUser:a,onAddComposer:g?h:s,onFilesAdded:o._handleAddMediaFiles(l),onFocus:o._handleComposerFocus,onRemoveComposer:o._handleRemoveComposer,onRemoveMedia:o._handleMediaRemove,onTextChange:o._handleTextChange,onTextInputBlur:o._handleTextOnBlur(H.key,n),onTypeaheadStateChange:o._handleTypeaheadStateChange,positionCursorAtBeginning:!!T,ref:o._setComposerRef(l),richTextInputContext:x,scheduledFor:S,setActiveParentKey:o._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadWrapper:R,updateConversationControlsValue:o._updateConversationControlsValue,updateSingleComposer:o._updateSingleComposer,userLanguage:E,withFlexibleParticipation:K},A)))}))),H?o._canSaveDraft?w.createElement(Er.a,{cancelButtonLabel:Xa,confirmButtonLabel:Qa,headline:Za,onCancel:o._handleConfirmDiscardTweet,onConfirm:o._handleDraftTweet,onMaskClick:o._handleCancelDiscardTweet,text:Ya}):w.createElement(Er.a,{confirmButtonLabel:Xa,confirmButtonType:"destructive",headline:o.isThread?qa:Ga,onCancel:o._handleCancelDiscardTweet,onConfirm:o._handleConfirmDiscardTweet,text:Ka}):null,w.createElement(I.a,{style:[v&&io.mask]})))})),b()(p()(o),"_renderReplyContext",(function(e){var t=o.props,n=t.activeUser,r=t.dataSaverMode,a=t.excludedRecipients,i=t.isInline,s=t.isSelfThreadReply,c=t.inReplyToStatus;if(o._shouldBeExpanded(e))return w.createElement(mn,{dataSaverMode:r,excludedRecipients:a,inReplyToStatus:c,key:a.join(),loggedInUserId:n?n.id_str:void 0,onPress:o._handleViewRecipients,shouldDisplayRepliesText:!s,showParentTweet:!i})})),b()(p()(o),"_setRootRef",(function(e){var t=ia.a.findDOMNode(e);t&&t instanceof Element&&(o._root=t)})),b()(p()(o),"_setHiddenRootRef",(function(e){var t=ia.a.findDOMNode(e);t&&t instanceof Element&&(o._hiddenExpandedRoot=t)})),b()(p()(o),"_handleTweet",(function(){var e=o.props.composerData[0].scheduledFor;o.setState({errorMessage:void 0}),e?Object(pe.h)(e)&&o._handleScheduleTweet():o._checkToxicAndSendTweet()})),b()(p()(o),"_handleTweetError",(function(e,t){return function(n){var r=o.props,a=r.analytics,i=r.createLocalApiErrorHandler;if(Object(Ma.d)(n)&&n.code===ar.b.CANCELED)return a.scribeAction(e),Promise.resolve();var s=Object(Ma.b)(n);if(s)return o.setState({errorMessage:s}),Promise.resolve();i(Ua({},t||Object(er.a)(void 0,!1)))(n),o.setState({errorMessage:{text:no}})}})),b()(p()(o),"_handleScheduleTweet",(function(){var e=o.props,t=e.addToast,n=e.composerData,r=e.excludedRecipients,a=e.inReplyToStatus,i=e.schedule,s=o._getSingleComposerDataWithLatestText(n[0]);i({excludedRecipients:r,inReplyToStatus:a,scheduleData:s}).then((function(e){o.setState({tweetsSentOrScheduled:!0});var r=Object(pe.c)(s.scheduledFor);if(r){var a=Object(pe.b)(r),i=Object(pe.i)(r),c=eo({scheduleDate:a,scheduleTime:i});t({text:c,actionLink:"/compose/tweet/unsent/scheduled",actionLabel:$a}),o._scribeTweetSent(n[0],Ua(Ua({},e),{},{id_str:e.scheduled_id_str}),!0)}o._updateConvoCardState(),o._close()})).catch(o._handleTweetError("schedule_tweet_cancel"))})),b()(p()(o),"_handleDraftTweet",(function(){var e=o.props,t=e.addToast,n=e.composerData,r=e.draftTweet,a=e.excludedRecipients,i=e.inReplyToStatus,s=o._getSingleComposerDataWithLatestText(n[0]);o._recordNudgeResult(Ar.SaveTweetToDrafts),r({excludedRecipients:a,inReplyToStatus:i,draftData:s}).then((function(e){o.setState({showDiscardTweetConfirmation:!1}),t({text:Ja,actionLink:"/compose/tweet/unsent/drafts",actionLabel:$a}),o._scribeTweetSent(n[0],Ua(Ua({},e),{},{id_str:e.draft_id_str}),!1,!0),o._updateConvoCardState(),o._close()})).catch(o._handleTweetError("draft_tweet_cancel"))})),b()(p()(o),"_handleSendTweet",(function(){var e=o.props,t=e.addToast,n=e.analytics,r=e.composeSemanticCoreId,a=e.conversationControlsValue,i=e.excludedRecipients,s=e.history,c=e.inReplyToStatus,l=e.isSelfThreadReply,d=e.location,u=e.activeUser,p=e.promotedContent,h=e.send,f=o.state.nudgeId,m=o.props.composerData.map((function(e){return o._getSingleComposerDataWithLatestText(e)})),g=Object(pe.c)(m[0].scheduledFor);if(g){var v=Object(pe.b)(g),y=Object(pe.i)(g),_=eo({scheduleDate:v,scheduleTime:y});return t({text:_,actionLink:"",actionLabel:$a}),void o._close()}i.length>0&&n.scribe({element:"mentions",action:"edited"}),o._conversationControlsCreationEnabled&&("community"===a?n.scribe({action:"send_community_tweet"}):"by_invitation"===a&&n.scribe({action:"send_mentioned_tweet"}));var b=m.map((function(e,t){return Ua(Ua({},e),{},{pollChoices:o._composerRefs[t]?o._composerRefs[t].pollChoices:void 0,pollDuration:o._composerRefs[t]?o._composerRefs[t].pollDuration:void 0})}));h(Ua(Ua({},o._isNudgeTweetypieEnabled&&o._isSecondaryDegreeNudge?{nudge_enabled:!0,nudge_types:["ReviseOrBlock","ReviseOrMute","ReviseOrHideThenBlock"],nudge_testing_keyword_enabled:!0,previous_nudge_id:f}:{}),{},{sendData:b,conversationControlsValue:a,excludedRecipients:i,inReplyToStatus:c,isSelfThreadReply:l,promotedContent:p,composeSemanticCoreId:r})).then((function(e){o.setState({tweetsSentOrScheduled:!0}),e.map((function(e,t){return o._scribeTweetSent(m[t],e)})),e.length>1&&o._scribeThreadSent(m,e,"thread_send_success");var n=o.props.onSent,r=e.length>1?za:Wa;if(t({text:r,actionLink:"/".concat(u?u.screen_name:"i","/status/").concat(e[0].id_str),actionLabel:$a}),o._isNudgeEnabled&&f){var a=e[0].id_str;o._isShowNudgeEnabled?o._recordNudgeResult(Ar.SentTweet,a):o._recordNudgeResult(Ar.TweetSentWithoutShowingNudge,a)}o._updateConvoCardState(),o._close(),n&&n({sentTweets:e,inReplyToStatus:c})})).catch((function(e){var t,r=e.sentTweets,a=void 0===r?[]:r,i=Array.isArray(e.errors)&&(null===(t=e.errors[0])||void 0===t?void 0:t.code),c=null==e?void 0:e.url,l=null==e?void 0:e.status,u={message:e.type,event_info:i?"".concat(i):void 0,status_code:l,url:c};if(!o._isNudgeTweetypieEnabled||439!==i)throw a.map((function(e,t){return o._scribeTweetSent(m[t],e)})),Object(Ma.d)(e)&&e.code===ar.b.CANCELED||n.scribe({action:"send_tweet_failure",data:u}),m.length>1&&o._scribeThreadSent(m,a,"thread_send_failure"),a.length&&s.replace({pathname:d.pathname,state:Ua(Ua({},Object(Ba.a)(d.state||{},"quotedStatus")),{},{inReplyToStatusId:a[a.length-1].id_str,isSelfThreadReply:!0})}),e;var p,h=null===(p=e.errors[0])||void 0===p?void 0:p.nudge,f=h.id,g=h.nudge_type,v=g.charAt(0).toUpperCase()+g.slice(1);o.setState({nudgeType:v,nudgeId:f})})).catch(o._handleTweetError("send_tweet_cancel",Sa))})),b()(p()(o),"_checkToxicAndSendTweet",(function(){var e=o.props,t=e.activeUser,n=e.composerData,r=e.createNudge,a=e.inReplyToStatus,i=e.isSelfThreadReply,s=o.state.hasNudged,c=a&&a.entities.user_mentions&&a.entities.user_mentions.some((function(e){return e.screen_name===(null==t?void 0:t.screen_name)})),l=o._getSingleComposerDataWithLatestText(n[0]).text;o._isSecondaryDegreeNudge=!(i||!c||!r||!l),!o._isNudgeTweetypieEnabled&&o._isNudgeEnabled&&!s&&o._isSecondaryDegreeNudge?(o.setState({shouldDisableButton:!0}),o._checkToxicWithTimeout(l).then((function(e){e.showNudge||o._handleSendTweet()})).finally((function(){o.setState({shouldDisableButton:!1})}))):o._handleSendTweet()})),b()(p()(o),"_makeTimeout",(function(){return new Promise((function(e,t){return setTimeout(e,1500)}))})),b()(p()(o),"_checkToxicWithTimeout",(function(e){var t=o.props,n=t.inReplyToStatus,r=t.location;return Promise.race([o._checkToxic(e),o._makeTimeout()]).then((function(e){var t,a,i,s,c,l=null==e||null===(t=e.create_nudge)||void 0===t||null===(a=t.nudge)||void 0===a||null===(i=a.nudge_type)||void 0===i?void 0:i.__typename,d=null==e||null===(s=e.create_nudge)||void 0===s||null===(c=s.nudge)||void 0===c?void 0:c.id;o.setState({nudgeId:d});var u=null==n?void 0:n.user.muting,p=l===kr.ReviseOrMute&&u,h=r.state&&r.state.previousPath.includes("/hidden"),f=l===kr.ReviseOrHideThenBlock&&h;if(l){if(x.b.isTrue("responsive_web_second_degree_replies_nudge_show_enabled"),x.b.isTrue("responsive_web_second_degree_replies_nudge_get_enabled"),o._isShowNudgeEnabled&&!p&&!f)return o.setState({nudgeType:l,hasNudged:!0}),{showNudge:!0};o._recordNudgeAction(Dr.NudgeNotShown)}return{}})).catch((function(){return{}}))})),b()(p()(o),"_checkToxic",(function(e){var t=o.props,n=t.createNudge,r=t.inReplyToStatusId,a=t.parentTweetId,i=void 0===a?r:a,s=t.inReplyToStatus;return n(e,i,null==s?void 0:s.conversation_id_str)})),b()(p()(o),"clearNudgeType",(function(){o.setState({nudgeType:void 0})})),b()(p()(o),"_setActiveParentKey",(function(){(0,o.props.setActiveParentKey)(o._getParentKey())})),b()(p()(o),"_scribeTweetSent",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.scheduledTweetId?"schedule_edit_":"schedule_",i=e.draftTweetId?"draft_edit_":"draft_",s=r?i:n?a:"send_",c={items:[ca.a.getTweetItem(t)]},l=e.pollActive&&e.pollValid,d=e.mediaMetadata&&Object.values(e.mediaMetadata).some((function(e){return!!e})),u=o.props.inReplyToStatus||o.props.inReplyToStatusId,p=o.props.isInline?"inline_reply":"tweet_box_dialog";if(o._scribe({action:"".concat(s,"tweet")},c),r||!e.draftTweetId||e.scheduledTweetId||o._scribe({action:"".concat(s,"draft_tweet")},c),o.isQuoteTweet&&o._scribe({action:"retweet_with_comment"},c),u&&o._scribe({component:p,action:"".concat(s,"reply")},c),l&&o._scribe({action:"".concat(s,"poll_tweet")},c),d&&o._scribe({action:"".concat(s,"photo_tweet_with_alt_text")},c),o._hasPhoto(e)&&o._scribe({action:"".concat(s,"photo_tweet")},c),o._hasVideo(e)&&o._scribe({action:"".concat(s,"video_tweet")},c),e.gifMetadata){var h=ca.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);o._scribe({element:"remote",action:"".concat(s,"gif_tweet")},{items:[h]})}else o._hasGif(e)&&o._scribe({element:"local",action:"".concat(s,"gif_tweet")},c)})),b()(p()(o),"_scribeThreadSent",(function(e,t,n){var r=o.props.inReplyToStatus,a={items:[ca.a.getSendThreadItem(e,t.length,!!r)]};o._scribe({action:n},a)})),b()(p()(o),"_scribeRetweet",(function(e){var t={items:[ca.a.getTweetItem(e)]};o._scribe({action:"retweet"},t)})),b()(p()(o),"_handleRetweet",(function(){var e=o.props,t=e.composerData,n=e.createLocalApiErrorHandler,r=e.onSent,a=e.retweet,i=t[0].quotedStatus;i&&(o._scribeRetweet(i),a(i.id_str,{}).then((function(e){o.setState({tweetsSentOrScheduled:!0}),o._close(),r&&r({sentTweets:e?[e]:[]})}),n(sa.a)))})),b()(p()(o),"handleDismissComposer",(function(){o.shouldShowDiscardConfirmation?o.setState({showDiscardTweetConfirmation:!0}):o.shouldShowBackgroundSendConfirmation?o._cancelAllMediaUploads():o._close()})),b()(p()(o),"_handleDismissComposerFromNudge",(function(){o.shouldShowBackgroundSendConfirmation?o._cancelAllMediaUploads():o._close()})),b()(p()(o),"_cancelAllMediaUploads",(function(){o.props.composerData.forEach((function(e){return e.media.forEach((function(e){return e.uploading&&e.uploader&&e.uploader.cancel()}))}))})),b()(p()(o),"_handleConfirmDiscardTweet",(function(){var e=o.props.analytics,t=o._canSaveDraft?"draft":"send";o.setState({showDiscardTweetConfirmation:!1}),o._recordNudgeResult(Ar.CancelComposer),o._close(),e.scribeAction("".concat(t,"_tweet_discard"))})),b()(p()(o),"_handleCancelDiscardTweet",(function(){o.setState({showDiscardTweetConfirmation:!1},(function(){o._restoreFocusToActiveComposer()}))})),b()(p()(o),"_restoreFocusToActiveComposer",(function(){var e=o.props.activeComposerIndex;void 0!==e&&o._composerRefs[e]&&o._composerRefs[e].focus()})),b()(p()(o),"_close",(function(){var e=o.props,t=e.history,n=e.isSending,r=e.onCloseComposer;n||(o._resetDraft(),window.Windows&&Object(ir.a)().then((function(e){return e.default.shareCompletedCallback()}))),o.state.navigatingToOutbox?o._canSaveDraft?t.push("/compose/tweet/unsent/drafts"):t.push("/compose/tweet/unsent/scheduled"):r&&r()})),b()(p()(o),"_handleComposerFocus",(function(e){o._composerRefs[e]?o.props.updateActiveComposerIndex(e):setTimeout((function(){o._restoreFocusToActiveComposer()}),0)})),b()(p()(o),"_handleFocus",(function(){var e=o.props.getTweetHeight;o.state.focused||o.setState({focused:!0},(function(){if(e&&o._hiddenExpandedRoot){var t=o._hiddenExpandedRoot.getBoundingClientRect().height+e();o._handleHeightChanged(t)}}))})),b()(p()(o),"_handleHeightChanged",(function(e){var t=o.props,n=t.onHeightChanged,r=t.onAnimationStarted,a=t.onAnimationEnded;r&&r("none"),n&&n(e),window.requestAnimationFrame((function(){a&&a()}))})),b()(p()(o),"_handleTypeaheadStateChange",(function(e){o.setState({typeaheadActive:e})})),b()(p()(o),"_handleRemoveComposer",(function(){var e=o.props,t=e.activeComposerIndex,n=e.composerData,r=e.history,a=e.location,i=e.removeComposer;0===t&&n[0].quotedStatus&&r.replace({pathname:a.pathname,state:Object(Ba.a)(a.state||{},"quotedStatus")}),i()})),b()(p()(o),"_handleViewRecipients",(function(){var e=o.props,t=e.excludedRecipients,n=e.history,r=e.inReplyToStatus;o._setActiveParentKey(),n.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:t,inReplyToStatus:r}})})),b()(p()(o),"_handleTextChange",(function(e,t){var n=o.state.textMap,r=o.props,a=r.activeComposerIndex,i=r.isInline,s=r.setValidity;if(o.setState({textMap:Ua(Ua({},n),{},b()({},t,e))},(function(){s&&s(o._areComposersValid())})),Ia.a.isIOS()){var c=i?0:a;o._updateSingleComposer({text:e},c)}})),b()(p()(o),"_handleTextOnBlur",Object(Tt.a)((function(e,t){return function(){var n=o.state,r=n.textMap,a=n.tweetsSentOrScheduled,i=r[e];"string"!=typeof i||a||o._updateSingleComposer({text:i},t)}}))),b()(p()(o),"_updateConversationControlsValue",(function(e){o._conversationControlsCreationEnabled&&(0,o.props.updateConversationControlsValue)(e,o._getParentKey())})),b()(p()(o),"_renderProgressBar",(function(){var e=o.props,t=e.sendingProgress,n=e.isSending;return w.createElement(Da.a,{progress:n?Math.max(t,.02):0,style:[io.progressBar]})})),b()(p()(o),"_updateConvoCardState",(function(){var e=o.props,t=e.convoCardData,n=e.updateConvoCardState;if(t){var r=t.cardId,a=t.nextState;a&&r&&n(r,{cardState:a})}})),b()(p()(o),"_attachExternalMedia",(function(e){return function(t){return Promise.all(t.map((function(e){return Object(tr.a)(e)}))).then(o._handleAddMediaFiles(e))}})),b()(p()(o),"_handleAddMediaFiles",(function(e){return function(t){var r=o.props,a=r.addMedia,i=r.addToast,s=r.composerData,c=r.dataSaverMode,l=r.processMultipleMedia,d=r.removeMediaUpload,u=r.uploadMedia;a(t,{location:or.c.Tweet}).then((function(t){var r=s[e],a=t.map((function(e){return e.id}));if(n._validateMedia(r,t)){var p=r.media.map((function(e){return e.id}));o._updateSingleComposer({mediaIds:Object(ja.a)(p.concat(a))},e),l(t,{onFailure:o._handleMediaRemoveFactory(e)}).then((function(e){c||u(e.map((function(e){return e.id})),{preUpload:!0})}))}else i({text:ro}),d(a)}))}})),b()(p()(o),"_handleMediaRemoveFactory",(function(e){return function(t){return o._handleMediaRemove(e,t)}})),b()(p()(o),"_handleMediaRemove",(function(e,t){var n=o.props,r=n.composerData,a=n.removeMediaUpload,i=r[e],s=i.media,c=i.mediaMetadata,l=i.mediaTags,d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object(Ha.a)(e,n)}(s.map((function(e){return e.id})),t),u=d.length>0?l:[];o._updateSingleComposer({mediaIds:d,gifMetadata:void 0,mediaMetadata:c&&Object(Ba.a)(c,t.toString()),mediaTags:u},e),a(t),o.setState({errorMessage:void 0})})),b()(p()(o),"_setComposerRef",(function(e){return function(t){o._composerRefs[e]=t}})),b()(p()(o),"_shouldBeExpanded",(function(e){var t=o.props,n=t.composerData,r=t.parentTweetId,a=o.state.focused;if(e||a)return!0;var i=!Object(ue.b)(o._getSingleComposerDataWithLatestText(n[0]));return!r||i})),b()(p()(o),"_areComposersValid",(function(){var e=o.props.composerData;return o.isRetweet||e.every((function(e){return Object(ue.d)(o._getSingleComposerDataWithLatestText(e))}))})),b()(p()(o),"_areComposersEmptyOrUnchanged",(function(){var e=o.props,t=e.composerData,n=e.prepopulatedText;return t.every((function(e){return Object(ue.c)(o._getSingleComposerDataWithLatestText(e),n)}))})),b()(p()(o),"_getSingleComposerDataWithLatestText",(function(e){var t=o.state.textMap;return"string"==typeof t[e.key]?Ua(Ua({},e),{},{text:t[e.key]}):e})),b()(p()(o),"_recordNudgeAction",(function(e){var t=o.props.recordNudgeAction,n=o.state.nudgeId;n&&t({nudgeId:n,nudgeActionType:e})})),b()(p()(o),"_recordNudgeResult",(function(e,t){var n=o.props.recordNudgeResult,r=o.state.nudgeId;r&&n(t?{nudgeId:r,nudgeResultType:e,tweetId:t}:{nudgeId:r,nudgeResultType:e})})),o.state={focused:!1,showDiscardTweetConfirmation:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},o._composerRefs={},o._conversationControlsCreationEnabled=!0===x.b.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),o._isScrollerV3Enabled=x.b.isTrue("responsive_web_scroller_v3_enabled"),o._throttledSyncTexts=Object(La.a)(o._syncTexts,1e3,{leading:!0,trailing:!1}),o._keyCommandHandlers=(a={},b()(a,Pa.b,o.handleTweetOrRetweet),b()(a,Pa.a,o.handleDismissComposer),a),o._keyCommandHandlersForActiveTypeahead=b()({},Pa.b,o.handleTweetOrRetweet),o._isNudgeEnabled=!0===x.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_get_enabled"),o._isShowNudgeEnabled=!0===x.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_show_enabled"),o._isNudgeTweetypieEnabled=!0===x.b.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_tweetypie_enabled"),o}return d()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.onRef;e&&e(this)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.convoCardData,n=e.externalMedia,r=e.externalMediaFiles,a=e.history,o=e.isIntentRoute,i=e.isInline,s=e.location,c=e.parentTweetId,l=e.prepopulatedText,d=e.setValidity;if(this._unblockHistory=this.props.history.block(this._blockHistory),n.length>0&&this._attachExternalMedia(0)(n),r.length>0&&this._handleAddMediaFiles(0)(r),this._handleFetchTweetIfNeeded(),l||t&&t.cardUrl){var u=Ua({},null);l&&(u.text=l),t&&t.cardUrl&&(u.cardUrl=t.cardUrl),this._updateSingleComposer(u)}(l||t&&t.cardUrl||n.length>0||r.length>0)&&!o&&a.replace({query:Object(wn.b)(s.query),search:"",pathname:s.pathname,state:Object(Ba.a)(Object(wn.b)(s.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),d&&d(this._areComposersValid()),i||this._setActiveParentKey(),this._isScrollerV3Enabled&&c&&this._root&&(this._height=this._root.getBoundingClientRect().height)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.addToast,a=n.composerData,o=n.copyDataFromInlineReplyComposerToModalComposer,i=n.externalMedia,s=n.externalMediaFiles,c=n.onRef,l=n.parentTweetId,d=n.replyPressToggle,u=n.setValidity,p=n.windowWidth,h=n.getTweetHeight,f=this.state.textMap;if(this._isScrollerV3Enabled&&l&&h&&this._root&&(e.composerData!==a||t.textMap!==f)){var m=this._root.getBoundingClientRect().height;if(m!==this._height){this._height=m;var g=m+h();this._handleHeightChanged(g)}}p!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==c&&e.onRef(void 0),c&&c!==e.onRef&&c(this),a.length>=25&&e.composerData.length<25&&r({text:to}),i.length>0&&i!==e.externalMedia?this._attachExternalMedia(0)(i):s.length>0&&s!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(s),u&&!Object(cn.a)(a,e.composerData)&&u&&u(this._areComposersValid()),d!==e.replyPressToggle&&o(l)}},{key:"componentWillUnmount",value:function(){var e=this,t=this.props,n=t.composerData,r=t.onRef;this._unblockHistory&&this._unblockHistory(),r&&r(void 0),Object(Na.a)(this._composerRefs).forEach((function(t){var r=a()(t,2),o=r[0],i=r[1],s=parseInt(o,10);if(i)return n[s]&&n[s].pollActive&&e._updateSingleComposer({initialPollChoices:i.pollChoices,initialPollDuration:i.pollDuration},s)})),this._syncTexts()}},{key:"render",value:function(){var e=this.props.parentTweetId;return this._isScrollerV3Enabled&&e?w.createElement(w.Fragment,null,this._render(),this._render(!0)):this._render()}},{key:"_scribe",value:function(e,t){this.props.analytics.scribe(Ua(Ua({},e),{},{data:t}))}},{key:"isThread",get:function(){return this.props.composerData.length>1}},{key:"isRetweet",get:function(){var e=this.props.composerData,t=0===e[0].media.length,n=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===n&&t}},{key:"isQuoteTweet",get:function(){var e=this.props.composerData,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}},{key:"hasNonCompliantQuote",get:function(){var e;return"non_compliant"===(null===(e=this.props.composerData[0].quotedStatus)||void 0===e?void 0:e.limited_actions)}},{key:"shouldShowDiscardConfirmation",get:function(){var e=this.props,t=e.isSending,n=e.composerData[0].scheduledTweetId,r=this.state.showDiscardTweetConfirmation,a=this._areComposersEmptyOrUnchanged();return!(t||a||r||n)}},{key:"shouldShowBackgroundSendConfirmation",get:function(){var e=this.props,t=e.composerData,n=e.isSending,r=t.some((function(e){return e.media.some((function(e){return e.uploading}))}));return n&&r}},{key:"_canSaveDraft",get:function(){var e=this.props,t=e.composerData,n=e.isInline;return!this.isThread&&!t[0].pollActive&&0===t[0].mediaTags.length&&!n}}]),n}(w.Component);b()(oo,"defaultProps",{customizePropsForSingleComposerItem:function(e,t,n){return{}},externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:function(){},typeaheadWrapper:aa.a}),b()(oo,"contextType",Aa.a),b()(oo,"_validateMedia",(function(e,t){var n=e.media;return Object(T.c)(n.concat(t))}));var io=A.a.create((function(e){return{root:{paddingBottom:e.spaces.xxSmall},rootInlineReply:{backgroundColor:e.colors.fadedGray,paddingBottom:e.componentDimensions.gutterVertical},content:{paddingVertical:e.spaces.xxSmall,backgroundColor:e.colors.cellBackground},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:Ua({},A.a.absoluteFillObject),inlineSendButton:{marginLeft:e.spaces.xSmall},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}}}));t.a=Object(q.a)($n(oo))},VjLy:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n("2G9S");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("3XMw"),s=n.n(i),c=n("feu+"),l=n("eb3s"),d=n("lUZE"),u=n("5cUs"),p=s.a.ge5067bb,h=s.a.ea626ab3,f=s.a.fc716886,m=s.a.f2a2a06e,g=s.a.f82c0bbf,v="".concat(m,"\n\n").concat(g),y=s.a.b2615c6d,_=s.a.i62a03aa,b=s.a.cfd2f35d,w=s.a.a6450e83,C=s.a.hb279a11,T=function(e){var t=e.onConfirm,n=e.onCancel,r=e.onHideReplyImpression,a=void 0===r?function(){}:r;return o.createElement(c.a,{actionLabel:p,graphic:d.a,headline:f,onAction:t,onClose:n,onImpression:a,onTertiaryAction:n,subtext:v,supportUrl:"https://help.twitter.com/en/using-twitter/mentions-and-replies?lang=browser#hidden-reply",tertiaryActionLabel:b})};t.b=function(e){var t=e.addTip,n=e.addToast,r=e.createLocalApiErrorHandler,i=e.hideReply,s=e.onBlock,c=e.onTweetDismiss,d=e.scribeAction,f=e.tips,m=e.tweet,g=!f.hide_reply_author_education,v=function(){d({element:"moderated_replies_prompt",action:"impression"})};return{confirmation:g?{render:function(e,t){return T({onConfirm:e,onCancel:t,onHideReplyImpression:v})}}:{render:function(e,t){var n=m.user.screen_name;return o.createElement(l.a,{cancelButtonLabel:_,confirmButtonLabel:w,confirmButtonType:"destructive",headline:y({screenName:n}),onCancel:e,onConfirm:function(){s(),e()},text:C({screenName:n})})}},text:p,onClick:function(){t(a()({},"hide_reply_author_education",!0)),i(m.id_str,{conversation_id:m.conversation_id_str}).then((function(e){c&&c(),n({text:h})}),r({showToast:!0})),d({element:"moderate_reply"})},Icon:u.a}}},XpKj:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return _})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return w}));n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("kGix"),i=n("Ssj5"),s=n("oEOe");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d="rweb/".concat("scheduledTweets"),u={fetchStatus:o.a.NONE,scheduledTweets:[]},p="FETCH_SCHEDULED_TWEETS",h=Object(s.a)(d,p),f="DELETE_SCHEDULED_TWEET",m=Object(s.a)(d,f),g=function(e,t){return t.filter((function(t){return t.rest_id!==e}))};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.SUCCESS:return l(l({},e),{},{fetchStatus:o.a.LOADED,scheduledTweets:t.payload});case h.FAILURE:return l(l({},e),{},{fetchStatus:o.a.FAILED});case h.REQUEST:return l(l({},e),{},{fetchStatus:o.a.LOADING});case m.SUCCESS:var n=t.meta;return n&&n.deleteScheduledTweetId?l(l({},e),{},{scheduledTweets:g(n.deleteScheduledTweetId,e.scheduledTweets)}):e;default:return e}}i.a.register(a()({},"scheduledTweets",v));var y=function(e){return e.scheduledTweets.scheduledTweets},_=function(e){return e.scheduledTweets.fetchStatus},b=function(){return function(e,t,n){var r=n.api;return Object(s.b)(e,{request:r.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:h,context:p}).then((function(){}))}},w=function(e){return function(t,n,r){var a=r.api;return Object(s.b)(t,{request:a.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:m,context:f,meta:{deleteScheduledTweetId:e}})}}},Zg3A:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("Lsrn"),s=n("k/Ka");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)("svg",l(l({},e),{},{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm8.472 9.442c-.242.19-.472.368-.63.486-.68-1.265-1.002-1.78-1.256-2.007-.163-.145-.37-.223-.78-.375-.367-.136-1.482-.55-1.65-.85-.087-.153.136-.602.23-.793.088-.177.164-.33.196-.497.123-.646-.33-1.146-.728-1.59-.066-.072-.153-.17-.23-.26.335-.12.862-.26 1.42-.384 1.95 1.448 3.26 3.704 3.428 6.272zm-9.788-7.83c.076.25.145.5.182.678-.255.15-.663.363-.96.52-.262.136-.522.273-.738.392-.247.137-.442.234-.6.313-.347.174-.598.3-.833.553-.068.073-.26.278-1.02 1.886l-1.79-.656c1.293-1.94 3.362-3.31 5.76-3.685zM12 20.5c-4.687 0-8.5-3.813-8.5-8.5 0-1.197.25-2.335.7-3.37.47.182 1.713.66 2.75 1.035-.107.336-.245.854-.26 1.333-.03.855.502 1.7.562 1.792.053.08.12.15.2.207.303.21.687.5.827.616.063.343.166 1.26.23 1.833.144 1.266.175 1.48.24 1.65.005.012.514 1.188 1.315 1.188.576-.003.673-.206 1.855-2.688.244-.512.45-.95.513-1.058.1-.144.597-.61.87-.83.55-.442.76-1.82.413-2.682-.335-.83-1.92-2.08-2.5-2.195-.17-.033-.43-.04-.953-.053-.497-.01-1.25-.028-1.536-.09-.098-.024-.314-.094-.605-.196.32-.668.627-1.28.71-1.4.05-.052.168-.112.408-.234.17-.086.383-.192.653-.34.208-.116.458-.247.71-.38 1.168-.612 1.484-.8 1.658-1.082.11-.177.263-.44-.04-1.544 1.042.027 2.038.24 2.955.61-.89.32-1.024.595-1.106.77-.367.784.256 1.475.667 1.93.096.107.24.268.32.38l-.017.036c-.234.472-.67 1.35-.196 2.194.406.72 1.384 1.13 2.437 1.52.134.05.25.092.33.126.16.208.496.79 1 1.735l.154.285c.078.14.33.505.842.505.167 0 .363-.04.59-.137.032-.013.083-.035.18-.094C19.72 17.405 16.22 20.5 12 20.5zm-3.812-9.45c.01-.285.102-.646.184-.907l.027.006c.397.09 1.037.11 1.83.13.32.006.59.008.615 0 .326.143 1.355 1 1.483 1.31.113.28.05.812-.034 1.01-.233.197-.845.735-1.085 1.078-.093.13-.212.373-.64 1.274-.133.276-.313.654-.488 1.013-.026-.225-.054-.472-.08-.686-.225-2.003-.273-2.22-.42-2.445-.05-.078-.202-.31-1.135-.973-.117-.213-.268-.564-.26-.813z"})))};d.metadata={width:24,height:24},t.a=d},pcjM:function(e,t,n){"use strict";n.r(t),n.d(t,"Compose",(function(){return Te}));n("1t7P"),n("2G9S"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("WNMA"),n("uFXj"),n("+oxZ");var r=n("97Jx"),a=n.n(r),o=n("m3Bd"),i=n.n(o),s=n("VrFO"),c=n.n(s),l=n("Y9Ll"),d=n.n(l),u=n("1Pcy"),p=n.n(u),h=n("5Yy7"),f=n.n(h),m=n("N+ot"),g=n.n(m),v=n("AuHH"),y=n.n(v),_=n("KEM+"),b=n.n(_),w=n("ERkP"),C=n("HPNB"),T=(n("VAZu"),n("Ub51")),S=(n("vrRf"),n("z84I"),n("5BYb"),n("zh9S")),x=n("ge3j"),R=n("pidX"),E=n("0KEI"),I=n("AspN"),O=n("XOJV"),k=n("G6rE"),D=n("oEGd"),A=n("hqKg"),P=n("rU/Q"),M=n("XpKj");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){return function(t,n){var r=function(e,t){return t.location.state}(0,n);return r?e(r):void 0}},L=Object(A.createSelector)((function(e,t){return t.activeUser}),k.e.selectLoggedInUser,(function(e,t){return e||t})),N=function(e,t){var n=t.location.query;return n&&"string"==typeof n.in_reply_to?n.in_reply_to:void 0},F=H((function(e){return e.inReplyToStatusId})),U=function(e,t){return t.location.pathname.indexOf("/intent/")>-1},V=H((function(e){return e.defaultText})),W=H((function(e){return e.quotedStatus})),z=H((function(e){return e.isSelfThreadReply})),G=Object(A.createSelector)((function(e){return x.l(e,"")}),(function(e,t){var n=V(e,t);return Object(R.a)(t.location)||n}),(function(e,t){return t.quotedStatus?t.quotedStatus:W(e,t)}),I.f,U,(function(e,t,n,r,a){return e.map((function(e,o){return j(j({},function(e){e.mediaIds,e.cardUrl;return i()(e,["mediaIds","cardUrl"])}(e)),{},{media:r.filter((function(t){return e.mediaIds.some((function(e){return e===t.id}))})),quotedStatus:0===o?n:void 0,text:0===o&&t&&!a?t:e.text})}))})),q=Object(A.createStructuredSelector)({activeUser:L,composerData:G,draftTweets:P.e,inReplyToStatus:function(e,t){var n=N(0,t)||F(e,t);return n?O.a.selectHydrated(e,n):void 0},inReplyToStatusId:N,isIntentRoute:U,isSelfThreadReply:z,isSending:function(e){return x.o(e,"")},scheduledTweets:M.f,sendingProgress:x.q,composeSemanticCoreId:H((function(e){return e.composeSemanticCoreId}))}),K={createDraftTweetApiErrorHandler:Object(E.d)(P.d),createScheduledTweetApiErrorHandler:Object(E.d)(M.d),googleAnalyticsPageView:S.a,scribePageImpression:S.d,fetchScheduledTweets:M.c,fetchDraftTweets:P.c},X=Object(D.g)(q,K),Z=n("RgK2"),Y=n.n(Z),Q=n("jHSc"),J=n("MXY2"),$=n("3XMw"),ee=n.n($),te=n("iFPY"),ne=n("QbaN"),re=n("oQhu"),ae=n("7nmT"),oe=n.n(ae),ie=n("Dtul"),se=n("7JQg"),ce="tweetButton",le=n("MWbm"),de=n("/yvb"),ue=n("JYMr"),pe=n("cHvH"),he=n("7N4s"),fe=n("rHpw");function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var ye=ee.a.b8f0483e,_e=ee.a.a133d13e,be={page:"compose"},we={page:"compose",section:"reply"},Ce={context:"compose_intent_logged_in"},Te=function(e){f()(n,e);var t=ve(n);function n(){var e;c()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(p()(e),"state",{isValid:!1}),b()(p()(e),"_handleAppBarHeight",Object(re.a)((function(){var t=oe.a.findDOMNode(e._appBarRef);return t&&t instanceof window.Element&&t.getBoundingClientRect().height||50}))),b()(p()(e),"_handleBackClick",(function(){e._composeContainerRef&&e._composeContainerRef.handleDismissComposer()})),b()(p()(e),"_handleCloseComposer",(function(){e._appBarRef&&e._appBarRef.goBack()})),b()(p()(e),"_handleSendTweet",(function(){e._composeContainerRef&&e._composeContainerRef.handleTweetOrRetweet()})),b()(p()(e),"_setValidity",(function(t){t!==e.state.isValid&&e.setState({isValid:t})})),b()(p()(e),"_getScribeNamespace",(function(){return e.props.inReplyToStatus||e.props.inReplyToStatusId?we:be})),b()(p()(e),"_getScribeData",(function(){var t=e.props,n=t.activeUser;return t.isIntentRoute&&n?Ce:Y.a})),b()(p()(e),"_renderAppBarRightControl",(function(){var t=e.state.isValid,n=e.context.isModal,r=e.props,a=r.inReplyToStatus,o=r.isSelfThreadReply,i=r.isSending,s=r.activeUser,c=t||e.isRetweet;return n?void 0:w.createElement(de.a,{disabled:!c||i||!s,onPress:e._handleSendTweet,size:"normalCompact",testID:ce,type:"primary"},Object(J.a)({inReplyToStatus:!!a,isSelfThreadReply:!!o,isQuoteTweet:!!e.isQuoteTweet,isRetweet:!!e.isRetweet,isScheduled:!!e.isScheduled,isThread:e.isThread}))})),b()(p()(e),"_renderHeaderWithProgressBar",(function(t){var n=e.context.isModal,r=e.props,a=r.sendingProgress,o=r.isSending;return w.createElement(w.Fragment,null,w.createElement(ue.a,{progress:o?Math.max(a,.02):0,style:[Se.progressBar,n&&Se.progressBarModal]}),t)})),b()(p()(e),"_renderUnsentHeading",(function(){var t=e.props,n=t.draftTweets;if(t.scheduledTweets.length>0||n.length>0)return w.createElement(le.a,{style:Se.unsentHeadingContainer},w.createElement(de.a,{onPress:e._handleOpenUnsent,size:"normalCompact",type:"text"},_e))})),b()(p()(e),"_handleOpenUnsent",(function(){var t=e.props.history;Object(S.c)(ge(ge({},e._getScribeNamespace()),{},{element:"unsent_tweets",action:"click"})),t.push("/compose/tweet/unsent/drafts")})),b()(p()(e),"_setAppBarRef",(function(t){e._appBarRef=t})),b()(p()(e),"_handleComposeContainerRef",(function(t){e._composeContainerRef=t})),e}return d()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.activeUser,n=e.createDraftTweetApiErrorHandler,r=e.createScheduledTweetApiErrorHandler,a=e.fetchDraftTweets,o=e.fetchScheduledTweets,i=e.googleAnalyticsPageView,s=e.scribePageImpression,c=this._getScribeNamespace();s(c),i(c),this._unlockReload=ie.a.acquire(),t&&(o().catch(r()),a().catch(n()))}},{key:"componentWillUnmount",value:function(){this._unlockReload()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.createDraftTweetApiErrorHandler,t.createScheduledTweetApiErrorHandler,t.draftTweets,t.fetchDraftTweets,t.fetchScheduledTweets,t.history),r=t.location,o=t.activeUser,s=(t.composerData,t.googleAnalyticsPageView,t.inReplyToStatus,t.inReplyToStatusId,t.isIntentRoute),c=(t.isSelfThreadReply,t.isSending,t.match,t.scheduledTweets,t.scribePageImpression,t.sendingProgress,t.staticContext,i()(t,["createDraftTweetApiErrorHandler","createScheduledTweetApiErrorHandler","draftTweets","fetchDraftTweets","fetchScheduledTweets","history","location","activeUser","composerData","googleAnalyticsPageView","inReplyToStatus","inReplyToStatusId","isIntentRoute","isSelfThreadReply","isSending","match","scheduledTweets","scribePageImpression","sendingProgress","staticContext"])),l=s&&!o;return w.createElement(se.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},w.createElement(pe.a,null,(function(t){var i=t.windowWidth,s=l&&C.a.shouldRenderAsModal(i);return w.createElement(w.Fragment,null,l&&w.createElement(te.a,{history:n,location:r}),!s&&w.createElement(Q.b,{appBarRef:e._setAppBarRef,documentTitle:ye,hideBackButton:!1,history:n,middleControl:e._renderUnsentHeading(),onBackClick:e._handleBackClick,renderHeader:e._renderHeaderWithProgressBar,rightControl:e._renderAppBarRightControl()},w.createElement(T.a,a()({},c,{activeUser:o,history:n,location:r,onCloseComposer:e._handleCloseComposer,onHandleAppBarHeight:e._handleAppBarHeight,onRef:e._handleComposeContainerRef,setValidity:e._setValidity,windowWidth:i}))))})))}},{key:"isThread",get:function(){return this.props.composerData.length>1}},{key:"isRetweet",get:function(){var e=this.props.composerData,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}},{key:"isQuoteTweet",get:function(){var e=this.props.composerData;return!this.isThread&&e[0].quotedStatus}},{key:"isScheduled",get:function(){var e=this.props.composerData;return Object(ne.h)(e[0].scheduledFor)}}]),n}(w.Component);b()(Te,"contextType",he.a);var Se=fe.a.create((function(e){return{progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}}}));t.default=X(Te)},pidX:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));n("2G9S"),n("LW0h"),n("7xRU"),n("z84I"),n("7x/C"),n("KqXw"),n("DZ+c"),n("Ysgh");var r=n("ddV6"),a=n.n(r),o=n("3XMw"),i=n.n(o),s=n("3A2y"),c=i.a.b2e94283,l=["title","screen_name","text","url","hashtags","via"];t.a=function(e){var t=e.state||{},n=e.query||{},r=l.map((function(e){return t[e]||n[e]})),o=a()(r,6),i=o[0],s=o[1],d=o[2],u=o[3],p=o[4],h=o[5],f=[i,s&&"@".concat(s.toString()),d,u,p&&p.toString().split(",").map((function(e){return"#".concat(e)})).join(" "),h&&c({viaScreenName:h})].filter(Boolean).join(" ");return f?"".concat(f).concat(" "):void 0};var d=function(e){return Object(s.a)(e,l)}},rziq:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r="send-tweet",a="dismiss-composer"},sCk0:function(e,t,n){"use strict";n("2G9S"),n("DfhM"),n("z84I"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),s=n("1Pcy"),c=n.n(s),l=n("5Yy7"),d=n.n(l),u=n("N+ot"),p=n.n(u),h=n("AuHH"),f=n.n(h),m=n("KEM+"),g=n.n(m),v=n("ERkP"),y=n("zfvc"),_=(n("M+/F"),n("yH/f"),n("RhWx")),b=n.n(_),w=n("zrc3"),C=Object.freeze({in:"in",out:"out",static:"static"});function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var S=function(e){d()(n,e);var t=T(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),g()(c()(e),"state",{isAnimating:!1,renderChildren:v.Children.toArray(e.props.children).map((function(e){return{status:C.static,child:e}}))}),g()(c()(e),"_handleEachAnimateComplete",(function(){var t=e.state.isAnimating,n=e.props,r=n.onAnimateComplete,a=n.children;t&&(r&&r(),e.setState({renderChildren:v.Children.toArray(a).map((function(e){return{status:C.static,child:e}})),isAnimating:!1}))})),e}return i()(n,[{key:"render",value:function(){var e=this;return this.state.renderChildren.map((function(t){var n=t.status,r=t.child;return v.createElement(y.a,{animateMount:n!==C.static,key:r.key,onAnimateComplete:e._handleEachAnimateComplete,show:n!==C.out},r)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=function(e,t){for(var n=0,r=0,a=[],o=function(){if(n>=t.length)return a.push.apply(a,b()(e.slice(r).map((function(e){return{child:e,status:C.out}})))),"break";var o=t[n],i=e[r];if(o.key===i.key)a.push({child:o,status:C.static}),n+=1;else{var s=Object(w.a)(t,(function(e){return e.key===i.key}));s>=0?(a.push.apply(a,b()(t.slice(n,s).map((function(e){return{child:e,status:C.in}}))).concat([{child:t[s],status:C.static}])),n=s+1):a.push({child:i,status:C.out})}r+=1};r<e.length;){if("break"===o())break}return n<t.length&&a.push.apply(a,b()(t.slice(n).map((function(e){return{child:e,status:C.in}})))),a}(t.renderChildren.map((function(e){return e.child})),v.Children.toArray(e.children));return{renderChildren:n,isAnimating:!n.every((function(e){return e.status===C.static}))}}}]),n}(v.Component);t.a=S},yTN1:function(e,t,n){"use strict";n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),s=n("5Yy7"),c=n.n(s),l=n("N+ot"),d=n.n(l),u=n("AuHH"),p=n.n(u),h=n("KEM+"),f=n.n(h),m=n("ERkP"),g=n("3XMw"),v=n.n(g),y=n("k6Ei"),_=n("rHpw"),b=(n("aWzz"),n("+/1j")),w=n("MWbm");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var T=v.a.c2fc878c,S=v.a.db11b27f,x=function(e){c()(n,e);var t=C(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.maxCount,r=e.formatNumber,a=e.warningCount,o=n-t,i=o>=0?S({count:r(o)}):T({count:r(t-n)}),s=t>=a?m.createElement(b.a,{accessibilityLiveRegion:"polite","aria-relevant":"all",style:_.a.visuallyHidden},i):null,c=Math.min(1,1-o/n),l=t>=n?"red":t>=a?"yellow":"primary",d=m.createElement(y.a,{color:l,progress:c,size:t>=a?30:20,style:[R.progressCircle,o<=-10&&R.hide]}),u=t>=a?m.createElement(b.a,{style:[R.text,o>0?R.deepGrayColor:R.redColor]},r(o)):null;return m.createElement(w.a,{style:[R.root,R.center]},s,d,m.createElement(w.a,{style:[_.a.absoluteFill,R.center]},u))}}]),n}(m.Component);f()(x,"displayName","@twitter/CountdownCircle"),f()(x,"defaultProps",{formatNumber:function(e){return e}}),x.propTypes={};var R=_.a.create((function(e){var t=e.colors;return{root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},deepGrayColor:{color:t.deepGray},redColor:{color:t.red}}}));t.a=x},ynU0:function(e,t,n){"use strict";n.r(t);var r=n("pcjM"),a=n("SADN");t.default=Object(a.a)(r.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.RichTextCompose.02ddef65.js.map