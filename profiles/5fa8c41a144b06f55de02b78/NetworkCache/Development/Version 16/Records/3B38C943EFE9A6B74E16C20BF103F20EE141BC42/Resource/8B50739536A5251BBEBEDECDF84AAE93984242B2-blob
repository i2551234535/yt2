(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"0crt":function(e,t,n){"use strict";n.r(t),n.d(t,"SmsLoginScreen",(function(){return $}));n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL"),n("uFXj"),n("+oxZ");var r=n("VrFO"),i=n.n(r),o=n("Y9Ll"),c=n.n(o),a=n("1Pcy"),l=n.n(a),s=n("5Yy7"),u=n.n(s),m=n("N+ot"),p=n.n(m),f=n("AuHH"),h=n.n(f),d=n("KEM+"),b=n.n(d),g=n("ERkP"),y=n("zh9S"),_=n("RqPI"),v=n("oEGd"),E=n("0KEI"),S=n("hqKg"),L=n("kGix"),O=n("G6rE"),k=Object(S.createSelector)((function(e){var t=_.c(e);return t?Object(O.f)(["screen_name"])(e,t):L.a.LOADING}),_.j,L.c),w=Object(S.createSelector)(k,(function(e){var t=_.c(e),n=t&&O.e.select(e,t);return n&&n.screen_name}),_.i,_.c,_.h,(function(e,t,n,r,i){return{fetchStatus:e,isSmsEligible:n?"true"===n.sms.eligible:void 0,loginReturnPath:i,phoneNumber:n?n.sms.phone_number:void 0,userId:r,userScreenName:t}})),P={createLocalApiErrorHandler:Object(E.d)("SMS_LOGIN_SCREEN"),fetchOneUserIfNeeded:O.e.fetchOneIfNeeded,fetchOneFactorLoginEligibility:_.b,scribeAction:y.c,setLoginReturnPath:_.l},R=Object(v.g)(w,P),j=n("7JQg"),C=n("GOQE"),B=n("v//M"),D=n("3XMw"),N=n.n(D),T=n("lUZE"),A=n("6oVL"),U=n("yoO3"),x="legalTerm",F=n("fEA7"),I=n.n(F),M=n("mw9i"),z=n("t62R"),H=n("rHpw");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var V=N.a.f0816dee,q=N.a.f9c558ae,X=N.a.haa104f0,Z=N.a.h25bc383,J=N.a.ecde12c1,Y=N.a.j4824c52,Q=N.a.fca32b2f,$=function(e){u()(n,e);var t=K(n);function n(e){var r;return i()(this,n),r=t.call(this,e),b()(l()(r),"_renderContent",(function(){var e=r.props,t=e.userScreenName,n=e.loginReturnPath,i=e.phoneNumber,o=t?"/login?username_or_email=".concat(encodeURIComponent(t)):"/login";return g.createElement(M.a,{style:ee.root,withGutter:!0},g.createElement(T.a,{style:ee.icon}),g.createElement(z.c,{accessibilityRole:"heading",align:"center",size:"xLarge",style:ee.heading,weight:"bold"},q({userScreenName:t})),g.createElement(z.c,{align:"center",color:"deepGray",size:"normal",style:ee.phoneNumberText},J({phoneNumber:i})),g.createElement(A.a,{formActionUrl:"/login/error_options_sms",loginReturnPath:n,submitButtonLabel:X,submitButtonStyle:ee.submitButton},g.createElement("input",{name:"session[username_or_email]",type:"hidden",value:t})),g.createElement(z.c,{align:"center",style:ee.buttonWrapper},g.createElement(z.c,{align:"center",link:o,onClick:r._handleScribePasswordLoginClick,weight:"bold"},Z)),g.createElement(z.c,{style:ee.legalTerm},g.createElement(z.c,{align:"center",color:"deepGray",size:"small",weight:"normal"},Y)," ",g.createElement(z.c,{align:"center",link:o,onClick:r._handleUpdatePhoneNumberClick,size:"small",testID:x},Q)))})),b()(l()(r),"_handleFetchUserAndLoginEligibility",(function(){var e=r.props,t=e.createLocalApiErrorHandler,n=e.fetchOneUserIfNeeded,i=e.fetchOneFactorLoginEligibility,o=e.userId;o?(i().catch(t()),n(o).catch(t(C.a))):r._redirectToLoginPage()})),b()(l()(r),"_handleScribePasswordLoginClick",(function(){var e=r.props;(0,e.scribeAction)(W(W({},e.scribeNamespace),{},{element:"password_login",action:"click"}))})),b()(l()(r),"_handleUpdatePhoneNumberClick",(function(){var e=r.props,t=e.scribeAction,n=e.scribeNamespace;(0,e.setLoginReturnPath)("/settings/phone"),t(W(W({},n),{},{element:"update_phone_number",action:"click"}))})),b()(l()(r),"_redirectToLoginPage",(function(e){r.props.history.replace({pathname:"/login",query:{username_or_email:e}})})),r._mobileLoginToken=I.a.v1().replace(/-/g,""),r}return c()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.fetchStatus,n=e.isSmsEligible,r=e.userScreenName;t!==L.a.LOADED||n||this._redirectToLoginPage(r)}},{key:"UNSAFE_componentWillMount",value:function(){this._handleFetchUserAndLoginEligibility()}},{key:"render",value:function(){var e=this.props.fetchStatus;return g.createElement(U.a,null,g.createElement(B.a,{accessibilityLabel:V,fetchStatus:e,onRequestRetry:this._handleFetchUserAndLoginEligibility,render:this._renderContent}))}}]),n}(g.Component);b()($,"defaultProps",{loginReturnPath:"/"});var ee=H.a.create((function(e){return{root:{marginTop:e.spaces.xxLarge},icon:{color:e.colors.brandColor,height:e.spaces.xLarge,marginBottom:e.spaces.xSmall},heading:{marginTop:e.spaces.jumbo,width:"100%"},phoneNumberText:{marginTop:e.spaces.small,marginBottom:e.spaces.xxLarge},buttonWrapper:{marginTop:e.spaces.medium},legalTerm:{marginTop:e.spaces.large,textAlign:"center"},submitButton:{alignSelf:"center"}}}));t.default=Object(j.c)({page:"login_sms"})(R($))},"6oVL":function(e,t,n){"use strict";n("2G9S"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL"),n("Ysgh");var r=n("ddV6"),i=n.n(r),o=n("VrFO"),c=n.n(o),a=n("Y9Ll"),l=n.n(a),s=n("1Pcy"),u=n.n(s),m=n("5Yy7"),p=n.n(m),f=n("N+ot"),h=n.n(f),d=n("AuHH"),b=n.n(d),g=n("KEM+"),y=n.n(g),_=n("ERkP"),v=n("s9SB"),E=n.n(v),S=n("3XMw"),L=n.n(S),O=n("cnVF"),k=n("Ukpf"),w=n("BTou"),P=n("mrHL"),R="LoginForm_Login_Button",j=n("fEA7"),C=n.n(j),B=n("MWbm"),D=n("Irs7"),N=n("/yvb"),T=n("rHpw");function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var U=L.a.e919c3bc,x=function(e){p()(n,e);var t=A(n);function n(){var e;c()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),y()(u()(e),"_mobileLoginToken",C.a.v1().replace(/-/g,"")),y()(u()(e),"_handleSubmit",(function(){var t=e.props,n=t.analytics,r=t.deregisterServiceWorkerBeforeSubmit,i=t.onSubmit;return n.scribe({action:"submit"}),r?(w.a.deregisterServiceWorker((function(){e._setLoginCookie(),i?i(e._form.elements):e._form.submit()})),!1):(w.a.flushHTMLCache(),e._setLoginCookie(),i?(i(e._form.elements),!1):void 0)})),y()(u()(e),"_handleSubmitButtonClick",(function(){!1!==e._handleSubmit()&&e._form.submit()})),y()(u()(e),"_setFormRef",(function(t){t&&(e._form=t)})),y()(u()(e),"_setLoginCookie",(function(){var t=new Date(Date.now());t.setTime(t.getTime()+3e5),Object(P.b)(E.a.serialize(O.o,e._mobileLoginToken,{domain:void 0,expires:t,path:"/",secure:!0}))})),e}return l()(n,[{key:"componentDidUpdate",value:function(e){this.props.autoSubmit&&!e.autoSubmit&&this._handleSubmitButtonClick()}},{key:"componentDidMount",value:function(){k.a.inject("https://twitter.com/i/js_inst?c_name=ui_metrics")}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.hideSubmitButton,r=e.horizontalLayout,o=e.formActionUrl,c=e.loginReturnPath,a=e.submitButtonDisabled,l=e.submitButtonLabel,s=e.submitButtonSize,u=e.submitButtonStyle,m=e.submitButtonType,p="string"==typeof c?c.split("?"):[],f=i()(p,2),h=f[0],d=f[1],b=encodeURI(h||"/"),g=d?"?".concat(d):"",y="".concat("").concat(b).concat(g),v=_.createElement(B.a,{style:r&&F.horizontalFields},_.createElement("input",{name:"redirect_after_login",type:"hidden",value:y}),_.createElement("input",{name:"remember_me",type:"hidden",value:"1"}),_.createElement("input",{name:"authenticity_token",type:"hidden",value:this._mobileLoginToken}),_.createElement("input",{name:"wfa",type:"hidden",value:"1"}),_.createElement("input",{autoComplete:"off",name:"ui_metrics",type:"hidden"}),t,n?null:_.createElement(B.a,{style:r&&F.loginButtonContainer},_.createElement(N.a,{disabled:a,onPress:this._handleSubmitButtonClick,size:s,style:u,testID:R,type:m},l)));return _.createElement(B.a,{style:F.loginForm},_.createElement("form",{action:o,children:v,method:"post",noValidate:!0,onSubmit:this._handleSubmit,ref:this._setFormRef}))}}]),n}(_.Component);y()(x,"defaultProps",{autoSubmit:!1,deregisterServiceWorkerBeforeSubmit:!1,formActionUrl:"/sessions",hideSubmitButton:!1,submitButtonDisabled:!1,submitButtonLabel:U,submitButtonType:"primary"});var F=T.a.create((function(e){return{horizontalFields:{flexDirection:"row",justifyContent:"center",alignItems:"stretch"},loginForm:{width:"100%"},loginButtonContainer:{flexDirection:"column",justifyContent:"center"}}}));t.a=Object(D.a)(x,{element:"inline_login_form"})},Ukpf:function(e,t,n){"use strict";var r={inject:function(e){var t=document.createElement("script");t.async=!0,t.src=e;var n=document.body;n&&n.appendChild(t)}};t.a=r}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.SmsLogin.5ba84445.js.map