(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"3GUV":function(e,t,r){"use strict";r("7x/C"),r("Blm6"),r("OZaJ"),r("DZ+c");var n=r("VrFO"),a=r.n(n),o=r("Y9Ll"),c=r.n(o),i=r("5Yy7"),u=r.n(i),l=r("N+ot"),s=r.n(l),f=r("AuHH"),h=r.n(f),d=r("ERkP"),y=r("rHpw"),p=r("MWbm");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s()(this,r)}}var m=function(e){u()(r,e);var t=g(r);function r(){return a()(this,r),t.apply(this,arguments)}return c()(r,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return d.createElement(p.a,{style:v.root})}}]),r}(d.Component),v=y.a.create((function(e){return{root:{height:"".concat(5*parseInt(e.lineHeight,10),"rem")}}}));t.a=m},"5UID":function(e,t,r){"use strict";r("7x/C"),r("OZaJ"),r("DZ+c");var n=r("VrFO"),a=r.n(n),o=r("Y9Ll"),c=r.n(o),i=r("5Yy7"),u=r.n(i),l=r("N+ot"),s=r.n(l),f=r("AuHH"),h=r.n(f),d=r("ERkP"),y=r("3XMw"),p=r.n(y),g=r("rHpw"),m=(r("aWzz"),r("+/1j")),v=r("MWbm");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s()(this,r)}}var O=p.a.e5b0063d,S=0,_=function(e){u()(r,e);var t=b(r);function r(){var e;return a()(this,r),(e=t.call(this))._listDomId="accessible-list-".concat(S),S+=1,e}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.title,n=O({title:r});return d.createElement(v.a,{accessibilityRole:"region","aria-labelledby":this._listDomId},d.createElement(m.a,{accessibilityRole:"heading","aria-level":1,nativeID:this._listDomId,style:g.a.visuallyHidden},r),d.createElement(v.a,{accessibilityLabel:n},t))}}]),r}(d.Component);t.a=_},EP6G:function(e,t,r){"use strict";r("7xRU"),r("z84I"),r("7x/C"),r("OZaJ"),r("DZ+c");var n=r("ddV6"),a=r.n(n),o=r("VrFO"),c=r.n(o),i=r("Y9Ll"),u=r.n(i),l=r("1Pcy"),s=r.n(l),f=r("5Yy7"),h=r.n(f),d=r("N+ot"),y=r.n(d),p=r("AuHH"),g=r.n(p),m=r("KEM+"),v=r.n(m),b=r("ERkP"),O=(r("1t7P"),r("LW0h"),r("jwue"),r("tQbP"),r("daRM"),r("FtHn"),r("+KXO"),r("+oxZ"),r("RhWx")),S=r.n(O),_=r("zh9S"),w=r("ge3j"),P=r("AspN"),E=r("VnFT"),j=r("oEGd"),R=r("hqKg");function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=Object(R.createSelector)((function(e,t){var r=t.module,n=t.query;return r.selectInitialFetchStatus(e,n)}),(function(e,t){var r=t.module,n=t.query;return r.selectItems(e,n)}),(function(e,t){var r=t.module,n=t.query;return r.selectNextFetchStatus(e,n)}),(function(e,t,r){return{initialFetchStatus:e,items:Array.isArray(t)?t.map((function(e){return C(C({},e),{},{thumbnail_images:S()(e.thumbnail_images).sort((function(e,t){return t.height*t.width-e.height*e.width}))})})):void 0,nextFetchStatus:r}})),k=Object(j.d)(D,(function(e){var t,r=e.module,n=e.history;return{addExternalMediaUpload:P.a,addMediaToDM:(t=n.location.state,function(e,r,n){var a=t&&t.dmConversationId;return Object(E.a)(a,e,r,n)}),fetchInitialIfNeeded:r.fetchInitialIfNeeded,fetchNextIfNeeded:r.fetchNextIfNeeded,scribeAction:_.c,updateSingleComposerV2:w.w}})),N=r("v//M"),I=r("x5W0"),A=r("U+bB"),M=r("cm6r"),G=r("rHpw");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var T=function(e){h()(r,e);var t=F(r);function r(){return c()(this,r),t.apply(this,arguments)}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.backgroundColor,r=e.height,n=e.onClick,a=e.width;return b.createElement(M.a,{onPress:n,style:[q.imageContainer,K(t,r,a).background]},this._renderPreview())}},{key:"_renderPreview",value:function(){var e=this.props,t=e.altText,r=e.animatedMediaUrl,n=e.height,a=e.shouldAutoPlayGif,o=e.stillMediaUrl,c={height:n,width:e.width,uri:a?r:o};return b.createElement(A.a,{accessibilityLabel:t,source:c})}}]),r}(b.Component),K=function(e,t,r){return G.a.create((function(n){return{background:{backgroundColor:e,height:t,width:r}}}))},q=G.a.create((function(e){return{imageContainer:{marginHorizontal:"1px",overflow:"hidden",flexShrink:1}}})),H=T,L=r("MLl7"),U=r("3XMw"),B=r.n(U),W=r("TEoO"),V=r("eyty"),z=r("7nmT"),Y=r.n(z),Z=r("MWbm");r("KOtZ");function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e,t){var r=e.reduce((function(e,t){var r=t.original_image;return e+r.width/r.height}),0);return Math.ceil(t/r)};function $(e,t,r){return e.reduce((function(e,n,a){return e[e.length-1].push(X(X({},n),{},{index:a})),e[e.length-1].length>0&&J(e[e.length-1],r)<t&&e.push([]),e}),[[]]).filter((function(e){return e.length>0}))}var ee=r("VPAj"),te=r("oQhu"),re=r("I7xG"),ne=r("FIs5");function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var oe=B.a.a66b7760,ce=B.a.b719e223,ie=B.a.aed71818,ue=function(e){return e.map((function(e){return e.id})).join("-")},le=Object(ee.a)(null),se=[],fe=function(e){h()(r,e);var t=ae(r);function r(e,n){var o;return c()(this,r),o=t.call(this,e,n),v()(s()(o),"_rootNode",null),v()(s()(o),"_render",(function(){var e=o.props,t=e.query,r=e.items,n=o.state.width,a=r?o._brickLayout(r,150,n):se;return n>0?b.createElement(W.a,{assumedItemHeight:150,cacheKey:"gifSearchCategory/".concat(t),footer:o._renderFooter(),identityFunction:ue,items:a,noItemsRenderer:o._renderEmptyItem,onNearEnd:o._handleFetchNext,renderer:o._getRowRenderer()}):null})),v()(s()(o),"_getRowRenderer",Object(re.a)(s()(o),(function(e){return e.shouldAutoPlayGif}),(function(e){return function(t){var r=o.state.width,n=J(t,r),c=r-2*t.length-1,i=0;return b.createElement(Z.a,{style:[he.imageRow,{height:n}]},t.map((function(r,u){var l=a()(r.thumbnail_images,1)[0],s=n/l.height,f=u===t.length-1?c-i:Math.round(l.width*s),h=l.url,d=l.still_image_url;return i+=f,b.createElement(H,{altText:r.alt_text||oe,animatedMediaUrl:h,backgroundColor:Object(I.a)(r.index),height:n,key:r.index,onClick:o._handleClickFactory(r),shouldAutoPlayGif:e,stillMediaUrl:d,width:f})})))}}))),v()(s()(o),"_handleClickFactory",(function(e){return function(){var t=o.props,r=t.addExternalMediaUpload,n=t.addMediaToDM,c=t.gifSearchKey,i=t.fromSearch,u=t.history,l=t.scribeAction,s=t.updateSingleComposerV2,f=e.alt_text,h=e.found_media_origin,d=e.provider,y=e.original_image.url,p=e.preview_image,g=p.width,m=p.height,b=p.url,O=a()(e.thumbnail_images,1)[0],S=e.url,_=r({mediaCategory:c===L.a.Composition?V.b.TweetGif:V.b.DMGif,mediaType:"image/gif",previewMediaType:"video/mp4",previewUrl:b,sourceUrl:y,stillMediaUrl:O.still_image_url,width:g,height:m}).map((function(e){return e.id})),w={found_media_origin:h,provider:d,url:S},P=f?v()({},_[0].toString(),{defaultAltText:f}):{};c===L.a.Composition?s({updates:{mediaIds:_,gifMetadata:w,mediaMetadata:P}}):c===L.a.DMComposition&&n(_,w,P),l({page:c,section:"gif_search",element:"category",action:i?"search":"select"}),u.go(-2)}})),v()(s()(o),"_renderEmptyItem",(function(){return b.createElement(ne.a,{header:ce,message:ie})})),v()(s()(o),"_renderFooter",Object(re.a)(s()(o),(function(e){return e.nextFetchStatus}),(function(e){return b.createElement(N.a,{fetchStatus:e,onRequestRetry:o._handleFetchNext,render:le})}))),v()(s()(o),"_handleFetch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.props.query,t=o.props.fetchInitialIfNeeded;t({query:e})})),v()(s()(o),"_handleFetchNext",(function(){var e=o.props,t=e.query;(0,e.fetchNextIfNeeded)({query:t})})),v()(s()(o),"_handleResize",(function(){o._rootNode&&o._rootNode instanceof Element&&o.setState({width:o._rootNode.clientWidth})})),v()(s()(o),"_brickLayout",Object(te.a)($)),v()(s()(o),"_setRootNode",(function(e){o._rootNode=Y.a.findDOMNode(e)})),o.state={width:0},o}return u()(r,[{key:"UNSAFE_componentWillMount",value:function(){this._handleFetch()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.query!==e.query&&this._handleFetch(e.query)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._handleResize),this._handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleResize)}},{key:"render",value:function(){var e=this.props.initialFetchStatus;return b.createElement("div",{ref:this._setRootNode},b.createElement(N.a,{fetchStatus:e,onRequestRetry:this._handleFetch,ref:this._setRootNode,render:this._render}))}}]),r}(b.Component);v()(fe,"defaultProps",{fromSearch:!1});var he=G.a.create((function(e){return{emptyItem:{display:"inline-block",paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.large},imageRow:{flexDirection:"row",marginBottom:2}}}));t.a=k(fe)},TEoO:function(e,t,r){"use strict";var n=r("m3Bd"),a=r.n(n),o=r("ERkP"),c=r("5UID"),i=r("3GUV"),u=r("iBK2"),l=o.createElement(i.a,null),s=function(e){var t=e.accessibilityTitle,r=a()(e,["accessibilityTitle"]),n=o.createElement(u.b,r);return t?o.createElement(c.a,{title:t},n):n};s.defaultProps={footer:l},t.a=s},XYn1:function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchSearchScreen",(function(){return ne}));var n=r("ERkP"),a=(r("1t7P"),r("2G9S"),r("LW0h"),r("jwue"),r("z84I"),r("daRM"),r("FtHn"),r("+KXO"),r("7x/C"),r("OZaJ"),r("DZ+c"),r("+oxZ"),r("ddV6")),o=r.n(a),c=r("VrFO"),i=r.n(c),u=r("Y9Ll"),l=r.n(u),s=r("1Pcy"),f=r.n(s),h=r("5Yy7"),d=r.n(h),y=r("N+ot"),p=r.n(y),g=r("AuHH"),m=r.n(g),v=r("KEM+"),b=r.n(v),O=r("zh9S"),S=r("pX0s"),_=r("lnti"),w=r("oEGd"),P=r("hqKg"),E=S.a,j=Object(P.createSelector)((function(e){return E.selectItems(e)}),(function(e){return E.selectInitialFetchStatus(e)}),(function(e,t){return{categories:e&&Object(_.a)(e.map((function(e){return e.display_name?e:void 0}))),initialFetchStatus:t}})),R={fetchInitialIfNeeded:E.fetchInitialIfNeeded,fetchNextIfNeeded:E.fetchNextIfNeeded,scribeAction:O.c},x=Object(w.g)(j,R),C=r("7JQg"),D=r("v//M"),k=r("jHSc"),N=r("x5W0"),I=r("MLl7"),A=r("ij+d"),M=r("3XMw"),G=r.n(M),F=r("cm6r"),T=r("t62R"),K=r("rHpw"),q=r("U+bB"),H=r("MWbm");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var W=G.a.c6f5ac52,V=function(e){d()(r,e);var t=B(r);function r(){var e;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(f()(e),"_handleClickFactory",(function(t){return function(){var r=e.props,n=r.gifSearchKey,a=r.history,o=a.location.state&&a.location.state.dmConversationId;a.push({pathname:"".concat(A.GifSearchPaths.category,"/").concat(t.id),state:{category:t,gifSearchKey:n,dmConversationId:o}})}})),e}return l()(r,[{key:"render",value:function(){var e=this.props,t=e.category,r=e.index,a=e.withLeftMargin,o=t.display_name,c=t.original_image.still_image_url;return n.createElement(F.a,{onPress:this._handleClickFactory(t),style:[Y.category,a&&Y.leftMargin]},n.createElement(q.a,{source:c,style:[Y.categoryImage,{backgroundColor:Object(N.a)(r)}]}),n.createElement(H.a,{style:Y.categoryNameContainer},n.createElement(T.c,{color:"white",size:"large",weight:"bold"},o)))}}]),r}(n.PureComponent),z=function(e){d()(r,e);var t=B(r);function r(){var e;i()(this,r);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return e=t.call.apply(t,[this].concat(c)),b()(f()(e),"_render",(function(){var t=e.props,r=t.categories,a=t.gifSearchKey,c=t.history,i=[];if(r)for(var u=0;u<r.length;u+=2)i.push([r[u],r[u+1]]);return n.createElement(H.a,null,n.Children.toArray(i.map((function(e,t){var r=o()(e,2),i=r[0],u=r[1];return n.createElement(H.a,{style:[Y.row,0===t&&Y.firstRow]},n.createElement(V,{category:i,gifSearchKey:a,history:c,index:2*t,withLeftMargin:!1}),u?n.createElement(V,{category:u,gifSearchKey:a,history:c,index:2*t+1,withLeftMargin:!0}):null)}))))})),b()(f()(e),"_handleBackClick",(function(){var t=e.props,r=t.history,n=t.location,a=t.scribeAction,o=t.scribeNamespace;n&&n.state&&n.state.searchFocused||a(U(U({},o),{},{action:"cancel"})),r.goBack({backLocation:"/"})})),b()(f()(e),"_handleFetch",(function(){(0,e.props.fetchInitialIfNeeded)()})),e}return l()(r,[{key:"UNSAFE_componentWillMount",value:function(){this._handleFetch()}},{key:"render",value:function(){var e=this.props,t=e.initialFetchStatus,r=e.history,a=e.searchBox;return n.createElement(k.b,{documentTitle:W,history:r,middleControl:a,onBackClick:this._handleBackClick},n.createElement(D.a,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._render}))}}]),r}(n.Component),Y=K.a.create((function(e){return{row:{flexDirection:"row",marginTop:e.spaces.xxSmall},firstRow:{marginTop:0},category:{height:"10rem",flexGrow:1},leftMargin:{marginLeft:e.spaces.xxSmall},categoryImage:{flexGrow:1},categoryNameContainer:{position:"absolute",bottom:0,width:"100%",padding:e.spaces.xxSmall,backgroundImage:"linear-gradient(to top, rgba(0,0,0,0.75), rgba(0,0,0,0))"}}})),Z=Object(C.c)({element:"category"})(x(z)),Q=r("hiCj"),X=r("VAZu"),J=r("EP6G");function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var ee=G.a.ab468378,te=function(e){d()(r,e);var t=$(r);function r(){var e;i()(this,r);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),b()(f()(e),"state",{shouldAutoPlayGifOverride:null}),b()(f()(e),"_handleToggleChange",(function(t){e.setState({shouldAutoPlayGifOverride:t})})),b()(f()(e),"_renderHeader",(function(){var t=e.props,r=t.history,a=t.searchBox;return n.createElement(X.a,{history:r,middleControl:a})})),e}return l()(r,[{key:"render",value:function(){var e=this.props,t=e.gifSearchKey,r=e.history,a=e.location,o=e.query,c=e.searchBox,i=e.shouldAutoPlayGif,u=this.state.shouldAutoPlayGifOverride,l=Object(I.c)(u,i);return n.createElement(k.b,{backButtonType:"back",documentTitle:ee({query:o}),history:r,middleControl:c},n.createElement(Q.a,{location:a,onToggleChange:this._handleToggleChange,shouldAutoPlayGif:l}),n.createElement(J.a,{fromSearch:!0,gifSearchKey:t,history:r,module:S.c,query:o,shouldAutoPlayGif:l}))}}]),r}(n.Component),re=Object(C.c)({element:"gallery"})(te),ne=function(e){var t=e.gifSearchKey,r=e.history,a=e.location,o=e.searchBox,c=e.shouldAutoPlayGif,i=a.state&&a.state.query;return i?n.createElement(re,{gifSearchKey:t,history:r,location:a,query:i,searchBox:o,shouldAutoPlayGif:c}):n.createElement(Z,{gifSearchKey:t,history:r,location:a,searchBox:o})};t.default=ne},hiCj:function(e,t,r){"use strict";r("2G9S"),r("7x/C"),r("OZaJ"),r("DZ+c");var n=r("VrFO"),a=r.n(n),o=r("Y9Ll"),c=r.n(o),i=r("1Pcy"),u=r.n(i),l=r("5Yy7"),s=r.n(l),f=r("N+ot"),h=r.n(f),d=r("AuHH"),y=r.n(d),p=r("KEM+"),g=r.n(p),m=r("ERkP"),v=r("P1r1"),b=r("oEGd"),O=r("0KEI"),S={createLocalApiErrorHandler:Object(O.d)("FOUND_MEDIA_AUTOPLAY_TOGGLE"),updateSettings:v.D},_=Object(b.g)((function(){return{}}),S),w=r("3XMw"),P=r.n(w),E=r("fHOo"),j=r("MWbm"),R=r("t62R"),x=r("CK8+"),C=r("rHpw");r("aWzz");function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h()(this,r)}}var k=P.a.j7fc4f9b,N=function(e){s()(r,e);var t=D(r);function r(){var e;a()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),g()(u()(e),"_handleSwitchChanged",(function(t){var r=e.props,n=r.createLocalApiErrorHandler,a=r.onToggleChange;(0,r.updateSettings)({shouldAutoPlayGif:t}).catch(n({showToast:!0})),a(t)})),e}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.location,r=e.shouldAutoPlayGif,n=t.state&&t.state.query,a=t.state&&t.state.category?t.state.category.display_name:"";return Object(E.a)()&&(n||a)?m.createElement(j.a,{style:I.root},m.createElement(R.c,{color:"deepGray"},k),m.createElement(x.a,{accessibilityLabel:k,onValueChange:this._handleSwitchChanged,value:r})):null}}]),r}(m.Component),I=C.a.create((function(e){return{root:{flexDirection:"row",justifyContent:"space-between",margin:e.spaces.xSmall}}}));t.a=_(N)},"ij+d":function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchPaths",(function(){return V})),r.d(t,"GifSearchScreen",(function(){return z}));r("2G9S"),r("7x/C"),r("JtPf"),r("OZaJ"),r("KqXw"),r("DZ+c"),r("MvUL"),r("3voH");var n=r("VrFO"),a=r.n(n),o=r("Y9Ll"),c=r.n(o),i=r("1Pcy"),u=r.n(i),l=r("5Yy7"),s=r.n(l),f=r("N+ot"),h=r.n(f),d=r("AuHH"),y=r.n(d),p=r("KEM+"),g=r.n(p),m=r("ERkP"),v=r("38/B"),b=r("oEGd"),O=r("hqKg"),S=r("H9MA"),_=r("zHh/"),w=r("P1r1"),P=Object(O.createSelector)(w.f,w.j,S.d,(function(e,t,r){return{isDataSaverEnabled:t,shouldAutoPlayGif:(e.shouldAutoPlayGif||Object(_.a)(r))&&!v.a.reducedMotionEnabled}})),E=Object(b.c)(P),j=r("Y6L+"),R=r("3XMw"),x=r.n(R),C=r("VwDm"),D=r("MLl7"),k=r("/de5"),N=r("wytG"),I=r("7JQg"),A=r("MWbm"),M=r("6OUF"),G=r("/yvb"),F=r("rHpw"),T=r("oQhu"),K=r("VY6S"),q=r("zCf4");function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h()(this,r)}}var L=x.a.a50ba821,U=x.a.a9ae1e78,B=Object(N.a)((function(){return Promise.resolve().then(r.bind(null,"XYn1"))})),W=Object(N.a)((function(){return Promise.resolve().then(r.bind(null,"k5pS"))})),V={category:"/i/foundmedia/category",search:"/i/foundmedia/search"},z=function(e){s()(r,e);var t=H(r);function r(e){var n;return a()(this,r),n=t.call(this,e),g()(u()(n),"state",{searchDisabled:!0}),g()(u()(n),"_gifSearchKey",n._getGifSearchKey()),g()(u()(n),"_getScribeNamespace",Object(T.a)((function(e){return{page:e,section:"gif_search"}}))),g()(u()(n),"_setTextInputRef",(function(e){n._textInputRef=e})),g()(u()(n),"_handleChange",(function(e){var t=e.currentTarget.value;n._shouldRenderResultsOnChange?n._goToQueryDebounced(t):n.setState({searchDisabled:!t})})),g()(u()(n),"_handleClear",(function(){var e=n.props,t=e.history,r=e.isDataSaverEnabled,a=e.location,o=a.pathname.startsWith(V.category),c=a.pathname===V.search&&a.state&&a.state.query;!r&&(o||c)?t.goBack():r&&n.setState({searchDisabled:!0})})),g()(u()(n),"_handleSubmit",(function(){var e=n._textInputRef&&n._textInputRef.getValue();n._goToQuery(e)})),g()(u()(n),"_handleSearch",(function(e){var t=e.currentTarget.value;n._goToQuery(t)})),g()(u()(n),"_goToQuery",(function(e){var t=n.props,r=t.history,a=t.isDataSaverEnabled,o=t.location,c={};c.pathname=V.search;var i=o.state&&o.state.query,u=o.pathname===V.search&&!i,l=o.pathname.startsWith(V.category)||o.pathname===V.search&&i,s=!a&&l,f=o.state&&o.state.dmConversationId;e?(c.state={dmConversationId:f,query:e},u?r.push(c):r.replace(c)):s&&r.goBack()})),n._goToQueryDebounced=Object(K.a)((function(){var e;return(e=n)._goToQuery.apply(e,arguments)}),500),n._shouldRenderResultsOnChange=!n.props.isDataSaverEnabled,n}return c()(r,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.history;this._gifSearchKey||e.replace("/")}},{key:"render",value:function(){var e=this.props,t=e.history,r=e.location,n=e.shouldAutoPlayGif,a={gifSearchKey:this._gifSearchKey,history:t,location:r,searchBox:this._renderSearchBox(),shouldAutoPlayGif:n},o=this._gifSearchKey?this._gifSearchKey:void 0;return this._gifSearchKey?m.createElement(I.b,{namespace:this._getScribeNamespace(o)},m.createElement(q.d,null,m.createElement(q.b,{exact:!0,path:V.search},m.createElement(B,a)),m.createElement(q.b,{exact:!0,path:"".concat(V.category,"/").concat(j.k)},m.createElement(W,a)),m.createElement(q.b,{component:k.a}))):null}},{key:"_getGifSearchKey",value:function(){var e=this.props.location.state||{},t=e.gifSearchKey,r=e.gifSearchKeySource;return t||r&&Object(D.b)(r)&&r}},{key:"_getQueryOrCategory",value:function(){var e=this.props.location,t=e.state&&e.state.query,r=e.state&&e.state.category?e.state.category.display_name:"";return t||r}},{key:"_renderSearchBox",value:function(){var e=this.state.searchDisabled,t=this._getQueryOrCategory();return m.createElement(A.a,{style:Y.searchContainer},m.createElement(M.a,{Icon:C.a,autoFocus:!0,defaultValue:t,key:t,onChange:this._handleChange,onClear:this._handleClear,onSubmitEditing:this._handleSearch,placeholder:L,ref:this._setTextInputRef,style:Y.searchInput,withClearButton:!0}),this._shouldRenderResultsOnChange?null:m.createElement(G.a,{disabled:e,onPress:this._handleSubmit,size:"normalCompact",style:Y.searchButton,type:"primary"},U))}}]),r}(m.Component),Y=F.a.create((function(e){return{searchContainer:{alignItems:"center",flex:1,flexDirection:"row",marginVertical:e.spaces.xSmall},searchInput:{height:"100%"},searchButton:{marginStart:e.spaces.xSmall}}}));t.default=E(z)},k5pS:function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchCategory",(function(){return x}));r("2G9S"),r("7x/C"),r("OZaJ"),r("DZ+c");var n=r("VrFO"),a=r.n(n),o=r("Y9Ll"),c=r.n(o),i=r("1Pcy"),u=r.n(i),l=r("5Yy7"),s=r.n(l),f=r("N+ot"),h=r.n(f),d=r("AuHH"),y=r.n(d),p=r("KEM+"),g=r.n(p),m=r("ERkP"),v=r("hiCj"),b=r("pX0s"),O=r("7JQg"),S=r("jHSc"),_=r("EP6G"),w=r("3XMw"),P=r.n(w),E=r("MLl7");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h()(this,r)}}var R=P.a.f5ff0d6f,x=function(e){s()(r,e);var t=j(r);function r(){var e;a()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),g()(u()(e),"state",{shouldAutoPlayGifOverride:null}),g()(u()(e),"_handleToggleChange",(function(t){e.setState({shouldAutoPlayGifOverride:t})})),e}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.gifSearchKey,r=e.history,n=e.location,a=e.searchBox,o=e.shouldAutoPlayGif,c=n.state&&n.state.category,i=c&&c.display_name,u=this.state.shouldAutoPlayGifOverride,l=Object(E.c)(u,o);return m.createElement(S.b,{backButtonType:"back",documentTitle:R({category:i}),history:r,middleControl:a},m.createElement(v.a,{location:n,onToggleChange:this._handleToggleChange,shouldAutoPlayGif:l}),!!c&&m.createElement(_.a,{gifSearchKey:t,history:r,module:b.b,query:c.id,shouldAutoPlayGif:l}))}}]),r}(m.Component);t.default=Object(O.c)({element:"gallery"})(x)},pX0s:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return P}));r("1t7P"),r("2G9S"),r("LW0h"),r("jwue"),r("daRM"),r("FtHn"),r("+KXO"),r("KqXw"),r("LJOr"),r("+oxZ");var n=r("KEM+"),a=r.n(n),o=r("RhWx"),c=r.n(o),i=r("9OUN"),u=(r("7x/C"),r("JtPf"),r("m3Bd")),l=r.n(u),s=r("oEOe"),f=r("kGix"),h="rweb/".concat("gifSearch");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={},g={cursor:{},items:[],initialFetchStatus:f.a.NONE,nextFetchStatus:f.a.NONE},m=function(e){var t=e.defaultQuery,r=e.getApiMethod,n=e.getParams,o=e.mergeNewItems,c=e.localNamespace,i=s.a("".concat(h,"/").concat(c),"FETCH"),u=function(e,t,r){var n=r.fetchStatus,o=l()(r,["fetchStatus"]),c=e[t]||{},i=(c.cursor||{}).next?"nextFetchStatus":"initialFetchStatus";return y(y({},e),{},a()({},t,y(y(y(y({},g),c),o),{},a()({},i,n))))},d=function(e){var t=e.cursor,a=e.query;return function(e,o,c){var u=c.api;return s.b(e,{request:r(u),params:n(t,a)})({actionTypes:i,meta:{query:a}})}},m=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return(e.gifSearch[c]||{})[r]||{}};return{actionTypes:i,fetchInitialIfNeeded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.query,n=void 0===r?t:r;return function(e,t,r){r.api;var a=m(t(),n);return a.initialFetchStatus===f.a.LOADING||a.items?Promise.resolve():e(d({query:n}))}},fetchNextIfNeeded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.query,n=void 0===r?t:r;return function(e,t,r){r.api;var a=m(t(),n),o=a.cursor,c=void 0===o?{}:o;return a.nextFetchStatus!==f.a.LOADING&&c.next?e(d({query:n,cursor:c.next})):Promise.resolve()}},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.REQUEST:var r=t.meta.query;return u(e,r,{fetchStatus:f.a.LOADING});case i.FAILURE:var n=t.meta.query;return u(e,n,{fetchStatus:f.a.FAILED});case i.SUCCESS:var a=t.payload.cursor,c=t.meta.query,l=(e[c]||{}).items||[];return u(e,c,{cursor:a,fetchStatus:f.a.LOADED,items:o(l,t.payload)});default:return e}},selectInitialFetchStatus:function(e,t){return m(e,t).initialFetchStatus||f.a.NONE},selectItems:function(e,t){return m(e,t).items},selectNextFetchStatus:function(e,t){return m(e,t).nextFetchStatus||f.a.NONE},selectQueryState:m}},v=r("Ssj5");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){return e.filter((function(e){var t=e.original_image,r=(t=void 0===t?{}:t).height,n=t.width;return r>0&&n>0}))},_=m({defaultQuery:"categories",getApiMethod:function(e){return e.GifSearch.categories},getParams:function(e){return e?{cursor:e}:{}},mergeNewItems:function(e,t){return[].concat(c()(e),c()(t.data.groups))},localNamespace:"categories"}),w=m({getApiMethod:function(e){return e.GifSearch.category},getParams:function(e,t){return O({category:t},e?{cursor:e}:{})},mergeNewItems:function(e,t){return[].concat(c()(e),c()(S(t.data.items||[])))},localNamespace:"category"}),P=m({getApiMethod:function(e){return e.GifSearch.search},getParams:function(e,t){return O({q:t},e?{cursor:e}:{})},mergeNewItems:function(e,t){return[].concat(c()(e),c()(S(t.data.items||[])))},localNamespace:"search"}),E=Object(i.c)({categories:_.reducer,category:w.reducer,search:P.reducer});v.a.register(a()({},"gifSearch",E))},x5W0:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("rHpw").a.theme.colors,a=[n.blue,n.green,n.orange,n.purple,n.red,n.yellow],o=function(){return Math.floor(Math.random()*a.length+1)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();return a[e%a.length]}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.GifSearch.3ed96e45.js.map