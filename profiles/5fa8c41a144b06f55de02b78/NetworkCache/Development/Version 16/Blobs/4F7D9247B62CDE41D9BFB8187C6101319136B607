(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"+Bsv":function(e,t,n){"use strict";var r=n("ERkP"),a=n("3XMw"),o=n.n(a),i=n("M2x3"),c=n("/yvb"),s=n("rHpw"),l=o.a.bb081ea1,u=r.memo((function(e){var t=e.onPress,n=e.to;return r.createElement(c.a,{accessibilityLabel:l,clientEventViewType:"settings_button",icon:r.createElement(i.a,null),link:n,onPress:t,pullRight:!0,style:d.button,type:"text"})})),d=s.a.create((function(e){return{button:{marginVertical:"calc(-".concat(e.spaces.xSmall,")")}}}));t.a=u},"3GUV":function(e,t,n){"use strict";n("7x/C"),n("Blm6"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("5Yy7"),s=n.n(c),l=n("N+ot"),u=n.n(l),d=n("AuHH"),p=n.n(d),f=n("ERkP"),h=n("rHpw"),m=n("MWbm");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var b=function(e){s()(n,e);var t=v(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return f.createElement(m.a,{style:y.root})}}]),n}(f.Component),y=h.a.create((function(e){return{root:{height:"".concat(5*parseInt(e.lineHeight,10),"rem")}}}));t.a=b},"5UID":function(e,t,n){"use strict";n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("5Yy7"),s=n.n(c),l=n("N+ot"),u=n.n(l),d=n("AuHH"),p=n.n(d),f=n("ERkP"),h=n("3XMw"),m=n.n(h),v=n("rHpw"),b=(n("aWzz"),n("+/1j")),y=n("MWbm");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var E=m.a.e5b0063d,_=0,O=function(e){s()(n,e);var t=g(n);function n(){var e;return a()(this,n),(e=t.call(this))._listDomId="accessible-list-".concat(_),_+=1,e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=E({title:n});return f.createElement(y.a,{accessibilityRole:"region","aria-labelledby":this._listDomId},f.createElement(b.a,{accessibilityRole:"heading","aria-level":1,nativeID:this._listDomId,style:v.a.visuallyHidden},n),f.createElement(y.a,{accessibilityLabel:r},t))}}]),n}(f.Component);t.a=O},"7oQg":function(e,t,n){"use strict";n.r(t);n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("WNMA"),n("MvUL");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("5Yy7"),s=n.n(c),l=n("N+ot"),u=n.n(l),d=n("AuHH"),p=n.n(d),f=n("ERkP"),h=n("RqPI"),m=n("uDfI"),v=n("3nOA"),b=n("0KEI"),y=n("hqKg"),g=n("GOQE"),E=n("kGix"),_=n("v//M"),O=n("fs1G"),C=(n("aWzz"),n("G6rE"));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var w=Object(y.createSelector)([h.g,function(e,t){return t.match.params.screenName},function(e,t){return C.e.selectIdByScreenName(e,t.match.params.screenName)}],(function(e,t,n){return{conversationId:e&&n?Object(v.a)(e,n):null,screenName:t}})),S={createLocalApiErrorHandler:Object(b.d)("CREATE_CONVERSATION"),fetchOneByScreenNameWithExtraFieldsIfNeeded:C.e.createFetchOneByScreenNameWithExtraFieldsIfNeeded([C.a,C.d])},x=function(e){s()(n,e);var t=I(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.fetchOneByScreenNameWithExtraFieldsIfNeeded,r=e.history;n(e.screenName).catch((function(e){t(g.a)(e),r.replace("/messages")}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.history;t&&n.replace("/messages/".concat(t))}},{key:"render",value:function(){return f.createElement(_.a,{fetchStatus:E.a.LOADING,render:O.a})}}]),n}(f.Component);t.default=Object(m.b)(w,S)(x)},Avzu:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("Lsrn"),c=n("k/Ka");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("svg",l(l({},e),{},{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})))};u.metadata={width:24,height:24},t.a=u},BUB3:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("m3Bd"),i=n.n(o),c=n("ERkP"),s=n("sNn6"),l=n("rHpw"),u=n("MWbm");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=l.a.create((function(e){return{activeRoot:{backgroundColor:e.colors.faintGray},overlay:p(p({},l.a.absoluteFillObject),{},{borderRightStyle:"solid",borderRightWidth:e.borderWidths.medium,borderRightColor:e.colors.primary,zIndex:1})}}));t.a=function(e){var t=e.children,n=i()(e,["children"]);return c.createElement(s.a,n,(function(e){return c.createElement(u.a,{style:[e&&f.activeRoot]},"function"==typeof t?t(e):t,e?c.createElement(u.a,{pointerEvents:"none",style:f.overlay}):null)}))}},CFcj:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationGroupInfoScreen",(function(){return ne}));n("lTEL"),n("7x/C"),n("JtPf"),n("OZaJ"),n("DZ+c"),n("87if"),n("kYxP");var r=n("ddV6"),a=n.n(r),o=n("VrFO"),i=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("1Pcy"),u=n.n(l),d=n("5Yy7"),p=n.n(d),f=n("N+ot"),h=n.n(f),m=n("AuHH"),v=n.n(m),b=n("KEM+"),y=n.n(b),g=n("ERkP"),E=(n("KqXw"),n("WNMA"),n("MMRb")),_=n("AspN"),O=n("RqPI"),C=n("oEGd"),I=n("0KEI"),w=n("hqKg"),S=n("p9G8"),x=n("AQOc"),P=n("/NU0"),D=n("G6rE"),k=function(e,t){return t.match.params.conversationId},M=Object(w.createSelector)((function(e,t){return E.selectConversation(e,k(0,t))}),E.selectEntries,k,(function(e,t){return E.selectConversationFetchStatus(e,k(0,t))}),O.g,D.e.selectAll,(function(e,t){var n=E.selectConversationAvatarMediaId(e,k(0,t)),r=Object(P.a)(n)?_.g(e,n):[];return a()(r,1)[0]}),(function(e,t){return E.selectConversationAvatarMediaIsUploading(e,k(0,t))}),(function(e,t){return E.selectConversationAvatarMediaUploadProgress(e,k(0,t))}),(function(e,t,n,r,a,o,i,c,s){var l=e&&e.data,u=l&&Object(x.b)(l,t,o),d=u&&Object(S.a)(u,a);if(!a)throw new Error("logged-in user not found");return{avatarMedia:i,conversation:u,conversationId:n,fetchStatus:r,isUploading:c,groupName:d,mediaUploadProgress:s,perspective:a}})),R={addAvatarMedia:E.addAvatarMedia,createLocalApiErrorHandler:Object(I.d)("CONVERSATION_GROUP_INFO_SCREEN"),fetchConversation:E.fetchConversation,fetchConversationIfNeeded:E.fetchConversationIfNeeded,removeAvatarMedia:E.removeAvatarMedia,removeMediaUpload:_.e,setConversationAvatar:E.setConversationAvatar,updateConversationName:E.updateConversationName},j=Object(C.g)(M,R),T=n("7JQg"),A=n("I2k/"),L=n("aA19"),N=n("v//M"),B=n("jHSc"),F=n("3XMw"),U=n.n(F),H=n("mN6z"),G=n("P68U"),V=n("eyty"),W=n("MWbm"),K=n("0yYu"),z=n("mw9i"),q=n("/yvb"),Z=n("JYMr"),X=n("p+r5"),Q=n("rHpw");function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var J=U.a.abd845fd,$=U.a.d87bff5a,ee=U.a.i2209530,te=U.a.cabb453d,ne=function(e){p()(n,e);var t=Y(n);function n(e,r){var o;return i()(this,n),o=t.call(this,e,r),y()(u()(o),"_renderContent",(function(){return g.createElement(W.a,null,o._renderGroupAvatarPicker(),g.createElement(K.a,null),o._renderGroupNameEditor())})),y()(u()(o),"_handleFetch",(function(){var e=o.props,t=e.createLocalApiErrorHandler,n=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:n}).catch(t(Object(A.a)(n)))})),y()(u()(o),"_handleGroupNameUpdated",(function(e){o.setState({groupNameEdit:e.target.value})})),y()(u()(o),"_handleSavePress",(function(){o._savePress()})),y()(u()(o),"_savePress",(function(){var e=o.props,t=e.avatarMedia,n=e.conversationId,r=e.createLocalApiErrorHandler,a=e.fetchConversation,i=e.groupName,c=e.history,s=e.setConversationAvatar,l=e.updateConversationName,u=o.state.groupNameEdit,d=[];return t&&d.push(s(n).catch(r())),u&&i!==u&&d.push(l({conversationId:n,name:u}).catch(r({showToast:!0}))),Promise.all(d).then((function(){a({conversationId:n}).catch(r(Object(A.a)(n))),c.goBack({backLocation:"/messages/".concat(n,"/info"),shouldReplaceOnFallback:!0})}),(function(){return t&&o._clearAvatarMedia(t.id)}))})),y()(u()(o),"_handleAvatarMediaChange",(function(e){var t=a()(e,1)[0],n=o.props,r=n.addAvatarMedia,i=n.avatarMedia,c=n.conversationId;i&&o._clearAvatarMedia(i.id),r(c,t)})),y()(u()(o),"_handleMediaFailure",(function(e){o._clearAvatarMedia(e)})),o.state={groupNameEdit:e.groupName},o}return s()(n,[{key:"componentDidMount",value:function(){this._handleFetch()}},{key:"componentWillUnmount",value:function(){var e=this.props.avatarMedia;e&&this._clearAvatarMedia(e.id)}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(H.a)(e,this.props)||!Object(H.a)(t,this.state)}},{key:"render",value:function(){var e=this.props,t=e.fetchStatus,n=e.conversationId,r=e.history;return g.createElement(B.b,{backLocation:"/messages/".concat(n,"/info"),history:r,rightControl:this._renderRightControl(),title:J},g.createElement(z.a,{style:re.root},g.createElement(N.a,{accessibilityLabel:$,fetchStatus:t,onRequestRetry:this._handleFetch,render:this._renderContent})))}},{key:"_renderRightControl",value:function(){var e=this.props,t=e.avatarMedia,n=e.groupName,r=e.isUploading,a=this.state.groupNameEdit,o=r||!(a&&a!==n||t);return g.createElement(q.a,{children:ee,disabled:o,onPress:this._handleSavePress,size:"normalCompact",type:"primary"})}},{key:"_renderGroupAvatarPicker",value:function(){var e=this.props,t=e.avatarMedia,n=e.conversation,r=e.mediaUploadProgress,a=e.perspective,o=g.createElement(L.a,{conversation:n,perspective:a});return g.createElement(W.a,null,g.createElement(Z.a,{progress:r}),g.createElement(W.a,{style:re.avatarContainerRoot},g.createElement(G.a,{borderRadius:"infinite",currentContent:o,location:V.c.Avatar,mediaItem:t||void 0,onChange:this._handleAvatarMediaChange,onFailure:this._handleMediaFailure,rootStyle:re.avatarContainer})))}},{key:"_renderGroupNameEditor",value:function(){return g.createElement(X.a,{label:te,maxLength:50,name:"groupNameEdit",onChange:this._handleGroupNameUpdated,style:re.groupNameEditor,value:this.state.groupNameEdit||""})}},{key:"_clearAvatarMedia",value:function(e){var t=this.props,n=t.avatarMedia,r=t.conversationId,a=t.removeAvatarMedia,o=t.removeMediaUpload;n&&n.uploading||o(e),a(r,e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.groupName;return"string"==typeof n&&null===t.groupNameEdit?{groupNameEdit:n}:null}}]),n}(g.Component),re=Q.a.create((function(e){return{root:{backgroundColor:e.colors.faintGray},avatarContainerRoot:{alignItems:"center",backgroundColor:e.colors.cellBackground,paddingVertical:e.spaces.medium},groupNameEditor:{backgroundColor:e.colors.cellBackground},avatarContainer:{height:"calc(5 * ".concat(e.spaces.medium,")"),width:"calc(5 * ".concat(e.spaces.medium,")")}}}));t.default=Object(T.c)({page:"messages",section:"group_settings"})(j(ne))},EPsT:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("jtO7"),g=n("eb3s");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var _=function(e){u()(n,e);var t=E(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(s()(r),"_handleClick",(function(e){r.setState({showConfirmation:!0})})),v()(s()(r),"_handleCancel",(function(){r.setState({showConfirmation:!1})})),v()(s()(r),"_handleConfirm",(function(){r.setState({showConfirmation:!1}),r.props.onConfirmationSheetConfirm()})),r.state={showConfirmation:!1},r}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.confirmationSheetConfirmButtonLabel,r=e.confirmationSheetHeadline,a=e.confirmationSheetText,o=e.label,i=e.confirmationSheetConfirmButtonType,c=e.withBottomBorder;return b.createElement(b.Fragment,null,b.createElement(y.a,{color:t,label:o,onPress:this._handleClick,withBottomBorder:c}),this.state.showConfirmation?b.createElement(g.a,{confirmButtonLabel:n,confirmButtonType:i,headline:r,onCancel:this._handleCancel,onConfirm:this._handleConfirm,text:a}):null)}}]),n}(b.Component);v()(_,"defaultProps",{color:"red"})},M2mT:function(e,t,n){"use strict";n("i4UL"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("m3Bd"),a=n.n(r),o=n("VrFO"),i=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("+/5o"),y=n("ERkP"),g=n("HPNB"),E=n("VAZu"),_=n("wiP2"),O=n("3xLC"),C=n("Es6L"),I=(n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ"),n("rHpw"));function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=I.a.create((function(e){return{fill:{flex:1,alignSelf:"stretch"},viewportView:S(S({},I.a.absoluteFillObject),{},{overflowY:"auto"}),appBarContainer:{backfaceVisibility:"hidden",position:"sticky",top:0,zIndex:1}}})),P=n("MWbm"),D=n("yw4N"),k=n("TnY3"),M=n("cHvH");function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var j=function(e){u()(n,e);var t=R(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this;return y.createElement(M.a,null,(function(t){var n=t.windowWidth;return g.a.isTwoColumnLayout(n)?e._renderForTwoColumnLayout():e._renderForOneColumnLayout()}))}},{key:"_renderForOneColumnLayout",value:function(){var e=this.props,t=e.children,n=(e.leftControl,e.screenType,e.showSubtitleOnWideDetail,e.withBottomBorder,e.withDetailOpen,a()(e,["children","leftControl","screenType","showSubtitleOnWideDetail","withBottomBorder","withDetailOpen"]));return y.createElement(y.Fragment,null,Object(C.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):y.createElement(_.a.Configure,n),t)}},{key:"_renderForTwoColumnLayout",value:function(){return y.createElement(y.Fragment,null,this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())}},{key:"_renderInlineNav",value:function(e){var t=e.isTwoColumnLayout,n=this.props,r=n.TeamsSwitcher,a=n.TabBar,o=n.backLocation,i=n.documentTitle,c=n.headerless,s=n.history,l=n.leftControl,u=n.onBackClick,d=n.rightControl,p=n.screenType,f=n.searchBoxOptions,h=n.secondaryBar,m=n.showSubtitleOnWideDetail,v=n.subtitle,g=n.title,O=n.titleIconCell,C=n.titleIconCellSize,I=n.withBottomBorder,w=n.withDetailOpen,S=n.withSearchBox,D=n.withTweetButton,k="root"===p,M="secondaryRoot"===p,R="primaryDetail"===p,j=k||R&&t,T=k?b.o:R?b.g:void 0,A=y.createElement(P.a,{style:x.appBarContainer},y.createElement(E.a,{backLocation:o,fixed:!1,hideBackButton:j,history:s,leftControl:l,onBackClick:u,rightControl:d,subtitle:R&&m?v:void 0,title:g,titleDomId:T,titleIconCell:O,titleIconCellSize:C,withBottomBorder:Boolean(!h||I)})),L=k||M&&w?null:y.createElement(_.a.Configure,{TabBar:a,TeamsSwitcher:r,backLocation:o,documentTitle:i,headerless:c,onBackClick:u,rightControl:d,searchBoxOptions:f,subtitle:v,title:g,withSearchBox:S,withTweetButton:D});return y.createElement(y.Fragment,null,L,A,h)}},{key:"_renderChildren",value:function(){var e=this.props.children;return this.context.rootDetailPerColumnScroll?y.createElement(P.a,{style:x.fill},y.createElement(D.a,{style:x.viewportView},e)):e}}]),n}(y.Component);v()(j,"contextType",O.a),v()(j,"defaultProps",{screenType:"secondaryDetail",showSubtitleOnWideDetail:!0});t.a=Object(k.a)(j)},Oib4:function(e,t,n){"use strict";n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ");var r=n("KEM+"),a=n.n(r),o=n("ERkP"),i=n("Lsrn"),c=n("k/Ka");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)("svg",l(l({},e),{},{style:[i.a.root,e.style],viewBox:"0 0 24 24"}),o.createElement("g",null,o.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm.025 16.468c-.708 0-1.28-.574-1.28-1.28 0-.71.572-1.282 1.28-1.282.708 0 1.28.573 1.28 1.28.002.708-.57 1.282-1.28 1.282zM14.47 7.636l-1.815 6.098c-.063.212-.258.357-.48.357h-.298c-.222 0-.416-.145-.48-.356L9.583 7.636c-.045-.152-.016-.316.08-.442.093-.127.24-.2.4-.2h3.927c.157 0 .306.073.4.2.094.126.124.29.08.442z"})))};u.metadata={width:24,height:24},t.a=u},P68U:function(e,t,n){"use strict";n("2G9S"),n("hBpG"),n("hCOa"),n("jQ3i"),n("z84I"),n("7x/C"),n("OZaJ"),n("DZ+c"),n("x4t0"),n("87if"),n("uFXj");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("oEGd"),g=n("AspN"),E={addMedia:g.b,processMultipleMedia:g.d},_=Object(y.b)(E),O=n("3XMw"),C=n.n(O),I=n("pKoL"),w=n("MWbm"),S=n("rFBM"),x=n("/yvb"),P=n("9Xij"),D=n("rHpw"),k=n("hOZg"),M=(n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ"),n("Lsrn")),R=n("k/Ka");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(R.a)("svg",T(T({},e),{},{style:[M.a.root,e.style],viewBox:"0 0 24 24"}),b.createElement("g",null,b.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),b.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})))};A.metadata={width:24,height:24};var L=A,N=n("VPdC");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var F=C.a.b87ca51a,U=function(e){u()(n,e);var t=B(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"_getAcceptedFileInputs",(function(){var t=e.props,n=t.acceptGifs,r=t.acceptVideo;return Object(N.b)({acceptGifs:n,acceptVideo:r})})),v()(s()(e),"_handleAddMediaFiles",(function(t){var n=e.props,r=n.addMedia,a=n.location,o=n.onChange,i=n.onFailure,c=n.processMultipleMedia,s=e._getAcceptedFileInputs(),l=Array.from(t).find((function(e){return s.includes(e.type)}));l&&r([l],{location:a}).then((function(e){o&&o(e.map((function(e){return e.id}))),c(e,{onFailure:i})}))})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.borderRadius,n=e.maskStyle,r=e.mediaItem,a=e.onRemove,o=e.rootStyle,i=r&&!r.uploader;return b.createElement(w.a,{style:[G.container,o,H[t]]},b.createElement(S.a,{onFilesAdded:this._handleAddMediaFiles,style:[G.dragDropContainer,H[t]]},this._renderPreview(),i?null:b.createElement(b.Fragment,null,b.createElement(w.a,{style:[G.mask,n,H[t]]}),b.createElement(w.a,{style:G.mediaPicker},this._renderMediaPicker(),a?this._renderMediaRemove():null))))}},{key:"_renderMediaRemove",value:function(){var e=this.props.onRemove;return b.createElement(x.a,{accessibilityLabel:F,icon:b.createElement(k.a,null),onPress:e,style:G.remove,type:"invertedText"})}},{key:"_renderMediaPicker",value:function(){var e=this.props,t=e.acceptGifs,n=e.acceptVideo,r=e.accessibilityLabel;return b.createElement(N.a,{acceptGifs:t,acceptVideo:n,accessibilityLabel:r,icon:b.createElement(L,null),onChange:this._handleAddMediaFiles,type:"invertedText"})}},{key:"_renderPreview",value:function(){var e=this.props,t=e.aspectRatio,n=e.borderRadius,r=e.currentContent,a=e.mediaItem;return a?b.createElement(P.a,{ratio:t},b.createElement(I.a,{borderRadius:n,enableGif:!1,mediaItem:a,style:G.mediaPreview,withCloseButton:!1})):r}}]),n}(b.Component);v()(U,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:"none"});var H=D.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.small},none:{borderRadius:e.borderRadii.none}}})),G=D.a.create((function(e){return{mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},remove:{marginLeft:e.spaces.large},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"}}}));t.a=_(U)},TEoO:function(e,t,n){"use strict";var r=n("m3Bd"),a=n.n(r),o=n("ERkP"),i=n("5UID"),c=n("3GUV"),s=n("iBK2"),l=o.createElement(c.a,null),u=function(e){var t=e.accessibilityTitle,n=a()(e,["accessibilityTitle"]),r=o.createElement(s.b,n);return t?o.createElement(i.a,{title:t},r):r};u.defaultProps={footer:l},t.a=u},VV6P:function(e,t,n){"use strict";n.r(t),n.d(t,"DMLowQualityUntrustedInboxScreen",(function(){return B}));n("2G9S"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("WNMA"),n("uFXj");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("HPNB"),g=n("pxuL"),E=n("hl/W"),_=n("qz2E"),O=n("qS4/"),C=n("3XMw"),I=n.n(C),w=n("xPna"),S=n("f42t"),x=n("M2mT"),P=n("+Bsv"),D=n("MWbm"),k=n("cHvH"),M=n("t62R"),R=n("FIs5"),j=n("rHpw");function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var A=I.a.e7172d70,L=I.a.bef0039f,N=I.a.a5359aac,B=function(e){u()(n,e);var t=T(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"componentDidMount",(function(){e.context.setDmDrawerSupport(!1)})),v()(s()(e),"componentWillUnmount",(function(){e.context.setDmDrawerSupport(!0)})),v()(s()(e),"_renderStickyCopy",(function(){var t=e.props.conversationIds;return b.createElement(k.a,null,(function(e){var n=e.windowWidth,r=y.a.isTwoColumnLayout(n),a=0===t.length;return r||a?null:b.createElement(D.a,{style:F.stickyCopyContainer},b.createElement(M.c,{style:F.stickyCopy},N))}))})),v()(s()(e),"_renderSettingsAppBarButton",(function(){return b.createElement(P.a,{to:"/settings/safety"})})),v()(s()(e),"_renderEmptyDMInbox",(function(){return b.createElement(R.a,{header:L,message:N})})),v()(s()(e),"_handleBackClick",(function(){e.props.history.push("/messages/requests")})),v()(s()(e),"_hasDetailOpen",(function(){return!e.props.match.isExact})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.analytics,n=e.conversationIds,r=e.createLocalApiErrorHandler,a=e.fetchInbox,o=e.fetchInboxHistory,i=e.fetchInboxIfNeeded,c=e.fetchStatus,s=e.fetchUpdates,l=e.isRefreshing,u=e.updateLastSeenEventId;return b.createElement(x.a,{backLocation:"/messages/requests",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:A,withDetailOpen:this._hasDetailOpen()},b.createElement(O.a,{accessibilityTitle:A,analytics:t,conversationIds:n,conversationPathPrefix:"/messages/requests/additional",createLocalApiErrorHandler:r,fetchInbox:a,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:s,isRefreshing:l,isTertiaryInbox:!0,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,updateLastSeenEventId:u,virtualScrollerCacheKey:"dmLowQualityUntrustedInbox"}))}}]),n}(b.Component);v()(B,"contextType",g.a);var F=j.a.create((function(e){return{stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.deepGray,padding:e.spaces.medium}}})),U=Object(S.a)(Object(E.a)({inbox:w.b.tertiary})(B),{directMessages:_.a});t.default=U},XG7v:function(e,t,n){"use strict";n.r(t),n.d(t,"DMComposeScreen",(function(){return ve}));n("1t7P"),n("2G9S"),n("DfhM"),n("i4UL"),n("LW0h"),n("hBpG"),n("jwue"),n("7xRU"),n("z84I"),n("M+/F"),n("ho0z"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("JtPf"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL"),n("+oxZ");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("7JQg"),g=n("s14A"),E=n("uB9N"),_=n("3nOA"),O=n("jHSc"),C=n("wO1l"),I=n("p9G8"),w=n("AQOc"),S=n("3XMw"),x=n.n(S),P="nextButton",D=n("aITJ"),k=n("2dXj"),M=n("MWbm"),R=n("/yvb"),j=n("I7xG"),T=n("w9LO"),A=n("7N4s"),L=n("rHpw"),N=n("zh9S"),B=n("MMRb"),F=n("VnFT"),U=n("1YZw"),H=n("oEGd"),G=n("0KEI"),V=n("hqKg"),W=n("tn7R"),K=n("Hw0q"),z=n("RqPI"),q=n("X/yg"),Z=n("G6rE"),X=Object(K.b)("text"),Q=Object(K.b)("recipient_id"),Y=Object(V.createSelector)(B.selectConversations,(function(e){return Object(W.a)(e).filter((function(e){return!e.isDeleted&&e.data})).map((function(e){return e.data}))})),J=Object(V.createSelector)(Y,X,z.g,q.f,Z.e.selectAll,Q,(function(e,t,n,r,a,o){if(!n)throw new Error("logged-in user not found");return{conversations:e,initialMessage:t,perspective:n,recipientId:o,tweetAttachment:r,users:a}})),$={addToast:U.b,createLocalApiErrorHandler:Object(G.d)("DIRECT_MESSAGES_COMPOSE"),fetchConversationFromParticipants:B.fetchConversationFromParticipants,fetchInboxIfNeeded:B.fetchInboxIfNeeded,popOutConversation:B.popOutConversation,scribeAction:N.c,sendMessage:F.n},ee=Object(H.g)(J,$),te=n("883S"),ne=n("GZwR");function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ie={page:"messages",section:"compose",component:"dm"},ce=x.a.de4669e2,se=x.a.cdcebd22,le=x.a.j9e025aa,ue=x.a.c64c1883,de=x.a.f277e949,pe=x.a.a2ccb2e7,fe=x.a.e3275464,he=x.a.c1df579e,me=x.a.e1bde73e,ve=function(e){u()(n,e);var t=oe(n);function n(e,r){var o;return a()(this,n),o=t.call(this,e,r),v()(s()(o),"_composer",b.createRef()),v()(s()(o),"_setDisableFocusingPreviousActiveElement",(function(e){var t=e.disableFocusingPreviousActiveElement;o._disableFocusingPreviousActiveElement=t})),v()(s()(o),"_renderAppBarRightControl",(function(){var e=o.props.tweetAttachment?fe:he;return b.createElement(M.a,{style:ye.rightColumn},b.createElement(R.a,{disabled:0===o.state.participants.length,onPress:o._handleConversationRouting,size:"normalCompact",style:ye.button,testID:P,type:"primary"},e))})),v()(s()(o),"_getItemIsDisabled",(function(e){var t=o.state,n=t.isGroupSelected,r=t.participants,a=e.data,i=e.type;return(!n||r[0].id!==e.id)&&(!!(n||i===ne.b.DMConversation&&r.length>0)||i===ne.b.User&&!(a.can_dm||a.is_dm_able))})),v()(s()(o),"_getItemDisabledMessage",(function(e){return me({screenName:e.data.screen_name})})),v()(s()(o),"_getInjections",Object(j.a)(s()(o),(function(e){return e.conversations}),(function(e){return e.perspective}),(function(e,t){return t.query}),(function(e,t,n){return Object(C.a)(n,e.map((function(e){return Object(w.b)(e,void 0,o.props.users)})),t).slice(0,12)}))),v()(s()(o),"_handleQueryChange",(function(e){o.setState({query:e})})),v()(s()(o),"_handleSuggestionSelected",(function(e){var t=o.props.perspective,n=o.state,r=n.isGroupSelected,a=n.participants;if(r)e.id===a[0].id&&o._handleRemoveParticipant(e);else if(e.type===ne.b.DMConversation)if(o._isShareViaDM())o._createConversationObjectForSelectionPill(e);else{var i=be(e,t);o._goToConversation(i)}else o._handleParticipantToggle(e)})),v()(s()(o),"_createConversationObjectForSelectionPill",(function(e){var t=o.props,n=t.conversations,r=t.perspective,a=t.users,i=n.find((function(t){return e.id===t.conversation_id}));if(i){var c=Object(w.b)(i,void 0,a),s=Object(I.a)(c,r);e.data=ae(ae({},c),{},{conversationId:e.data.conversationId,name:s||""}),o.setState({isGroupSelected:!0,participants:[e]})}})),v()(s()(o),"_handleParticipantToggle",(function(e){var t=o.state.participants;if(t.find((function(t){return t.id===e.id})))o._handleRemoveParticipant(e);else{var n=t.concat(e);o.setState({participants:n})}})),v()(s()(o),"_handleRemoveParticipant",(function(e){var t=e.type,n=o.state.participants.filter((function(t){return t.id!==e.id}));t===ne.b.DMConversation&&o.setState({isGroupSelected:!1}),o.setState({participants:n})})),v()(s()(o),"_handleConversationRouting",(function(){o.props.tweetAttachment?o._handleShareTweet():o._handleCreateConversation()})),v()(s()(o),"_getExistingGroupConversationFromCache",(function(e){return o.props.conversations.find((function(t){var n=t.participants.length-1;return!t.name&&n===e.length&&e.every((function(e){return Boolean(t.participants.find((function(t){return e.id===t.user_id})))}))}))})),v()(s()(o),"_getExistingGroupConversationFromApi",(function(e){var t=e.map((function(e){return e.id})).join(",");return o.props.fetchConversationFromParticipants(t)})),v()(s()(o),"_getExistingGroupConversation",(function(e){if(e.length<=1)return Promise.resolve();var t=o._getExistingGroupConversationFromCache(e);return t?Promise.resolve(t):o._getExistingGroupConversationFromApi(e)})),v()(s()(o),"_handleCreateConversation",(function(){var e=o.props,t=e.history,n=e.initialMessage,r=e.perspective,a=e.tweetAttachment,i=o.state.participants;if(1===i.length){var c=be(i[0],r);o._goToConversation(c)}else{var s=o._getExistingGroupConversation(i);o._disableFocusingPreviousActiveElement&&o._disableFocusingPreviousActiveElement(),s.then((function(e){if(!e)throw new Error("No conversation found");o._goToConversation(e.conversation_id)})).catch((function(){t.replace({pathname:"/messages/group",query:v()({},"text",n),state:{participants:i,tweetAttachment:a,isNewGroupConversation:!0}})})),o._disableFocusingPreviousActiveElement&&o._disableFocusingPreviousActiveElement()}})),v()(s()(o),"_handleShareTweet",(function(e,t){var n=o.props,r=n.createLocalApiErrorHandler,a=n.tweetAttachment,i=n.perspective,c=o.state.participants,s=1===c.length,l=c;s&&(l=c[0]);var u={senderId:i,tweetAttachment:a,text:t},d=be(l,i);return d?o._sendMessage(d,c,u):o._getExistingGroupConversation(c).catch(r(te.a)).then((function(e){var t=e?e.conversation_id:null;return o._sendMessage(t,c,u)}))})),v()(s()(o),"_sendMessage",(function(e,t,n){var r=o.props,a=r.createLocalApiErrorHandler,i=r.history,c=r.sendMessage,s=ae({conversationId:void 0,recipients:void 0},n);if(!e&&Array.isArray(t)){var l=t.map((function(e){if(e.type===ne.b.User)return e.data.id_str})).filter(Boolean);s.recipients=l}else s.conversationId=e;var u=a(te.b);return o.setState({isSending:!0}),c(s).then((function(e){o._displayDMMessageSentSuccessToast(e),o.setState({isSending:!1}),i.goBack()}),(function(e){o.setState({isSending:!1}),u(e)}))})),v()(s()(o),"_goToConversation",(function(e){var t,n,r=o.props,a=r.history,i=r.popOutConversation,c=r.initialMessage,s=r.tweetAttachment;(o._disableFocusingPreviousActiveElement&&o._disableFocusingPreviousActiveElement(),e)&&("drawer"===(null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.source)?(i(e),a.goBack()):a.replace({pathname:"/messages/".concat(e),query:v()({},"text",c),state:{tweetAttachment:s}}))})),v()(s()(o),"_displayDMMessageSentSuccessToast",(function(e){var t=o.props,n=t.addToast,r=t.scribeAction;o._isShareViaDM()&&r(ae(ae({},ie),{},{action:"send_tweet_dm"})),n({text:pe,actionLink:"/messages/".concat(e),actionLabel:de})})),o.state={isGroupSelected:!1,participants:[],query:"",isSending:!1},o}return i()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.history,r=e.initialMessage,a=e.location.query,o=e.perspective,i=e.recipientId;if(i){var c=Object(_.a)(i,o);n.replace({pathname:"/messages/".concat(c),query:ae(ae({},a),{},v()({},"text",r))})}else this.props.fetchInboxIfNeeded().catch(t())}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.participants;this._isShareViaDM()&&t.participants.length<n.length&&this._composer.current&&this._composer.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.initialMessage,r=e.recipientId,a=e.scribeNamespace,o=e.tweetAttachment,i=this.context.isModal,c=this.state,s=c.isSending,l=c.participants,u=this._isShareViaDM();if(r)return null;var d=o?le:se;return b.createElement(O.b,{backButtonType:"close",backLocation:"/messages",containerStyle:ye.fill,documentTitle:ue,history:t,rightControl:u?void 0:this._renderAppBarRightControl(),title:d},b.createElement(T.a.Context.Consumer,null,this._setDisableFocusingPreviousActiveElement),b.createElement(g.a,{style:ye.fill},b.createElement(k.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(),onQueryChange:this._handleQueryChange,onRemove:this._handleRemoveParticipant,onSelect:this._handleSuggestionSelected,selectedUsers:l,shouldAutoFocus:!u||!D.a.isIOS(),source:ne.d.ComposeMessage,withCompactPills:!0}),u&&!i?b.createElement(M.a,{style:ye.placeholder}):null,u?b.createElement(E.a,{canSendEmptyMessage:!!o,conversationId:"DMComposeScreen",disabled:0===l.length||s,history:t,isSending:s,isShareViaDM:!!u,isUploading:!1,mediaUploadProgress:0,onSend:this._handleShareTweet,placeholderText:ce,prefillText:n,ref:this._composer,scribeNamespace:a,style:[ye.shadow,!i&&ye.fixToBottom],withEmojiPicker:!1,withGifPicker:!1,withMediaPicker:!1}):null))}},{key:"_isShareViaDM",value:function(){var e=this.props,t=e.initialMessage;return e.tweetAttachment||!!t}}]),n}(b.Component);v()(ve,"contextType",A.a);var be=function(e,t){return Array.isArray(e)||e.type!==ne.b.DMConversation?Array.isArray(e)||e.type!==ne.b.User?null:Object(_.a)(e.data.id_str,t):e.data.conversationId},ye=L.a.create((function(e){return{fill:{flex:1},button:{marginLeft:e.spaces.xSmall},rightColumn:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"flex-end"},shadow:{boxShadow:"0 -1px 3px rgba(0,0,0,0.12)"},placeholder:{height:46},fixToBottom:{position:"fixed",backfaceVisibility:"hidden",bottom:0,left:0,right:0,paddingBottom:L.a.iPhoneOffsetBottom}}}));t.default=Object(y.c)(ie)(ee(ve))},XoqV:function(e,t,n){"use strict";n.r(t),n.d(t,"DMParticipantsScreen",(function(){return U}));n("2G9S"),n("z84I"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=(n("KqXw"),n("WNMA"),n("MMRb")),g=n("0KEI"),E=n("hqKg"),_=n("RqPI"),O=n("oEGd"),C=function(e,t){return t.match.params.conversationId},I=Object(E.createSelector)(C,(function(e,t){return y.selectConversationFetchStatus(e,C(0,t))}),y.selectConversations,_.g,(function(e,t,n,r){if(!r)throw new Error("logged-in user not found");var a=n[e];return{conversation:a&&a.data,conversationId:e,fetchStatus:t,perspective:r}})),w={createLocalApiErrorHandler:Object(g.d)("DIRECT_MESSAGES_PARTICIPANTS"),fetchConversationIfNeeded:y.fetchConversationIfNeeded},S=Object(O.g)(I,w),x=n("7JQg"),P=n("I2k/"),D=n("v//M"),k=n("3XMw"),M=n.n(k),R=n("M2mT"),j=n("Es6L"),T=n("rHpw"),A=n("hqDb"),L=n("yw4N");function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var B=M.a.g2fd3205,F=M.a.d4986f85,U=function(e){u()(n,e);var t=N(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"_renderList",(function(){var t=e.props.conversation,n=t&&(t.participants||[]).map((function(e){return e.user_id}))||[];return b.createElement(A.a,{userIds:n,withItemBorder:!0})})),v()(s()(e),"_handleFetch",(function(){e._fetchIfNeeded(e.props.conversationId)})),e}return i()(n,[{key:"componentDidMount",value:function(){this._handleFetch()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.conversationId!==e.conversationId&&this._fetchIfNeeded(e.conversationId)}},{key:"render",value:function(){var e=this.props,t=e.fetchStatus,n=e.conversationId;return b.createElement(R.a,{backLocation:"/messages/".concat(n,"/info"),documentTitle:F,screenType:"secondaryDetail",title:B},b.createElement(L.a,{style:[H.root,!Object(j.a)()&&H.bottomOffset]},b.createElement(D.a,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._renderList})))}},{key:"_fetchIfNeeded",value:function(e){var t=this.props,n=t.createLocalApiErrorHandler;(0,t.fetchConversationIfNeeded)({conversationId:e}).catch(n(Object(P.a)(e)))}}]),n}(b.Component),H=T.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground},bottomOffset:{paddingBottom:"calc(".concat(T.a.theme.componentDimensions.appBarHeight," + ").concat(T.a.iPhoneOffsetBottom,")")}}}));t.default=Object(x.c)({page:"messages",section:"view_participants"})(S(U))},cOtO:function(e,t,n){"use strict";n.r(t),n.d(t,"DMConversationScreen",(function(){return Ee}));n("z84I"),n("+KXO"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL"),n("uFXj");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("HPNB"),g=(n("WNMA"),n("zh9S")),E=n("MMRb"),_=n("VnFT"),O=n("RqPI"),C=n("oEGd"),I=n("hqKg"),w=(n("Myq3"),n("AQOc")),S=n("z2Pn"),x=n("pNZL"),P=n("G6rE"),D=n("X/yg"),k=function(e,t){return t.match.params.conversationId},M=Object(I.createSelector)((function(e,t){return E.selectConversation(e,k(0,t))}),E.selectEntries,k,D.d,O.g,D.e,D.f,P.e.selectAll,(function(e,t){return _.j(e,k(0,t))}),(function(e,t){return _.i(e,k(0,t))}),E.selectPoppedOutConversationId,E.selectDrawerVisibility,(function(e,t,n,r,a,o,i,c,s,l,u,d){var p=e&&e.data;return{conversation:p&&Object(w.a)(p,t,c),conversationId:n,isNewGroupConversation:r,isUploading:s,media:l,newConversationParticipants:o,perspective:a,poppedOutConversationId:u,dmDrawerVisibility:d}})),R=function(e){return function(t){return _.c(e,t)}},j=Object(C.d)(M,(function(e){return{cancelUpload:(t=e.match.params.conversationId,function(){return _.b(t)}),googleAnalyticsPageView:g.a,removeMedia:R(e.match.params.conversationId),scribePageImpression:g.d,setLastViewedDmInboxPath:S.h,updateTweetDetailNav:x.b,popOutConversation:E.popOutConversation,setDrawerVisibility:E.setDrawerVisibility};var t})),T=n("7JQg"),A=n("i4Oy"),L=(n("uB9N"),n("Oi4X")),N=n("aA19"),B=n("SrtL"),F=n("3XMw"),U=n.n(F),H=n("rHpw"),G=n("mw9i"),V=n("FIs5");function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var K=U.a.a2f8105f,z=U.a.fa91f351,q=U.a.b999caa8,Z=U.a.de2c3337,X=H.a.create((function(e){return{root:{alignItems:"center",justifyContent:"center",flex:1,backgroundColor:e.colors.cellBackground}}})),Q=function(e){u()(n,e);var t=W(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props.onButtonPress;return b.createElement(G.a,{style:X.root},b.createElement(B.a,{title:K}),b.createElement(V.a,{buttonText:Z,header:z,message:q,onButtonPress:e}))}}]),n}(b.PureComponent),Y=n("xPna"),J=n("wrlS"),$=n("XnpN"),ee=n("7myi"),te=n("M2mT"),ne=n("aITJ"),re=n("MWbm"),ae=n("/yvb"),oe=n("OhSZ"),ie=n("6s7X"),ce=(n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+oxZ"),n("Lsrn")),se=n("shC7"),le=n("k/Ka");function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(le.a)("svg",de(de({},e),{},{style:[ce.a.root,e.style,se.a.isRTL&&ce.a.iconRTL],viewBox:"0 0 24 24"}),b.createElement("g",null,b.createElement("path",{d:"M19.687 22H7.813C6.538 22 5.5 20.962 5.5 19.687v-4.452c0-.414.336-.75.75-.75s.75.335.75.75v4.45c0 .45.365.815.813.815h11.873c.448 0 .813-.365.813-.813V7.813c0-.448-.365-.813-.813-.813h-4.452c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h4.452C20.962 5.5 22 6.538 22 7.813v11.873C22 20.962 20.962 22 19.687 22z"}),b.createElement("path",{d:"M11.25 4.045c-.414 0-.75.336-.75.75V9.44L3.064 2.004c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06L9.438 10.5H4.804c-.414 0-.75.336-.75.75s.336.75.75.75h6.445c.414 0 .75-.336.75-.75V4.795c0-.414-.336-.75-.75-.75z"})))};pe.metadata={width:24,height:24};var fe=pe;function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var me=U.a.d4986f85,ve=U.a.e3e58b6d,be=U.a.a9ddbb94,ye=b.createElement(ie.a,null),ge=b.createElement(fe,null),Ee=function(e){u()(n,e);var t=he(n);function n(e){var r;a()(this,n),r=t.call(this,e),v()(s()(r),"_composer",b.createRef()),v()(s()(r),"_handleConversationClose",(function(e){var t=r.props,n=t.conversation,a=t.history;(null==n?void 0:n.trusted)?a.push("/messages"):e()})),v()(s()(r),"_handlePopOutConvo",(function(){var e=r.props,t=e.conversationId;(0,e.popOutConversation)(t)})),v()(s()(r),"_handlePopInConvoFromScreen",(function(){(0,r.props.setDrawerVisibility)(Y.a.CLOSED)})),v()(s()(r),"_handleInfoClick",(function(){var e=r.props,t=e.history,n=e.conversationId;n&&t.push("/messages/".concat(n,"/info"))})),v()(s()(r),"_updateLastViewDmInboxPath",(function(){var e=r.props;(0,e.setLastViewedDmInboxPath)(e.location.pathname)}));var o=e.conversationId,i=e.history,c=e.location,l=e.isNewGroupConversation;return o||l||c.pathname!==window.location.pathname||i.replace({pathname:"/messages"}),r._showDMQuickAccess=J.b.isTrue("responsive_web_dm_quick_access_enabled"),r._showDMQuickAccessWithClose=J.b.isTrue("responsive_web_dm_quick_access_with_close_enabled"),r}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.googleAnalyticsPageView,n=e.scribeNamespace,r=e.scribePageImpression,a=e.updateTweetDetailNav;r(n),a(n),t(n),this._updateLastViewDmInboxPath()}},{key:"componentDidUpdate",value:function(e){this.props.conversationId!==e.conversationId&&this._updateLastViewDmInboxPath()}},{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.dmDrawerVisibility,r=e.history,a=e.location,o=e.poppedOutConversationId,i=e.richTextInputContext,c=e.typeaheadWrapper,s="string"==typeof a.query.text?a.query.text:void 0,l=A.a.get("window").width>=H.a.theme.breakpoints.small,u=this._showDMQuickAccess&&this._showDMQuickAccessWithClose&&t===o&&n!==Y.a.CLOSED;return b.createElement(te.a,this._getNavProps(),u?b.createElement(Q,{onButtonPress:this._handlePopInConvoFromScreen}):b.createElement(L.a,{conversationId:t,history:r,isWide:l,location:a,prefillText:s,richTextInputContext:i,typeaheadWrapper:c}))}},{key:"_getNavProps",value:function(){var e=this.props,t=e.conversation,n=e.newConversationParticipants,r=e.perspective,a=t&&Object.keys(t.participants).length?Object(oe.a)({conversation:t,perspective:r}):n?Object(oe.a)({newConversationParticipants:n,perspective:r}):me,o=t&&Object.keys(t.participants).length?b.createElement(oe.b,{conversation:t,perspective:r,titleWeight:"heavy",withScreenName:!1}):n?b.createElement(oe.b,{newConversationParticipants:n,perspective:r,titleWeight:"heavy",withScreenName:!1}):me,i=r?b.createElement(N.a,{conversation:t,perspective:r,size:"large"}):void 0,c=t&&t.type===E.CONVERSATION_TYPE.ONE_TO_ONE&&r&&Object($.a)(t,r).map((function(e){return e.user.screen_name})),s=c?"@".concat(c[0]):void 0;return{backLocation:"/messages",onBackClick:this._handleConversationClose,documentTitle:a,rightControl:this._renderRightControl(),title:o,titleIconCell:i,titleIconCellSize:"large",subtitle:s,screenType:"primaryDetail",withBottomTabBar:!1,headerless:ne.a.isKaiOS()}}},{key:"_renderRightControl",value:function(){var e=this.props,t=e.conversation,n=e.conversationId,r=(null==t?void 0:t.type)===E.CONVERSATION_TYPE.GROUP;return n?b.createElement(re.a,{style:_e.rightControlStyles},y.a.isTwoColumnLayout(A.a.get("window").width)&&this._showDMQuickAccess&&this._showDMQuickAccessWithClose&&b.createElement(ae.a,{icon:ge,onPress:this._handlePopOutConvo,pullRight:!0,style:_e.infoButton,type:"text"}),b.createElement(ae.a,{accessibilityLabel:r?be:ve,icon:ye,key:n,link:"/messages/".concat(n,"/info"),pullRight:!0,style:_e.infoButton,type:"text"})):void 0}}]),n}(b.PureComponent);v()(Ee,"defaultProps",{isNewGroupConversation:!1,typeaheadWrapper:ee.a});var _e=H.a.create((function(e){return{root:{flexGrow:1},activity:{flexBasis:"1px",flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1},infoButton:{marginRight:e.spaces.xxSmall},offsetBottom:{paddingBottom:H.a.iPhoneOffsetBottom},rightControlStyles:{flexDirection:"row"}}}));t.default=Object(T.c)({page:"messages",section:"thread"})(j(Ee))},f42t:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n("lTEL"),n("z84I"),n("KOtZ"),n("+KXO"),n("7x/C"),n("JtPf"),n("OZaJ"),n("DZ+c"),n("87if"),n("kYxP");var r=n("97Jx"),a=n.n(r),o=n("VrFO"),i=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("ERkP");n("aWzz");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var b=function(e){u()(n,e);var t=v(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).state={isLoaded:!1},r}return s()(n,[{key:"componentDidMount",value:function(){return this._isMounted=!0,this.load()}},{key:"componentDidUpdate",value:function(e){return this.props.modules===e.modules?null:this.load()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"load",value:function(){var e=this;this.setState({isLoaded:!1});var t=this.props.modules,n=Object.keys(t);return Promise.all(n.map((function(e){return t[e]()}))).then((function(e){return n.reduce((function(t,n,r){return t[n]=e[r],t}),{})})).then((function(t){if(!e._isMounted)return null;e.setState({modules:t,isLoaded:!0})}))}},{key:"render",value:function(){var e=this.state.isLoaded?this.state.modules:{};return m.Children.only(this.props.children(e||{}))}}]),n}(m.Component),y=function(e,t){return function(n){return m.createElement(b,{modules:t},(function(t){return m.createElement(e,a()({},t,n))}))}}},fzwJ:function(e,t,n){"use strict";n.r(t),n.d(t,"DMAddParticipantsScreen",(function(){return se}));n("2G9S"),n("i4UL"),n("LW0h"),n("hBpG"),n("z84I"),n("M+/F"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("RhWx"),a=n.n(r),o=n("VrFO"),i=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("1Pcy"),u=n.n(l),d=n("5Yy7"),p=n.n(d),f=n("N+ot"),h=n.n(f),m=n("AuHH"),v=n.n(m),b=n("KEM+"),y=n.n(b),g=n("ERkP"),E=n("k49u"),_=n("VAZu"),O=(n("+KXO"),n("KqXw"),n("WNMA"),n("MMRb")),C=n("1YZw"),I=n("lnti"),w=n("0KEI"),S=n("hqKg"),x=n("RqPI"),P=n("G6rE"),D=n("oEGd"),k=function(e,t){return t.match.params.conversationId},M=Object(S.createSelector)(O.selectConversations,(function(e){return Object(I.a)(Object.keys(e).map((function(t){var n=e[t];if(!n.isDeleted)return n.data})))})),R=Object(S.createSelector)(k,M,(function(e,t){var n=O.selectConversation(e,k(0,t)),r=n&&n.data;return r&&r.participants}),(function(e,t){return O.selectConversationFetchStatus(e,k(0,t))}),x.g,P.e.selectAll,(function(e,t,n,r,a,o){if(!a)throw new Error("logged-in user not found");return{conversationId:e,conversations:t,existingParticipants:n,fetchStatus:r,perspective:a,users:o}})),j={addParticipants:O.addParticipants,addToast:C.b,createLocalApiErrorHandler:Object(w.d)("DIRECT_MESSAGES_ADD_PARTICIPANTS"),fetchConversationIfNeeded:O.fetchConversationIfNeeded},T=Object(D.g)(R,j),A=n("7JQg"),L=n("I2k/"),N=n("s14A"),B=n("kGix"),F=n("jHSc"),U=n("wO1l"),H=n("AQOc"),G=n("3XMw"),V=n.n(G),W=n("oQhu"),K="addPeopleButtonText",z=n("GZwR"),q=n("2dXj"),Z=n("MWbm"),X=n("/yvb"),Q=n("rHpw");function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var J=V.a.c6026009,$=V.a.d4986f85,ee=V.a.af40a8ef,te=V.a.e1bde73e,ne=V.a.e62d3c10,re=V.a.f17f716a,ae=V.a.e3fc3547,oe=V.a.c55f5c9a,ie=V.a.h8403fb5,ce=V.a.ja522ed3,se=function(e){p()(n,e);var t=Y(n);function n(){var e;i()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),y()(u()(e),"state",{participantsToAdd:[],query:""}),y()(u()(e),"_renderHeader",(function(){var t=e.props,n=t.conversationId,r=t.history;return g.createElement(_.a,{backButtonType:"close",backLocation:"/messages/".concat(n),history:r,ref:e._setAppBarRef,rightControl:e._renderAppBarRightControl(),title:J,withBottomBorder:!1})})),y()(u()(e),"_renderAppBarRightControl",(function(){return g.createElement(Z.a,{style:le.rightColumn},g.createElement(X.a,{disabled:0===e.state.participantsToAdd.length||e.props.fetchStatus!==B.a.LOADED,onPress:e._handleAddSelectedParticipantsToConversation,size:"normalCompact",testID:K,type:"primary"},ee))})),y()(u()(e),"_handleQueryChange",(function(t){e.setState({query:t})})),y()(u()(e),"_handleSuggestionClicked",(function(t){var n=e.state.participantsToAdd;n.find((function(e){return e.id===t.id}))?e._handleUnselectParticipant(t):e.setState({participantsToAdd:[].concat(a()(n),[t])})})),y()(u()(e),"_handleUnselectParticipant",(function(t){var n=e.state.participantsToAdd;e.setState({participantsToAdd:n.filter((function(e){return e.id!==t.id}))})})),y()(u()(e),"_handleAddSelectedParticipantsToConversation",(function(){var t,n=e.props,r=n.addParticipants,a=n.conversationId,o=n.createLocalApiErrorHandler;r(a,e.state.participantsToAdd.map((function(e){return e.id}))).then((function(t){e._appBarRef&&e._appBarRef.goBack()}),o((t={defaultToast:{text:ce}},y()(t,E.a.DirectMessageCannotDmOtherUser,{toast:{text:oe}}),y()(t,E.a.DirectMessageGenericUserCouldNotBeAdded,{toast:{text:ie}}),y()(t,E.a.DirectMessageOtherUserNotFollowing,{toast:{text:re}}),y()(t,E.a.TargetUserNotFound,{toast:{text:ne}}),y()(t,E.a.TieredActionTweetSpammer,{toast:{text:ae}}),y()(t,"showToast",!0),t)))})),y()(u()(e),"_getInjections",Object(W.a)((function(e,t,n,r){return Object(U.b)(n,e.map((function(e){return Object(H.b)(e,void 0,r)})),t).slice(0,12)}))),y()(u()(e),"_getItemIsDisabled",(function(e){var t=e.data;return!(t.can_dm||t.is_dm_able)})),y()(u()(e),"_getItemDisabledMessage",(function(e){return te({screenName:e.data.screen_name})})),y()(u()(e),"_setAppBarRef",(function(t){e._appBarRef=t})),e}return s()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:n}).catch(t(Object(L.a)(n)))}},{key:"render",value:function(){var e=this.props,t=e.conversations,n=e.existingParticipants,r=e.perspective,a=e.users,o=this.state.query,i=n&&n.map((function(e){return e.user_id}));return g.createElement(F.b,{containerStyle:le.fill,documentTitle:$,renderHeader:this._renderHeader},g.createElement(N.a,{style:le.fill},g.createElement(q.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(t,r,o,a),onQueryChange:this._handleQueryChange,onRemove:this._handleUnselectParticipant,onSelect:this._handleSuggestionClicked,preselectedUsers:i,selectedUsers:this.state.participantsToAdd,source:z.d.ComposeMessage,withCompactPills:!0})))}}]),n}(g.Component);y()(se,"defaultProps",{existingParticipants:[]});var le=Q.a.create((function(e){return{fill:{flex:1},rightColumn:{flexDirection:"row",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}}}));t.default=Object(A.c)({page:"messages",section:"add_participants"})(T(se))},"hl/W":function(e,t,n){"use strict";n("7x/C"),n("JtPf");var r=n("MMRb"),a=n("P1r1"),o=n("rxPX"),i=n("0KEI"),c=n("6xIQ"),s=n("kGix"),l=n("xPna"),u=n("O0uF"),d=n("z2Pn"),p=function(e){return e===l.b.primary?r.fetchTrustedInboxHistory:e===l.b.secondary?r.fetchUntrustedInboxHistory:r.fetchUntrustedLowQualityInboxHistory},f=function(e){return e===l.b.primary?r.updateTrustedLastSeenEventId:e===l.b.secondary?r.updateUntrustedLastSeenEventId:function(){return function(){return Promise.resolve()}}};t.a=function(e){var t=e.inbox;return Object(o.a)().propsFromState((function(){return{conversationIds:Object(c.a)((function(e){return r.selectConversationIdsByInbox(e,t)}),(function(e){return e})),featureSwitches:u.d,fetchStatus:r.selectFetchStatus,isLoadingTop:r.selectIsLoadingTop,isDmsOpenForAll:a.p,hasConversations:r.selectHasConversations,untrustedUnreadCount:r.selectUntrustedUnreadCount,untrustedCursor:r.selectUntrustedCursor,untrustedConversationCount:r.selectUntrustedConversationCount,untrustedLowQualityConversationCount:r.selectUntrustedLowQualityConversationCount,untrustedLowQualityCursor:r.selectUntrustedLowQualityCursor}})).adjustStateProps((function(e){var t=e.conversationIds,n=(e.featureSwitches,e.fetchStatus),r=e.hasConversations,a=e.isDmsOpenForAll,o=e.isLoadingTop,i=e.untrustedUnreadCount,c=e.untrustedCursor,l=e.untrustedConversationCount,u=e.untrustedLowQualityConversationCount;e.untrustedLowQualityCursor;return{fetchStatus:r?s.a.LOADED:n,isRefreshing:r&&o,conversationIds:t,untrustedUnreadCount:i,allowUntrustedInbox:a&&l>0,allowLowQualityUntrustedInbox:a&&u>0,isAtEndOfUntrustedInbox:c&&"AT_END"===c.status}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(i.d)("DIRECT_MESSAGES_INBOX"),fetchInboxHistory:p(t),fetchInbox:r.fetchInbox,fetchInboxIfNeeded:r.fetchInboxIfNeeded,fetchUpdates:r.fetchUpdatesIfNeeded,setDrawerExperimentEnabled:r.setDrawerExperimentEnabled,setLastViewedDmInboxPath:d.h,updateLastSeenEventId:f(t)}})).withAnalytics({page:"messages",section:"inbox",component:t===l.b.primary?"inbox_timeline":t===l.b.secondary?"requests_timeline":"low_quality_timeline"})}},hqDb:function(e,t,n){"use strict";n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("97Jx"),a=n.n(r),o=n("m3Bd"),i=n.n(o),c=n("VrFO"),s=n.n(c),l=n("Y9Ll"),u=n.n(l),d=n("1Pcy"),p=n.n(d),f=n("5Yy7"),h=n.n(f),m=n("N+ot"),v=n.n(m),b=n("AuHH"),y=n.n(b),g=n("KEM+"),E=n.n(g),_=n("ERkP"),O=n("k49u"),C=(n("LW0h"),n("vrRf"),n("KOtZ"),n("rxPX")),I=n("0KEI"),w=n("6xIQ"),S=n("kGix"),x=n("G6rE"),P=function(e,t){return t.userIds},D=function(e,t){return t.userIds.filter((function(t){return!!x.e.select(e,t)}))},k=function(e,t){return t.userIds.reduce((function(t,n){var r=x.e.selectFetchStatus(e,n);return t[n]=r===S.a.NONE?S.a.LOADING:r,t}),{})},M=Object(C.a)().propsFromState((function(){return{availableUserIds:Object(w.a)(D,(function(e){return e})),fetchStatus:Object(w.a)(D,k,P,(function(e,t,n){for(var r=S.a.LOADED,a=0;a<n.length;a++){var o=n[a];if(-1===e.indexOf(o)){var i=t[o]||S.a.LOADING;r=r===S.a.LOADED?i:r}if(r===S.a.LOADED)break}return r}))}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(I.d)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:x.e.fetchManyIfNeeded}})),R=n("v//M"),j=n("3XMw"),T=n.n(j),A=n("pQ3Z"),L=n.n(A),N=(n("z84I"),n("cFuS")),B=n("Re5t"),F=n("MWbm"),U=n("88ay"),H=function(e){var t=e.displayMode,n=e.renderUserCell,r=e.withFinalItemBorder,a=e.withItemBorder,o=e.userIds;return _.createElement(F.a,null,o.map((function(e,i){var c=i===o.length-1,s=c&&a&&r||!c&&a;return n?n(e):_.createElement(U.b,{decoration:U.d,displayMode:t,key:e,promotedItemType:N.c.USER,userId:e,withBottomBorder:!!s,withFollowsYou:!0})})))};H.defaultProps={displayMode:B.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var G=H;function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var W=T.a.f5b426c2,K=M(function(e){h()(n,e);var t=V(n);function n(){var e;s()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),E()(p()(e),"state",{allUsersUnavailable:!1}),E()(p()(e),"_renderContent",(function(){var t=e.props,n=t.availableUserIds,r=(t.createLocalApiErrorHandler,t.fetchStatus,t.fetchUsersIfNeeded,t.userIds,i()(t,["availableUserIds","createLocalApiErrorHandler","fetchStatus","fetchUsersIfNeeded","userIds"]));return _.createElement(G,a()({},r,{userIds:n}))})),E()(p()(e),"_handleFetch",(function(){e._fetchUsersIfNeeded()})),e}return u()(n,[{key:"componentDidMount",value:function(){this._fetchUsersIfNeeded()}},{key:"componentDidUpdate",value:function(e){L()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()}},{key:"render",value:function(){return _.createElement(R.a,{accessibilityLabel:W,fetchStatus:this.state.allUsersUnavailable?S.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1,viewType:"user_list"})}},{key:"_fetchUsersIfNeeded",value:function(){var e=this,t=this.props,n=t.createLocalApiErrorHandler,r=t.fetchUsersIfNeeded,a=t.availableUserIds;r(t.userIds).then((function(){e.setState({allUsersUnavailable:!1})}),n(E()({},O.a.AddressBookLookupNotFound,{customAction:function(){0===a.length&&e.setState({allUsersUnavailable:!0})}})))}}]),n}(_.Component));t.a=K},jUV2:function(e,t,n){"use strict";n.r(t),n.d(t,"DMInboxScreen",(function(){return q}));n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c"),n("uFXj");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("pxuL"),g=n("hl/W"),E=n("/yvb"),_=n("3XMw"),O=n.n(_),C=n("Avzu"),I=O.a.f325afc3,w=function(e){var t=e.testID;return b.createElement(E.a,{accessibilityLabel:I,icon:b.createElement(C.a,null),link:"/messages/compose",pullRight:!0,testID:t,type:"text"})},S=n("qz2E"),x=n("wrlS"),P=n("qS4/"),D=n("xPna"),k=n("f42t"),M=n("M2mT"),R=n("Es6L"),j="NewDM_Button",T=n("MWbm"),A=n("csss"),L=n("Znyr"),N=n("FIs5"),B=n("rHpw");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var U=O.a.a2f8105f,H=O.a.cf2d1047,G=O.a.b8aa3744,V=O.a.j06309e1,W=O.a.gee5150a,K=O.a.da2f9224,z=O.a.h6beb5fa,q=function(e){u()(n,e);var t=F(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"_renderPivot",(function(){return e.props.allowUntrustedInbox?b.createElement(T.a,{style:Z.requestPivotContainer},b.createElement(A.a,{label:H,link:"/messages/requests",onPress:e._handleRequestsPivotClick,renderRightContent:e._renderPivotBadge,withBottomBorder:!1})):null})),v()(s()(e),"_renderPivotBadge",(function(){var t=e.props.untrustedUnreadCount;return t>0?b.createElement(L.a,{count:t,standalone:!0,truncatedCountFormatter:z,unreadCountLabel:K}):null})),v()(s()(e),"_renderEmptyDMInbox",(function(){return b.createElement(N.a,{buttonLink:"/messages/compose",buttonText:W,header:G,message:V,onImpression:e._handleEmptyDMInboxImpression})})),v()(s()(e),"_handleEmptyDMInboxImpression",(function(){e.props.analytics.scribe({component:"empty_message",action:"impression"})})),v()(s()(e),"_handleRequestsPivotClick",(function(){e.props.analytics.scribe({element:"requests_pivot",action:"click"})})),e}return i()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.allowUntrustedInbox,n=e.analytics,r=e.location,a=e.setLastViewedDmInboxPath,o=e.setDrawerExperimentEnabled;a(r.pathname),t&&n.scribe({element:"requests_pivot",action:"impression"}),o(x.b.isTrue("responsive_web_dm_quick_access_enabled")),this.context.setDmDrawerSupport(!1)}},{key:"componentWillUnmount",value:function(){this.context.setDmDrawerSupport(!0)}},{key:"render",value:function(){var e=Object(R.a)()?b.createElement(w,{testID:j}):void 0,t=this.props,n=t.analytics,r=t.conversationIds,a=t.createLocalApiErrorHandler,o=t.fetchInbox,i=t.fetchInboxHistory,c=t.fetchInboxIfNeeded,s=t.fetchStatus,l=t.fetchUpdates,u=t.isRefreshing,d=t.updateLastSeenEventId;return b.createElement(M.a,{rightControl:e,screenType:"root",title:U},b.createElement(P.a,{accessibilityTitle:U,analytics:n,conversationIds:r,conversationPathPrefix:"/messages",createLocalApiErrorHandler:a,fetchInbox:o,fetchInboxHistory:i,fetchInboxIfNeeded:c,fetchStatus:s,fetchUpdates:l,isRefreshing:u,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderPivot,updateLastSeenEventId:d,virtualScrollerCacheKey:"dmInbox",withDmSearch:!0}))}}]),n}(b.Component);v()(q,"contextType",y.a),v()(q,"defaultProps",{conversationIds:[],untrustedUnreadCount:0});var Z=B.a.create((function(e){return{requestPivotContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:2}}})),X=Object(k.a)(Object(g.a)({inbox:D.b.primary})(q),{directMessages:S.a});t.default=X},lL5k:function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},"p+r5":function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c"),n("uFXj");var r=n("97Jx"),a=n.n(r),o=n("m3Bd"),i=n.n(o),c=n("VrFO"),s=n.n(c),l=n("Y9Ll"),u=n.n(l),d=n("1Pcy"),p=n.n(d),f=n("5Yy7"),h=n.n(f),m=n("N+ot"),v=n.n(m),b=n("AuHH"),y=n.n(b),g=n("KEM+"),E=n.n(g),_=n("ERkP"),O=n("t62R"),C=n("3XMw"),I=n.n(C),w=n("tI3i"),S=n.n(w),x=n("oQhu"),P=n("rHpw"),D=n("aITJ"),k=n("MWbm"),M=(n("aWzz"),n("Oib4")),R=(n("1t7P"),n("LW0h"),n("jwue"),n("daRM"),n("FtHn"),n("+KXO"),n("+oxZ"),n("Lsrn")),j=n("k/Ka");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(j.a)("svg",A(A({},e),{},{style:[R.a.root,e.style],viewBox:"0 0 24 24"}),_.createElement("g",null,_.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm4.086 7.698L11.744 15.6s-.354.545-.416.607c-.146.146-.338.22-.53.22s-.384-.073-.53-.22l-2.7-2.704c-.293-.293-.293-.77 0-1.06.293-.294.768-.294 1.06 0l2.048 2.05 4.155-6.365c.227-.346.693-.443 1.04-.218.345.227.443.692.216 1.038z"})))};L.metadata={width:24,height:24};var N=L,B=n("ioan");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var U=function(e){return e.length},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;return t(e)},G=function(e){h()(n,e);var t=F(n);function n(e){var r;s()(this,n),r=t.call(this,e),E()(p()(r),"_blurOnBackspaceKeyUpForKaiOS",!1),E()(p()(r),"_getTextInputStyle",Object(x.a)((function(e,t){return[K.root,!e&&K.disabled,z.sidePadding,t?K.withLabelPadding:K.withoutLabelPadding]}))),E()(p()(r),"_calculateLength",(function(e){return H(e,r.props.calculateLength)})),E()(p()(r),"_handleBlur",(function(e){var t=r.props.onBlur,n=e.currentTarget.value,a=r._calculateLength(n);r.setState({isFocused:!1,charCount:a}),t&&t(e)})),E()(p()(r),"_handleChange",(function(e){var t=r.props.onChange,n=e.currentTarget.value,a=r._calculateLength(n);r.setState({isFocused:!0,charCount:a}),t&&t(e)})),E()(p()(r),"_handleFocus",(function(e){var t=r.props.onFocus;r.setState({isFocused:!0}),t&&t(e)})),E()(p()(r),"_handleKeyPress",(function(e){var t=r.props,n=t.multiline,a=t.onKeyPress,o=t.onSubmitEditing;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||n||!o||(e.preventDefault(),o(e))})),E()(p()(r),"_handleKeyDown",(function(e){var t=r.props.onKeyDown,n=0===r.state.charCount;D.a.isKaiOS()&&"Backspace"===e.key&&n?r._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)})),E()(p()(r),"_handleKeyUp",(function(e){var t=r.props.onKeyUp;D.a.isKaiOS()&&"Backspace"===e.key&&r._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),r.blur()),t&&t(e)})),E()(p()(r),"_setTextInputRef",(function(e){r._textInput=e})),E()(p()(r),"_checkComponentPropsUsageCorrectness",(function(e){var t=e.defaultValue,n=e.maxLength,r=e.validLength,a=e.value,o=!!e.onChange,i="string"==typeof a,c="string"==typeof t;S()(!(!c&&i&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),S()(!(n&&r&&r>n),"Max length should be equal or greater than valid length."),S()(!(void 0!==n&&n<=0||void 0!==r&&r<=0),"Set editable to false instead of limiting the valid character count to 0.")})),E()(p()(r),"_exceedsValidLength",(function(e){var t=r._getMaxCharCount();return!!t&&e>t})),E()(p()(r),"_getMaxCharCount",(function(){return r.props.validLength||r.props.maxLength})),r._checkComponentPropsUsageCorrectness(e);var a=e.defaultValue,o=e.value;return r.state={charCount:r._calculateLength(o||a||""),isFocused:!1},r}return u()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.validLength,r=t.maxLength,a=t.onChange,o=t.value,i=e.validLength,c=e.maxLength,s=e.onChange,l=e.value;i===n&&r===c&&!!a===!!s&&"string"==typeof o===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}},{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.editable,r=e.errorText,a=e.helperText,o=e.label,i=e.showValidationIcon,c=e.style,s=this.state.isFocused,l=this._isFormInvalid(),u=[V.underline,s&&V.underlineFocused,l&&V.underlineInvalid,!n&&V.underlineDisabled];return _.createElement(k.a,{style:[z.root,!n&&z.disabled,c]},_.createElement(k.a,{accessibilityLabel:t,accessibilityRole:"label",style:[z.textInputFormStyle,u]},_.createElement(k.a,{style:z.textInputFormWrapper},o?this._renderLabel():null,this._renderTextInput()),i?this._renderValidationIcon():null),_.createElement(k.a,{style:[z.sidePadding,z.underTextInputForm]},_.createElement(k.a,{style:z.subtextWrapper},a?this._renderHelperText():null,l&&r?this._renderErrorText():null),this._getMaxCharCount()?this._renderCharCount():null))}},{key:"_renderLabel",value:function(){var e=this.props.label,t=this.state.isFocused?"primary":"deepGray",n=this._isFormInvalid()?"red":t;return _.createElement(O.c,{color:n,numberOfLines:1,style:[z.sidePadding,W.root]},e)}},{key:"_renderTextInput",value:function(){var e=this.props,t=(e.accessibilityLabel,e.calculateLength,e.editable),n=(e.errorText,e.helperText,e.Icon),r=(e.iconStyle,e.invalid,e.label),o=e.maxLength,c=(e.onBlur,e.onChange,e.onSubmitEditing,e.onFocus,e.onKeyDown,e.onKeyPress,e.onKeyUp,e.showValidationIcon,e.style,e.validLength,i()(e,["accessibilityLabel","calculateLength","editable","errorText","helperText","Icon","iconStyle","invalid","label","maxLength","onBlur","onChange","onSubmitEditing","onFocus","onKeyDown","onKeyPress","onKeyUp","showValidationIcon","style","validLength"])),s=this.getValue(),l=this._calculateLength(s),u=o+s.length-l;return _.createElement(k.a,{style:K.container},n?this._renderIcon():null,_.createElement(O.c,{size:"large",style:K.wrapper},_.createElement(B.a,a()({},c,{editable:t,maxLength:o?u:void 0,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholderTextColor:P.a.theme.colors.deepGray,ref:this._setTextInputRef,style:this._getTextInputStyle(t,r)}))))}},{key:"_renderHelperText",value:function(){return _.createElement(k.a,{accessibilityLiveRegion:"polite"},_.createElement(O.c,{color:"deepGray",style:z.subtext},this.props.helperText))}},{key:"_renderErrorText",value:function(){return _.createElement(k.a,{accessibilityLiveRegion:"assertive"},_.createElement(O.c,{color:"red",style:z.subtext},this.props.errorText))}},{key:"_renderCharCount",value:function(){var e=this.state.charCount,t=this._getMaxCharCount(),n=this._exceedsValidLength(e),r=t&&I.a.ia24dc8c(t),a=I.a.ia24dc8c(e);return _.createElement(k.a,{accessibilityLiveRegion:"polite"},_.createElement(O.c,{color:n?"red":"deepGray",style:z.characterCounterSubtext},r?"".concat(a,"/").concat(r):""))}},{key:"_renderIcon",value:function(){var e=this.props,t=e.Icon,n=e.iconStyle,r=this.state.isFocused,a=[z.icon,r&&z.focusedIcon,n];return t&&_.createElement(t,{style:a})}},{key:"_renderValidationIcon",value:function(){return this._isFormInvalid()?_.createElement(M.a,{style:[z.validationIcon,z.error]}):_.createElement(N,{style:[z.validationIcon,z.valid]})}},{key:"_isFormInvalid",value:function(){var e=this.state.charCount;return this.props.invalid||this._exceedsValidLength(e)||!1}},{key:"blur",value:function(){this._textInput&&this._textInput.blur()}},{key:"getValue",value:function(){return this._textInput&&this._textInput.getValue()||""}},{key:"focus",value:function(){this._textInput&&this._textInput.focus()}},{key:"isValidLength",value:function(){var e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.calculateLength,r=e.value,a="string"==typeof r?H(r,n):0;return"string"==typeof r&&a!==t.charCount?{charCount:a}:null}}]),n}(_.Component);E()(G,"defaultProps",{autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1}),G.propTypes={};var V=P.a.create((function(e){return{underline:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.medium,borderColor:e.colors.deepGray,borderRadius:e.borderRadii.xSmall},underlineFocused:{borderColor:e.colors.primary},underlineInvalid:{borderColor:e.colors.red},underlineDisabled:{borderColor:e.colors.transparent}}})),W=P.a.create((function(e){return{root:{alignSelf:"flex-start",paddingTop:e.spaces.xxSmall}}})),K=P.a.create((function(e){return{container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden"},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",paddingVertical:e.spaces.xSmall,textAlign:"inherit",outlineStyle:"none"},wrapper:{alignItems:"center",alignSelf:"flex-start",display:"flex",width:"100%"},withLabelPadding:{paddingBottom:e.spaces.xxSmall,paddingTop:e.spaces.micro},withoutLabelPadding:{paddingVertical:e.spaces.small},disabled:{color:e.colors.deepGray}}})),z=P.a.create((function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{borderRadius:e.borderWidths.medium,backgroundColor:e.colors.faintGray,flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},disabled:{cursor:"default",opacity:.8},sidePadding:{paddingHorizontal:e.spaces.xSmall},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.medium},subtext:{alignSelf:"flex-start",paddingTop:e.spaces.xxSmall},characterCounterSubtext:{alignSelf:"flex-end",paddingTop:e.spaces.xxSmall},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.deepGray,paddingLeft:e.spaces.xSmall},validationIcon:{alignSelf:"center",paddingRight:e.spaces.xxSmall},error:{color:e.colors.red},valid:{color:e.colors.primary}}}))},"qS4/":function(e,t,n){"use strict";n("2G9S"),n("vrRf"),n("5BYb"),n("ho0z"),n("+KXO"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("BUB3"),g=n("v6aA"),E=n("s14A"),_=(n("1t7P"),n("LW0h"),n("jwue"),n("jQ3i"),n("lTEL"),n("z84I"),n("6U7i"),n("daRM"),n("FtHn"),n("x4t0"),n("hBvt"),n("uFXj"),n("+oxZ"),n("kYxP"),n("MMRb")),O=n("0KEI"),C=n("hqKg"),I=n("AQOc"),w=n("G6rE"),S=n("oEGd"),x=function(e,t){return t.conversationId},P=Object(C.createSelector)(x,(function(e,t){return _.selectConversation(e,x(0,t))}),_.selectEntries,w.e.selectAll,(function(e,t){return!_.selectConversationIsRead(e,x(0,t))}),(function(e,t,n,r,a){return{conversation:t&&Object(I.a)(t.data,n,r),conversationId:e,unread:a}})),D={createLocalApiErrorHandler:Object(O.d)("DIRECT_MESSAGES_INBOX_ITEM"),leaveConversation:_.leaveConversation},k=Object(S.g)(P,D),M=n("aA19"),R=n("OhSZ"),j=n("t62R"),T=n("g54k"),A=Object(C.createSelector)(w.e.selectAll,(function(e,t){return t.entry}),T.b),L=Object(S.c)(A),N=n("zQEV"),B=L((function(e){var t=e.entry,n=e.entryType,r=e.perspective,a=e.users,o=Object(N.a)(t,n,r,a);return b.createElement(j.c,{color:"deepGray"},o)})),F=Object(C.createSelector)((function(e,t){return w.e.select(e,t.senderId)}),(function(e,t){return t.recipientId?w.e.select(e,t.recipientId):void 0}),(function(e,t){return{user:e,recipient:t}})),U=Object(S.c)(F),H=n("X/yg"),G=n("cTG8"),V=n("3XMw"),W=n.n(V),K=function(e){return b.createElement(W.a.I18NFormatMessage,{$i18n:"b3a2b11c"},b.createElement(j.c,null,e))},z=W.a.dedfd265;var q=W.a.a876e58b,Z=W.a.bf584cd1,X=W.a.a9cc8cfd,Q=W.a.e20b65b0,Y=W.a.e5bfe07d,J=W.a.b1a614fe,$=U((function(e){var t=e.entry,n=e.perspective,r=e.isGroupDM,a=e.user,o=void 0===a?{}:a,i=e.recipient,c=void 0===i?{}:i,s=t&&t.message_data;if(!s)return null;var l=s.attachment,u=l&&!!(l.video||l.photo||l.animated_gif||l.tweet||l.fleet||l.sticker||l.card),d=n===o.id_str,p=!(!u||!d)||!(!r||d),f=o.name,h=c.name,m=[p&&b.createElement(j.c,{key:"senderName"},K(f)," "),s&&s.text&&b.createElement(G.a,{displayTextRange:[0,s.text.length],entities:s.entities,key:"message",text:s.text,withMediaLinks:!0})];return l&&(l.tweet?m=p?function(e,t){return e?b.createElement(j.c,null,W.a.d5b762c8):b.createElement(W.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},b.createElement(j.c,null,t))}(d,f):J:l.fleet?m=function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"i005f1fd"},b.createElement(j.c,null,t),b.createElement(j.c,null,n||"")):b.createElement(W.a.I18NFormatMessage,{$i18n:"b35cee40"},b.createElement(j.c,null,n||""))}(d,h,s.text):l.video?m=Object(H.c)(l)?p?function(e,t){return e?b.createElement(j.c,null,W.a.h7033cac):b.createElement(W.a.I18NFormatMessage,{$i18n:"be5a9616"},b.createElement(j.c,null,t))}(d,f):z:p?function(e,t){return e?b.createElement(j.c,null,W.a.j7d81019):b.createElement(W.a.I18NFormatMessage,{$i18n:"eee2f120"},b.createElement(j.c,null,t))}(d,f):q:l.photo?m=p?function(e,t){return e?b.createElement(j.c,null,W.a.f80629ba):b.createElement(W.a.I18NFormatMessage,{$i18n:"c1e1f848"},b.createElement(j.c,null,t))}(d,f):Z:l.animated_gif?m=p?function(e,t){return e?b.createElement(j.c,null,W.a.eb3d722e):b.createElement(W.a.I18NFormatMessage,{$i18n:"dc4b75a1"},b.createElement(j.c,null,t))}(d,f):X:l.sticker?m=p?function(e,t){return e?b.createElement(j.c,null,W.a.d30c2d4f):b.createElement(W.a.I18NFormatMessage,{$i18n:"c7e2464e"},b.createElement(j.c,null,t))}(d,f):Q:l.card&&(m=p?function(e,t){return e?b.createElement(j.c,null,W.a.db53c017):b.createElement(W.a.I18NFormatMessage,{$i18n:"hcbbbb34"},b.createElement(j.c,null,t))}(d,f):Y)),b.createElement(j.c,{color:"deepGray",numberOfLines:1},m)})),ee=n("uKEd"),te=function(e,t){return t.senderId?w.e.select(e,t.senderId):void 0},ne=function(e,t){return Object(ee.n)(e,t.reactionEntry.message_id)},re=function(e,t){var n=ne(e,t);return n&&n.message_data&&w.e.select(e,n.message_data.sender_id)},ae=Object(S.e)((function(){return Object(C.createSelector)(te,ne,re,(function(e,t,n){return{reactedMessageEntry:t,reactingUser:e,messageUser:n}}))}),{}),oe=n("33Kz"),ie=ae((function(e){var t,n=e.isGroupDM,r=e.messageUser,a=e.perspective,o=e.reactionEntry,i=e.reactedMessageEntry,c=e.reactingUser,s=i&&i.message_data,l=s&&s.attachment,u=s&&s.text,d=r&&r.screen_name,p=a===(c&&c.id_str),f=c&&c.name,h=Object(oe.b)(o.reaction_key||"");return t=l&&l.tweet?n?function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"c4202784"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"b493a890"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,d,h):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"ca684bf5"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"h5797be5"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h):l&&l.video?n?function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"d1f8bdd9"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"d764af97"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,d,h):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"ab1cdfe2"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"f0cf1699"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h):l&&l.photo?n?function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"hec0fd4d"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"j55320de"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,d,h):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"jf27606a"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"cd110359"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h):l&&l.animated_gif?n?function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"e70dcc35"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"g1bf440b"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,d,h):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"b2da1bf8"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"g84c0421"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h):l&&l.card?n?function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"cd2e7c18"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"aee9e7fa"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,d,h):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"f9fb1cf6"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"f2bf910e"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h):u?n?function(e,t,n,r,a){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"i6cec545"},b.createElement(j.c,null,r),b.createElement(j.c,null,n),b.createElement(j.c,null,a)):b.createElement(W.a.I18NFormatMessage,{$i18n:"d6998baa"},b.createElement(j.c,null,t),b.createElement(j.c,null,r),b.createElement(j.c,null,n),b.createElement(j.c,null,a))}(p,f,h,d,u):function(e,t,n,r){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"cec676f3"},b.createElement(j.c,null,n),b.createElement(j.c,null,r)):b.createElement(W.a.I18NFormatMessage,{$i18n:"a2706f9a"},b.createElement(j.c,null,t),b.createElement(j.c,null,n),b.createElement(j.c,null,r))}(p,f,h,u):function(e,t,n){return e?b.createElement(W.a.I18NFormatMessage,{$i18n:"d6b15bbf"},b.createElement(j.c,null,n)):b.createElement(W.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},b.createElement(j.c,null,t),b.createElement(j.c,null,n))}(p,f,h),b.createElement(j.c,{color:"deepGray",numberOfLines:1},t)})),ce=n("H4nC"),se=n("b9JY"),le=W.a.fb3ccb55,ue=function(e){var t=e.conversationType,n=e.entry,r=e.perspective;if(n.marked_as_spam)return b.createElement(j.c,{color:"deepGray",numberOfLines:1},le);if(Object(se.b)(n)){var a=n.message_data,o=(a=void 0===a?{}:a).sender_id,i=a.recipient_id;return b.createElement($,{entry:n,isGroupDM:t===_.CONVERSATION_TYPE.GROUP,perspective:r,recipientId:i,senderId:o})}return Object(se.c)(n)?b.createElement(ie,{isGroupDM:t===_.CONVERSATION_TYPE.GROUP,perspective:r,reactionEntry:n,senderId:n.sender_id}):Object(se.a)(n)?b.createElement(B,{entry:n,entryType:n.type,perspective:r}):Object(se.d)(n)?b.createElement(ce.a,{entry:n,isCompact:!0}):null},de=n("wrlS"),pe=n("Myq3"),fe="conversation",he=n("MWbm"),me=n("Irs7"),ve=n("0PHd"),be=n("/yvb"),ye=n("eb3s"),ge=n("GBcw"),Ee=n("htQn"),_e=n("5mJL"),Oe=n("rHpw"),Ce=n("aWyx"),Ie=n("hiGS"),we=n("Lsrn"),Se=n("k/Ka");function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Se.a)("svg",Pe(Pe({},e),{},{style:[we.a.root,e.style],viewBox:"0 0 24 24"}),b.createElement("g",null,b.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})))};De.metadata={width:24,height:24};var ke=De;function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var Te=W.a.gdf4b79f,Ae=W.a.bbf83d83,Le=W.a.d96cf7cd,Ne={component:"low_quality_timeline"},Be=function(e){var t=e.children;return b.createElement(he.a,{style:Ue.socialProofContainer},t)},Fe=function(e){u()(n,e);var t=je(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"_socialProofEnabled",de.b.isTrue("responsive_web_dm_health_inbox_request_cell_social_proof_enabled")),v()(s()(e),"state",{showConfirmation:!1}),v()(s()(e),"_renderSocialProof",(function(e){var t=e.social_proof;if(!t||0===t.length)return null;var n=t[0];switch(n.proof_type){case Ce.d.MUTUAL_FRIENDS:if(0===n.total)return null;var r=n.users.map((function(e){return e.profile_image_url_https})),a=n.users.map((function(e){return e.name}));return b.createElement(Be,null,b.createElement(ve.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:r,knownFollowersCount:n.total,knownFollowersNames:a}));default:return null}})),v()(s()(e),"_renderTrashcan",(function(){var t=e.props.conversationId;return b.createElement(b.Fragment,null,b.createElement(be.a,{accessibilityLabel:Le,borderColor:"transparent",icon:b.createElement(Ie.a,{style:Ue.trashcanIcon}),onPress:e._handleShowConfirmation,type:"destructiveText"}),e.state.showConfirmation?b.createElement(ye.a,{confirmButtonLabel:Le,confirmButtonType:"destructive",headline:Te,onCancel:e._handleHideConfirmation,onConfirm:e._deleteConversation(t),text:Ae}):null)})),v()(s()(e),"_renderTimestamp",(function(){var t=e.props.conversation;return b.createElement(b.Fragment,null,b.createElement(he.a,null,t?b.createElement(ge.a,{timestamp:Number(t.sort_timestamp)}):null,(null==t?void 0:t.notifications_disabled)?b.createElement(ke,{style:Ue.notificationsDisabledIcon}):null))})),v()(s()(e),"_deleteConversation",(function(t){return function(){var n=e.props,r=n.analytics,a=n.createLocalApiErrorHandler,o=n.leaveConversation;e._handleHideConfirmation(),r.scribe(Re(Re({},Ne),{},{element:"thread",action:"delete_thread"})),o({conversationId:t}).catch(a({showToast:!0}))}})),v()(s()(e),"_handleHideConfirmation",(function(){e.setState({showConfirmation:!1})})),v()(s()(e),"_handleOnClick",(function(t){var n=e.props,r=n.conversationId;(0,n.onClick)(t,r)})),v()(s()(e),"_handleShowConfirmation",(function(t){var n=e.props.analytics;t.stopPropagation(),n.scribe(Re(Re({},Ne),{},{element:"accessory_trashcan",action:"click"})),e.setState({showConfirmation:!0})})),e}return i()(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.conversation,r=null==n?void 0:n.conversation_id,a=null==n?void 0:n.last_read_event_id,o=null==n?void 0:n.sort_event_id,i=null==n?void 0:n.max_entry_id,c=e.conversation,s=null==c?void 0:c.conversation_id,l=null==c?void 0:c.last_read_event_id,u=null==c?void 0:c.sort_event_id,d=null==c?void 0:c.max_entry_id,p=this.props,f=p.filter,h=p.isActive,m=e.filter,v=e.isActive,b=this.state.showConfirmation,y=t.showConfirmation;return r!==s||a!==l||o!==u||i!==d||h!==v||b!==y||f!==m}},{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.filter,r=e.isActive,a=e.isTertiaryInbox,o=e.perspective,i=e.unread,c=e.link,s=(null==t?void 0:t.entries)||[],l=Object(pe.a)(s,(function(e){return![Ce.b.MESSAGE_DELETE,Ce.b.REACTION_DELETE,Ce.b.MESSAGE_MARK_AS_SPAM,Ce.b.MESSAGE_MARK_AS_NOT_SPAM].includes(e.type)})),u=[Ue.root,Ue.bottomBorder,i&&Ue.unread];if(!t||!n(t))return null;var d=!t.trusted&&this._socialProofEnabled;return b.createElement(Ee.a,{accessibilityRole:"tab",accessibilityState:{selected:r},link:{pathname:c,anchorless:!0},onPress:this._handleOnClick,style:u,testID:fe},b.createElement(_e.a,{avatarCell:b.createElement(M.a,{conversation:t,perspective:o})},b.createElement(he.a,{style:Ue.bodyColumn},b.createElement(he.a,{style:Ue.titleContainer},b.createElement(R.b,{conversation:t,perspective:o}),b.createElement(he.a,{style:Ue.snippet},l?b.createElement(ue,{conversationType:t.type,entry:l,perspective:o}):null),d?this._renderSocialProof(t):null),a?this._renderTrashcan():this._renderTimestamp())))}}]),n}(b.Component);v()(Fe,"defaultProps",{isActive:!1,filter:function(e){return!0},unread:!1});var Ue=Oe.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small,width:"100%"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},bodyColumn:{flexDirection:"row"},titleContainer:{flex:1},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.deepGray,paddingTop:e.spaces.xxSmall},trashcanIcon:{color:e.colors.red},snippet:{maxHeight:e.spaces.xLarge,overflow:"hidden"},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.xxSmall}}})),He=Object(me.a)(k(Fe),{page:"messages",section:"inbox"}),Ge=n("dwig"),Ve=n("v//M"),We=n("QB0K"),Ke=n("Avzu"),ze=n("FRNI");function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var Ze=W.a.dabdea6b,Xe=W.a.f325afc3,Qe=function(e){u()(n,e);var t=qe(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return b.createElement(We.a,{accessibilityLabel:Ze,href:"/messages/compose",icon:b.createElement(Ke.a,null),label:Ze,scribeComponent:"floating_dm_button",shortLabel:Xe,testID:ze.a.message})}}]),n}(b.PureComponent),Ye=n("VwDm"),Je=n("VPAj");function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=et(et({},n("IRWI").a),{},{initialScrollHeadroom:Object(Je.a)(0),scrollHeadroom:Object(Je.a)(0),pinToTopWhenAtTop:!0}),nt=n("tI3i"),rt=n.n(nt),at=n("TEoO"),ot=n("yoO3"),it=n("IG4P"),ct=n("GSsg"),st=n("2g+p"),lt=n("6OUF"),ut=n("mw9i"),dt=n("VY6S"),pt=n("+d3d");function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var ht=function(e){return e},mt=W.a.a66ac766,vt=W.a.fe61929d,bt=function(e){u()(n,e);var t=ft(n);function n(e,r){var o;return a()(this,n),o=t.call(this,e,r),v()(s()(o),"state",{filterQuery:""}),v()(s()(o),"_render",(function(){var e=o.props,t=e.accessibilityTitle,n=e.conversationIds,r=e.footer,a=e.isRefreshing,i=e.renderEmptyDMInbox,c=e.renderStickyContent,s=e.virtualScrollerCacheKey;return b.createElement(b.Fragment,null,c?c():null,o._enableSearchInbox?b.createElement(he.a,{style:yt.searchInput},b.createElement(lt.a,{Icon:Ye.a,onChange:o._handleSearchChange,onClear:o._handleSearchClear,onFocus:o._handleSearchFocus,placeholder:vt,withClearButton:!0})):null,b.createElement(E.a,null,b.createElement(it.a,{isRefreshing:a,onRefresh:o._handlePullToRefresh},s&&n?b.createElement(at.a,{accessibilityRole:"tablist",accessibilityTitle:t,anchoring:tt,assumedItemHeight:100,cacheKey:s,footer:r,identityFunction:ht,items:n,noItemsRenderer:i,onNearEnd:o._handleNearEnd,renderer:o._renderInboxItem(o.state.filterQuery)}):null)))})),v()(s()(o),"_handleNearEnd",(function(){o.state.filterQuery||o._handleHistoryRequest()})),v()(s()(o),"_handleSearchChangeInner",(function(e){var t=o.props.analytics;o.setState({filterQuery:e.toLowerCase()}),t.scribe({element:"thread",action:"search",data:{event_value:o.state.filterQuery.length}})})),v()(s()(o),"_handleSearchChangeDebounced",Object(dt.a)(o._handleSearchChangeInner,200)),v()(s()(o),"_handleSearchChange",(function(e){var t=e.currentTarget.value;return o._handleSearchChangeDebounced(t)})),v()(s()(o),"_handleSearchClear",(function(){return o._handleSearchChangeInner("")})),v()(s()(o),"_handleSearchFocus",(function(){o.props.conversationIds&&o.props.conversationIds.length<30&&o._handleHistoryRequest()})),v()(s()(o),"_renderInboxItem",(function(e){return function(t){var n=o.context.loggedInUserId,r=o.props,a=r.conversationPathPrefix,i=r.isTertiaryInbox,c=o._filterConversation(e),s="".concat(a,"/").concat(t);return rt()(!!n,"loggedInUserId must be defined"),b.createElement(y.a,{exact:!1,path:s},(function(e){return b.createElement(He,{conversationId:t,filter:c,isActive:e,isTertiaryInbox:i,key:t,link:s,onClick:o._handleConversationClick,perspective:n})}))}})),v()(s()(o),"_filterConversation",(function(e){return function(e){var t=o.state.filterQuery;if(!t)return!0;var n=o.context.loggedInUserId,r=Object.keys(e.participants),a="GROUP_DM"===e.type&&e.name&&e.name.toLowerCase().indexOf(t)>-1,i=r.some((function(a){var i=e.participants[a],c=n===a,s=1===r.length&&c,l=i&&i.user&&!c;return!(!s&&!l)&&o._userMatchesQuery(i.user.screen_name,i.user.name,t)}));return!(!a&&!i)}})),v()(s()(o),"_handleFetchInitialWrapper",(function(){o._handleFetchInitial()})),v()(s()(o),"_handleFetchInitial",(function(){var e=o.props,t=e.createLocalApiErrorHandler,n=e.fetchInboxIfNeeded,r=e.fetchUpdates;return n().then(o._updateLastSeenEventId,t()).then((function(){o._updatePolling.start()})).then((function(){return r().catch(t())}))})),v()(s()(o),"_handleConversationClick",(function(e,t){var n=o.props,r=n.customCellClick;n.analytics.scribe({element:"thread",action:"click",data:{event_value:o.state.filterQuery.length}}),r&&r(e,t)})),v()(s()(o),"_handleEmptyDMInboxImpression",(function(){o.props.analytics.scribe({component:"empty_message",action:"impression"})})),v()(s()(o),"_handlePullToRefresh",(function(){var e=o.props,t=e.createLocalApiErrorHandler;(0,e.fetchInbox)().then(o._updateLastSeenEventId,t())})),v()(s()(o),"_updateLastSeenEventIdIfActive",(function(){if("background"!==st.a.currentState)return o._updateLastSeenEventId()})),v()(s()(o),"_updateLastSeenEventId",(function(){var e=o.props,t=e.createLocalApiErrorHandler;return(0,e.updateLastSeenEventId)().catch(t())})),o._fab=b.createElement(Qe,null),o._enableSearchInbox=!!e.withDmSearch&&de.b.isTrue("responsive_web_search_dms_enabled"),o}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.createLocalApiErrorHandler,r=t.fetchInboxHistory,a=t.fetchUpdates;return this._updatePolling=new ct.a((function(){a().then(e._updateLastSeenEventIdIfActive,n())}),{interval:8e3}),this._handleHistoryRequest=Object(pt.a)((function(){r.apply(void 0,arguments).catch(n())}),1e3),this._handleFetchInitial()}},{key:"componentWillUnmount",value:function(){this._updatePolling.stop()}},{key:"render",value:function(){return b.createElement(ot.a,null,b.createElement(Ge.a,{component:ut.a,fab:this._fab,style:yt.root},b.createElement(Ve.a,{accessibilityLabel:mt,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render})))}},{key:"_userMatchesQuery",value:function(e,t,n){return e&&e.toLowerCase().indexOf(n)>-1||t&&t.toLowerCase().indexOf(n)>-1}}]),n}(b.Component);v()(bt,"contextType",g.a),v()(bt,"defaultProps",{conversationIds:[],isTertiaryInbox:!1,withDmSearch:!1});var yt=Oe.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchInput:{backgroundColor:e.colors.cellBackground,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:"1px",padding:e.spaces.xSmall,zIndex:1}}}));t.a=bt},uHIe:function(e,t,n){"use strict";n.r(t),n.d(t,"DMMediaScreen",(function(){return g}));n("KqXw"),n("MvUL");var r=n("ERkP"),a=(n("WNMA"),n("oEGd")),o=n("hqKg"),i=n("zh9S"),c=n("H9MA"),s=n("uKEd"),l=function(e,t){return t.match.params.entryId},u=Object(o.createSelector)(l,(function(e,t){return Object(s.n)(e,l(0,t))}),(function(e,t){return t.match.params.conversationId}),c.c,(function(e,t,n,r){var a=t&&t.message_data.attachment||{};return{conversationId:n,mediaItem:a.photo||a.animated_gif||a.video,messageId:e,dataSaver:r}})),d={scribeAction:i.c},p=Object(a.g)(u,d),f=n("7JQg"),h=n("2doW"),m=n("UPvq"),v=n("wiP2"),b=n("lklz"),y=n("RCZO"),g=function(e){var t=e.dataSaver,n=e.mediaItem,a=e.messageId,o=e.history,i=e.conversationId,c=Object(y.c)(n),s=Object(y.h)(),l=s.hideButtons,u=s.handleMediaDetailZoomed,d=s.handleMediaItemTapped,p=function(){var e=i?"/messages/".concat(i):"/messages";o.goBack({backLocation:e})};return r.useEffect((function(){n||o.replace(i?"/messages/".concat(i):"/messages")}),[o,i,n]),n?r.createElement(v.a.Configure,{headerless:!0},r.createElement(m.a,{backgroundColor:c,hideButtons:l,mediaItem:n,onCloseButtonPress:p},r.createElement(h.a,{dataSaver:t,mediaItems:[n],onDismiss:p,onMediaDetailZoomed:u,onTap:d,videoId:b.b.forDm(a)}))):null};t.default=Object(f.c)({page:"messages",section:"media"})(p(g))},wG2w:function(e,t,n){"use strict";n.r(t),n.d(t,"DMUntrustedInboxScreen",(function(){return W}));n("2G9S"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("WNMA"),n("uFXj");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("HPNB"),g=n("pxuL"),E=n("v6aA"),_=n("hl/W"),O=n("qz2E"),C=n("qS4/"),I=n("3XMw"),w=n.n(I),S=n("xPna"),x=n("f42t"),P=n("5FtR"),D=n("M2mT"),k=n("+Bsv"),M=n("MWbm"),R=n("0yYu"),j=n("t62R"),T=n("cm6r"),A=n("cHvH"),L=n("FIs5"),N=n("rHpw");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var F=w.a.cf2d1047,U=w.a.bef0039f,H=w.a.eb7de4a9,G=w.a.a0e81a2e,V=w.a.a5359aac,W=function(e){u()(n,e);var t=B(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"componentDidMount",(function(){var t=e.props.analytics;e._shouldRenderTombstone()&&t.scribe({element:"low_quality_pivot",action:"impression"}),e.context.setDmDrawerSupport(!1)})),v()(s()(e),"componentDidUpdate",(function(t){var n=e.props.analytics;!e._shouldRenderTombstone()||t.allowLowQualityUntrustedInbox&&t.isAtEndOfUntrustedInbox||n.scribe({element:"low_quality_pivot",action:"impression"})})),v()(s()(e),"componentWillUnmount",(function(){e.context.setDmDrawerSupport(!0)})),v()(s()(e),"_shouldRenderTombstone",(function(){var t=e.props,n=t.allowLowQualityUntrustedInbox,r=t.isAtEndOfUntrustedInbox;return n&&r})),v()(s()(e),"_renderTombstone",(function(){var t=e.props.conversationIds;return e._shouldRenderTombstone()?b.createElement(M.a,null,t.length>0&&b.createElement(R.a,null),b.createElement(M.a,{style:K.tombstoneDescription},b.createElement(j.c,{color:"deepGray",size:"small"},H)),b.createElement(T.a,{link:"/messages/requests/additional",onPress:e._handleTombstoneClick,style:K.tombstoneContainer},b.createElement(j.c,{align:"center",color:"primary",size:"normal"},G))):null})),v()(s()(e),"_renderStickyCopy",(function(){var t=e.props.conversationIds;return b.createElement(A.a,null,(function(e){var n=e.windowWidth,r=y.a.isTwoColumnLayout(n),a=0===t.length;return r||a?null:b.createElement(M.a,{style:K.stickyCopyContainer},b.createElement(j.c,{style:K.stickyCopy},V))}))})),v()(s()(e),"_renderSettingsAppBarButton",(function(){return b.createElement(E.a.Consumer,null,(function(e){var t=e.featureSwitches.isTrue("responsive_web_settings_revamp_enabled")?"/settings/direct_messages":"/settings/safety";return b.createElement(k.a,{to:t})}))})),v()(s()(e),"_renderEmptyDMInbox",(function(){var t=e._renderTombstone();return b.createElement(b.Fragment,null,b.createElement(L.a,{header:t?"":U,message:V,style:K.emptyMessage}),t)})),v()(s()(e),"_handleBackClick",(function(){e.props.history.push("/messages")})),v()(s()(e),"_handleTombstoneClick",(function(){e.props.analytics.scribe({element:"low_quality_pivot",action:"click"})})),v()(s()(e),"_hasConversationOpen",(function(){return!e.props.match.isExact})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.analytics,n=e.allowUntrustedInbox,r=e.conversationIds,a=e.createLocalApiErrorHandler,o=e.fetchInbox,i=e.fetchInboxHistory,c=e.fetchInboxIfNeeded,s=e.fetchStatus,l=e.fetchUpdates,u=e.isRefreshing,d=e.updateLastSeenEventId;return n?b.createElement(D.a,{backLocation:"/messages",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:F,withDetailOpen:this._hasConversationOpen()},b.createElement(C.a,{accessibilityTitle:F,analytics:t,conversationIds:r,conversationPathPrefix:"/messages/requests",createLocalApiErrorHandler:a,fetchInbox:o,fetchInboxHistory:i,fetchInboxIfNeeded:c,fetchStatus:s,fetchUpdates:l,footer:this._renderTombstone(),isRefreshing:u,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,updateLastSeenEventId:d,virtualScrollerCacheKey:"dmUntrustedInbox"})):b.createElement(P.a,{to:"/messages"})}}]),n}(b.Component);v()(W,"contextType",g.a),v()(W,"defaultProps",{conversationIds:[]});var K=N.a.create((function(e){return{emptyMessage:{borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.small},stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.deepGray,padding:e.spaces.medium},tombstoneContainer:{borderTopStyle:"solid",borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.xSmall},tombstoneDescription:{paddingHorizontal:e.spaces.small,paddingVertical:e.spaces.small}}})),z=Object(x.a)(Object(_.a)({inbox:S.b.secondary})(W),{directMessages:O.a});t.default=z},wO1l:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return w}));n("1t7P"),n("2G9S"),n("LW0h"),n("jwue"),n("z84I"),n("5BYb"),n("tQbP"),n("ho0z"),n("daRM"),n("FtHn"),n("+KXO"),n("iKE+"),n("KqXw"),n("DZ+c"),n("+oxZ");var r=n("ddV6"),a=n.n(r),o=n("KEM+"),i=n.n(o),c=n("m3Bd"),s=n.n(c),l=n("aWyx"),u=n("4q8G"),d=n("lL5k"),p=n.n(d),f=n("XnpN"),h=n("w6IS"),m=n("s1N3"),v=n("VIKJ"),b=n("vy4g"),y=n("GZwR");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){return Object(h.a)(e.map((function(e){return Object(f.a)(e,t).map((function(e){return e.user}))})))};function O(e){return Object(m.a)(e,(function(e){var t=e.type,n=e.id;return t===y.b.DMConversation?"c_".concat(n):"u_".concat(n)}))}var C=function(e){var t=e.id_str,n=Object(b.a)(Object(b.b)(e),y.c.DMInjected),r=n.tokens,a=n.rounded_score,o=n.src;return{data:E(E({},s()(n,["tokens","rounded_score","src"])),{},{can_dm:!0}),rounded_score:a,tokens:r,src:o,id:t,type:y.b.User}},I=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e&&new RegExp("(^|.*\\s)".concat(p()(e),".*"),"i"),o=_(t.sort(u.a),n).filter((function(e){return(!a||(a.test(e.screen_name)||a.test(e.name)))&&(e.followed_by||r)})).map((function(e){return C(e)}));return O(o)};function w(e,t,n){var r=e&&new RegExp("(^|.*\\s)".concat(p()(e),".*"),"i"),o=t.filter((function(e){return e.trusted})).filter((function(t){if(!e)return!0;var a=r&&t.name&&r.test(t.name),o=Object(f.a)(t,n).map((function(e){return e.user})),i=r&&o.some((function(e){return r.test(e.screen_name)||r.test(e.name)}));return a||i})).sort(u.a),i=o;if(e){var c=Object(v.a)(o,(function(e){return e.type===l.a.ONE_TO_ONE})),s=a()(c,2),d=s[0],m=s[1];i=d.concat(m)}return O(Object(h.a)(i.map((function(t){var r=t.type===l.a.GROUP,a=[];return r&&a.push(function(e){return{data:{name:e.name||"",conversationId:e.conversation_id},id:e.conversation_id,type:y.b.DMConversation}}(t)),!e&&r||(a=a.concat(I(r?e:null,[t],n,!r))),a}))))}},yV8l:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationInfoScreen",(function(){return He})),n.d(t,"styles",(function(){return Ge}));n("1t7P"),n("LW0h"),n("jwue"),n("7xRU"),n("z84I"),n("M+/F"),n("ho0z"),n("daRM"),n("FtHn"),n("+KXO"),n("7x/C"),n("1IsZ"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("WNMA"),n("+oxZ");var r=n("VrFO"),a=n.n(r),o=n("Y9Ll"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("5Yy7"),u=n.n(l),d=n("N+ot"),p=n.n(d),f=n("AuHH"),h=n.n(f),m=n("KEM+"),v=n.n(m),b=n("ERkP"),y=n("v6aA"),g=n("EbOo"),E=n("EPsT"),_=(n("6U7i"),n("MMRb")),O=n("RqPI"),C=n("1YZw"),I=n("oEGd"),w=n("0KEI"),S=n("hqKg"),x=n("p9G8"),P=n("AQOc"),D=n("zh9S"),k=n("G6rE"),M=function(e,t){return t.match.params.conversationId},R=Object(S.createSelector)((function(e,t){return _.selectConversation(e,M(0,t))}),_.selectEntries,M,(function(e,t){return _.selectConversationFetchStatus(e,M(0,t))}),O.f,O.g,k.e.selectAll,(function(e,t,n,r,a,o,i){var c=e&&e.data,s=c&&Object(P.b)(c,t,i),l=s&&Object(x.a)(s,o),u=!(!c||!c.notifications_disabled),d=!(!c||!c.mention_notifications_disabled),p=c&&c.mute_expiration_time&&Number(c.mute_expiration_time),f=s?Object.keys(s.participants):[],h=f&&1===f.length&&f[0]===o,m=f&&f.filter((function(e){return e!==o})),v=h?f:m.slice(0,5),b=v.length<m.length;if(!o)throw new Error("logged-in user not found");return{conversation:s,conversationId:n,fetchStatus:r,groupName:l,mentionNotificationsDisabled:d,language:a,muteExpirationTime:p,notificationsDisabled:u,perspective:o,showViewPeople:b,visibleParticipants:v,isSelfConversation:h}})),j={addToast:C.b,block:k.e.block,createLocalApiErrorHandler:Object(w.d)("DIRECT_MESSAGES_CONVERSATION_INFO"),disableMentionNotifications:_.disableMentionNotifications,disableNotifications:_.disableNotifications,enableMentionNotifications:_.enableMentionNotifications,enableNotifications:_.enableNotifications,fetchConversationIfNeeded:_.fetchConversationIfNeeded,leaveConversation:_.leaveConversation,muteConversation:_.muteConversation,scribeAction:D.c,unblock:k.e.unblock,unmuteConversation:_.unmuteConversation,updateConversationName:_.updateConversationName},T=Object(I.g)(R,j),A=n("7JQg"),L=n("aWyx"),N=n("I2k/"),B=n("aA19"),F=n("v//M"),U=n("XnpN"),H=n("3XMw"),G=n.n(H),V=n("tuLS"),W=n("M2mT"),K=n("u0B7"),z=n("Re5t"),q=n("hqDb"),Z=n("MWbm"),X=n("mjJ+"),Q=n("mw9i"),Y=n("5mJL"),J=n("t62R"),$=n("0yYu"),ee=n("6vad"),te=n("jtO7"),ne=n("CK8+"),re=n("rHpw"),ae=n("mN6z"),oe=n("fs1G");function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var le=G.a.e3e58b6d,ue=G.a.a9ddbb94,de=G.a.abd845fd,pe=G.a.g2fd3205,fe=G.a.eb1bb5a1,he=G.a.c6026009,me=G.a.eb75875d,ve=G.a.a7f20222,be=G.a.g2f04a6a,ye=G.a.i453fedf,ge=G.a.j9552760,Ee=G.a.ec39f437,_e=G.a.g946f84b,Oe=G.a.b3dfd519,Ce=G.a.i8cf41b1,Ie=G.a.cc7c8ce6,we=G.a.hab58673,Se=G.a.e3c6e080,xe={confirmButtonLabel:G.a.bb1d57b6,actionTextDelete:G.a.ad63377d,actionTextLeave:G.a.g9074da4,header:G.a.gdf4b79f,text:G.a.h09b49f7},Pe=G.a.e67b2d65,De=G.a.f05597b2,ke=G.a.i6b19b07,Me=G.a.j7bb1a42,Re=G.a.fcd4d489,je=G.a.a30e1677,Te=G.a.a9fd20be,Ae=G.a.e133be4e,Le=G.a.c9623eeb,Ne=G.a.cceeaf2b,Be=G.a.d87bff5a,Fe=[{duration:1,displayText:G.a.j37c4674,toast:G.a.je7e1fec,toastOld:G.a.hf94a2d5},{duration:2,displayText:G.a.fb7a43c5,toast:G.a.e95c8f8a,toastOld:G.a.bd54fad1},{duration:3,displayText:G.a.cb5bf56e,toast:G.a.gb7a130b,toastOld:G.a.f6fce0fd},{duration:0,displayText:G.a.cabeb6c1,toast:G.a.i78153dd,toastOld:G.a.hfc86556}],Ue={page:"messages",section:"settings"},He=function(e){u()(n,e);var t=se(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(s()(r),"_getNameOfGroupOrOneToOneConvo",(function(){var e=r.props,t=e.groupName,n=e.conversation;return(null==n?void 0:n.type)===L.a.GROUP?t||"":r._getNameOfOneToOneConvo()})),v()(s()(r),"_getScreenNameOfOneToOneConvo",(function(){var e=r._getSenderOfOneToOneConvo();return e?e.screen_name:""})),v()(s()(r),"_getNameOfOneToOneConvo",(function(){var e=r._getSenderOfOneToOneConvo();return e?e.name:""})),v()(s()(r),"_getBlockedOfOneToOneConvo",(function(){var e=r._getSenderOfOneToOneConvo();return e?e.blocking:null})),v()(s()(r),"_getSenderOfOneToOneConvo",(function(){var e=r.props,t=e.conversation,n=e.perspective,a=t&&Object(U.a)(t,n).map((function(e){return e.user}));return a&&a[0]||null})),v()(s()(r),"_renderContent",(function(){var e=r.props.conversation,t=!(null==e?void 0:e.trusted);return b.createElement(y.a.Consumer,null,(function(e){var n=e.featureSwitches,a=n.isTrue("responsive_web_dm_health_snooze_rename"),o=n.isTrue("dm_conversations_muting_enabled");return b.createElement(Z.a,null,r._renderGroupSection(),r._renderParticipantsSection(),t?null:r._renderNotificationsSection(a),r._renderConversationActions(o))}))})),v()(s()(r),"_getItems",(function(e){return Fe.map((function(t){return{text:t.displayText,onClick:function(){return r._handleNotificationsDisabled(t,e)}}}))})),v()(s()(r),"_renderActionMenu",(function(e){return function(t){return b.createElement(X.a,{items:r._getItems(e),onCloseRequested:t})}})),v()(s()(r),"_handleViewPeople",(function(){r._scribeAction("view_participants")})),v()(s()(r),"_handleMuteConversation",(function(){var e=r.props,t=e.conversationId,n=e.createLocalApiErrorHandler,a=e.muteConversation,o=r._getSenderOfOneToOneConvo();o&&(a(o.id_str,t).catch(n()),r._scribeAction("mute_user"))})),v()(s()(r),"_handleUnmuteConversation",(function(){var e=r.props,t=e.conversationId,n=e.createLocalApiErrorHandler,a=e.unmuteConversation,o=r._getSenderOfOneToOneConvo();o&&(a(o.id_str,t).catch(n()),r._scribeAction("unmute_user"))})),v()(s()(r),"_handleBlockUser",(function(){var e=r.props,t=e.addToast,n=e.block,a=e.createLocalApiErrorHandler,o=r._getSenderOfOneToOneConvo(),i=o?o.id_str:"";""!==i&&(n(i).then((function(){t({actionLabel:Ae,onAction:r._handleUnblockUser,text:Te})}),a(g.a)),r._scribeAction("block"))})),v()(s()(r),"_handleUnblockUser",(function(){var e=r._getSenderOfOneToOneConvo(),t=e?e.id_str:"",n=r.props,a=n.createLocalApiErrorHandler;(0,n.unblock)(t).catch(a(K.a)),r._scribeAction("unblock")})),v()(s()(r),"_handleReportConversation",(function(){r._scribeAction("report")})),v()(s()(r),"_handleFetch",(function(){var e=r.props,t=e.createLocalApiErrorHandler,n=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:n}).catch(t(Object(N.a)(n)))})),v()(s()(r),"_handleLeaveConversation",(function(){var e=r.props,t=e.conversation,n=e.conversationId,a=e.createLocalApiErrorHandler;(0,e.leaveConversation)({conversationId:n}).catch(a({showToast:!0}));var o=(null==t?void 0:t.type)===L.a.GROUP?"leave_group":"delete_thread";r._scribeAction(o),r._handleConversationClose()})),v()(s()(r),"_handleNotificationsDisabled",(function(e,t){var n=r.props,a=n.addToast,o=n.conversationId,i=n.disableNotifications,c=r._getNameOfGroupOrOneToOneConvo();i({conversationId:o,duration:e.duration}),a({text:t?e.toast({name:c}):e.toastOld})})),v()(s()(r),"_handleNotificationsEnabled",(function(e){return function(){var t=r.props,n=t.addToast,a=t.conversationId,o=t.createLocalApiErrorHandler,i=t.enableNotifications,c=r._getNameOfGroupOrOneToOneConvo(),s=e?be({name:c}):Ee;i({conversationId:a}).then((function(){n({text:s})}),o({showToast:!0}))}})),v()(s()(r),"_handleMentionSwitchChanged",(function(e){var t=r.props,n=t.addToast,a=t.conversationId,o=t.createLocalApiErrorHandler,i=t.disableMentionNotifications,c=t.enableMentionNotifications;(0,t.scribeAction)(ce(ce({},t.scribeNamespace),{},{component:"dm_existing_conversation_dialog",action:e?"disable_mentions":"enable_mentions"})),e?i({conversationId:a}).then((function(){n({text:we})}),o({showToast:!0})):c({conversationId:a}).then((function(){n({text:Se})}),o({showToast:!0}))})),v()(s()(r),"_handleConversationClose",(function(){var e=r.props,t=e.history,n=e.match,a=Object.values(n.params).slice(0,-1).filter(Boolean);t.push({pathname:"/messages".concat(a.join(""))})})),v()(s()(r),"_scribeAction",(function(e){var t=r.props,n=t.conversation,a=t.scribeAction,o=t.scribeNamespace,i=(null==n?void 0:n.trusted)?"trusted_conversation_info":"untrusted_conversation_info";a(ce(ce({},o),{},{element:i,action:e}),r._getScribeData())})),v()(s()(r),"_getScribeData",(function(){var e=r.props.conversation;return{items:[{conversation_type:(null==e?void 0:e.type)===L.a.GROUP?1:0}]}})),r.state={notificationsDisabled:e.notificationsDisabled,muteExpirationTime:e.muteExpirationTime},r}return i()(n,[{key:"componentDidMount",value:function(){this._handleFetch()}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(ae.a)(e,this.props)||!Object(ae.a)(t,this.state)}},{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.fetchStatus,r=e.conversationId,a=(null==t?void 0:t.type)===L.a.GROUP;return b.createElement(W.a,{backLocation:"/messages/".concat(r),screenType:"secondaryDetail",title:a?ue:le,withBottomTabBar:!1},b.createElement(Q.a,{style:Ge.root},b.createElement(F.a,{accessibilityLabel:Be,fetchStatus:n,onRequestRetry:this._handleFetch,render:this._renderContent})))}},{key:"_renderGroupSection",value:function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.groupName,a=e.perspective,o=(null==t?void 0:t.type)===L.a.GROUP,i=null==t?void 0:t.trusted;return o?b.createElement(Y.a,{avatarCell:b.createElement(B.a,{conversation:t,perspective:a}),cellStyle:Ge.groupSectionRight,style:Ge.groupSection},b.createElement(J.c,{numberOfLines:1,weight:"bold"},r),i?b.createElement(J.c,{link:"/messages/".concat(n,"/group-info"),style:Ge.edit},de):null):null}},{key:"_renderParticipantsSection",value:function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.showViewPeople,a=e.visibleParticipants,o=(null==t?void 0:t.type)===L.a.GROUP,i=null==t?void 0:t.trusted;return b.createElement(Z.a,null,o?b.createElement(b.Fragment,null,b.createElement($.a,null),b.createElement(ee.a,{text:pe})):null,b.createElement(q.a,{displayMode:z.a.UserCompact,userIds:a,withFinalItemBorder:o,withItemBorder:!0}),r?b.createElement(te.a,{color:"primary",label:fe,link:"/messages/".concat(n,"/participants"),onClick:this._handleViewPeople,withBottomBorder:!0}):null,o&&i?b.createElement(te.a,{color:"primary",label:he,link:"/messages/".concat(n,"/add")}):null)}},{key:"_renderSnoozeConversationSwitch",value:function(e){var t=this.props,n=t.muteExpirationTime,r=t.notificationsDisabled,a=this._getNameOfGroupOrOneToOneConvo(),o=e?ve({name:a}):ge;return r?b.createElement(Z.a,{accessibilityRole:"label"},b.createElement(Z.a,{style:Ge.notificationsToggleContainer},b.createElement(J.c,{color:"normal"},o),b.createElement(ne.a,{onValueChange:this._handleNotificationsEnabled(e),value:r})),n?b.createElement(J.c,{color:"deepGray",size:"small",style:Ge.notificationsDescription},this._displayExpirationTime(e)):null):b.createElement(Z.a,{style:Ge.notificationsToggleContainer},b.createElement(J.c,{color:"normal"},o),b.createElement(V.a,{accessibilityLabel:o,renderMenu:this._renderActionMenu(e)},b.createElement(ne.a,{onValueChange:oe.a,value:r})))}},{key:"_renderSnoozeMentionsSwitch",value:function(e){var t=this.props.mentionNotificationsDisabled;return b.createElement(Z.a,null,b.createElement(Z.a,{accessibilityRole:"label",style:Ge.notificationsToggleContainer},b.createElement(J.c,{color:"normal"},e?Oe:Ce),b.createElement(ne.a,{onValueChange:this._handleMentionSwitchChanged,value:t})),b.createElement(J.c,{color:"deepGray",size:"small",style:Ge.notificationsDescription},Ie))}},{key:"_renderNotificationsSection",value:function(e){var t=this.props,n=t.conversation,r=t.isSelfConversation,a=(null==n?void 0:n.type)===L.a.GROUP;return r?null:b.createElement(Z.a,null,b.createElement($.a,null),b.createElement(ee.a,{text:me}),b.createElement(Z.a,{style:a&&Ge.settingGroup},this._renderSnoozeConversationSwitch(e)),a?this._renderSnoozeMentionsSwitch(e):null)}},{key:"_displayExpirationTime",value:function(e){var t=this.props,n=t.language,r=t.muteExpirationTime;if(!r)return null;var a=r-(new Date).getTime()<864e5,o=new Date(r).toLocaleString(n||"en",a?{hour:"2-digit",minute:"2-digit"}:{weekday:"long",month:"short",day:"2-digit"});return e?ye({expiration:o}):_e({expiration:o})}},{key:"_renderConversationActions",value:function(e){var t=this.props.conversation,n=(null==t?void 0:t.type)!==L.a.GROUP,r=!(null==t?void 0:t.trusted);return b.createElement(Z.a,null,b.createElement($.a,null),n&&e&&r?this._renderMuteButton():null,n?this._renderBlockUserButton():null,this._renderReportConversationButton(),b.createElement(E.a,{confirmationSheetConfirmButtonLabel:xe.confirmButtonLabel,confirmationSheetConfirmButtonType:"destructive",confirmationSheetHeadline:xe.header,confirmationSheetText:xe.text,label:r?xe.actionTextDelete:xe.actionTextLeave,onConfirmationSheetConfirm:this._handleLeaveConversation,withBottomBorder:!1}))}},{key:"_renderMuteButton",value:function(){var e=this.props.conversation,t=this._getScreenNameOfOneToOneConvo();return e?e.muted?b.createElement(te.a,{color:"primary",label:De({screenName:t}),onPress:this._handleUnmuteConversation}):b.createElement(te.a,{color:"primary",label:Pe({screenName:t}),onPress:this._handleMuteConversation}):null}},{key:"_renderBlockUserButton",value:function(){var e=this.props.isSelfConversation,t=this._getScreenNameOfOneToOneConvo(),n=this._getBlockedOfOneToOneConvo(),r=n?Ne({screenName:t}):je({screenName:t}),a=n?Le({screenName:t}):Re({screenName:t});return e?null:b.createElement(E.a,{color:"primary",confirmationSheetText:r,label:a,onConfirmationSheetConfirm:n?this._handleUnblockUser:this._handleBlockUser})}},{key:"_renderReportConversationButton",value:function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.isSelfConversation,a=(null==t?void 0:t.type)!==L.a.GROUP?Me({screenName:this._getScreenNameOfOneToOneConvo()}):ke,o={pathname:"/i/report/dm_conversation/".concat(n),state:{clientReferer:window.location.pathname,scribeNamespace:Ue}};return r?null:b.createElement(te.a,{color:"primary",label:a,link:o,onPress:this._handleReportConversation})}}]),n}(b.Component),Ge=re.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground},edit:{flexShrink:0},groupSection:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},groupSectionRight:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},notificationsToggleContainer:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},notificationsDescription:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingBottom:e.componentDimensions.gutterVertical,paddingTop:0},settingGroup:{borderBottomColor:e.colors.borderColor,borderBottomWidth:1,borderBottomStyle:"solid"}}}));t.default=Object(A.c)(Ue)(T(He))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.DirectMessages.1bb2b1a5.js.map