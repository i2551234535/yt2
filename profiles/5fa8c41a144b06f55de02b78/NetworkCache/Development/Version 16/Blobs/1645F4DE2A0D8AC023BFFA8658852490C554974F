(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{okjw:function(t,e,n){"use strict";n.r(e),n.d(e,"LogoutErrorScreen",(function(){return N}));n("2G9S"),n("7x/C"),n("OZaJ"),n("KqXw"),n("DZ+c"),n("MvUL");var r=n("VrFO"),o=n.n(r),a=n("Y9Ll"),c=n.n(a),u=n("1Pcy"),i=n.n(u),l=n("5Yy7"),s=n.n(l),f=n("N+ot"),h=n.n(f),d=n("AuHH"),p=n.n(d),g=n("KEM+"),y=n.n(g),E=n("ERkP"),v=n("oEGd"),L=n("0KEI"),b=n("KkUe"),O={createLocalApiErrorHandler:Object(L.d)("LOGOUT_ERROR_SCREEN"),logout:b.a},m=Object(v.b)(O),S=n("7JQg"),D=n("kGix"),w=n("v//M"),A=n("3XMw"),R=n.n(A),_=n("yoO3"),k=n("5FtR"),C=n("BTou"),M=n("feu+"),x=n("sgih");function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var T=R.a.ae1bbb26,j=R.a.a5077d3d,G=R.a.gc6866f7,U=R.a.c20aaf3d,I=R.a.c55f5c9a,K=function(){return null},N=function(t){s()(n,t);var e=H(n);function n(){var t;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a)),y()(i()(t),"state",{fetchStatus:D.a.LOADED}),y()(i()(t),"_renderError",(function(){return E.createElement(_.a,null,E.createElement(M.a,{actionLabel:j,headline:U,isFullHeightOnMobile:!0,onAction:t._handleRefresh,onClose:t._handleRefresh,onSecondaryAction:t._handleLogout,secondaryActionLabel:T,subtext:I,withCloseButton:!1}))})),y()(i()(t),"_redirectToHome",(function(){return E.createElement(k.a,{to:"/"})})),y()(i()(t),"_handleLogout",(function(){var e=t.props,n=e.createLocalApiErrorHandler,r=e.logout;t.setState({fetchStatus:D.a.LOADING}),r({redirectAfterLogout:"/"}).catch((function(e){return t.setState({fetchStatus:D.a.LOADED}),n({showToast:!0})(e)}))})),y()(i()(t),"_handleRefresh",(function(t){C.a.flushHTMLCache(),window.location.replace("/")})),t}return c()(n,[{key:"render",value:function(){var t=this.props.location,e=this.state.fetchStatus;return e===D.a.LOADED?t.state&&t.state.error||t.query.testing?this._renderError():this._redirectToHome():E.createElement(x.a,{type:"full"},E.createElement(w.a,{fetchStatus:e,loadingMessage:G,onRequestRetry:this._handleLogout,render:K}))}}]),n}(E.Component);e.default=Object(S.c)({page:"logout_error"})(m(N))},"x/Xu":function(t,e,n){"use strict";n.r(e),n.d(e,"LogoutScreen",(function(){return Y}));n("2G9S"),n("7x/C"),n("OZaJ"),n("DZ+c");var r=n("VrFO"),o=n.n(r),a=n("Y9Ll"),c=n.n(a),u=n("1Pcy"),i=n.n(u),l=n("5Yy7"),s=n.n(l),f=n("N+ot"),h=n.n(f),d=n("AuHH"),p=n.n(d),g=n("KEM+"),y=n.n(g),E=n("ERkP"),v=n("pxuL"),L=n("oEGd"),b=n("0KEI"),O=n("hqKg"),m=n("KkUe"),S=n("G6rE"),D=Object(O.createSelector)(S.e.selectLoggedInUser,(function(t){return{loggedInUser:t}})),w={createLocalApiErrorHandler:Object(b.d)("LOGOUT_SCREEN"),logout:m.a},A=Object(L.g)(D,w),R=n("7JQg"),_=n("kGix"),k=n("v//M"),C=n("3Wr5"),M=n("3XMw"),x=n.n(M),H=n("lUZE"),T=n("8jkQ"),j=n("yoO3"),G=n("eb3s"),U=n("sgih"),I=n("rHpw");function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h()(this,n)}}var N=x.a.a3fad4f2,q=x.a.f12b4db4,B=x.a.ae1bbb26,J=x.a.ia5ff8b6,P=x.a.ea3750c3,F=x.a.gc6866f7,Z=function(){return null},X=function(t){var e=t.query.redirect_after_logout;return"string"==typeof e?e:Array.isArray(e)&&"string"==typeof e[0]?e[0]:void 0},Y=function(t){s()(n,t);var e=K(n);function n(){var t;o()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a)),y()(i()(t),"state",{fetchStatus:_.a.LOADED}),y()(i()(t),"_render",(function(){var e=t.props.loggedInUser,n=Object(C.a)().hasMultiAccountCookie;return E.createElement(j.a,null,E.createElement(G.a,{Icon:H.a,allowBackNavigation:!0,confirmButtonLabel:B,confirmButtonType:"primary",enableMaskForDismiss:!0,headline:n&&e?q({screenName:e.screen_name}):N,iconStyle:Q.icon,onCancel:t._handleCancel,onConfirm:t._handleLogout,text:n?P:J}))})),y()(i()(t),"_handleLogout",(function(){var e=Object(C.a)().hasMultiAccountCookie,n=t.props,r=n.createLocalApiErrorHandler,o=n.location,a=n.logout;t.setState({fetchStatus:_.a.LOADING}),a({redirectAfterLogout:X(o)||(e?"https://".concat(window.location.host,"/account/switch"):void 0)}).catch((function(e){return t.setState({fetchStatus:_.a.LOADED}),r({showToast:!0})(e)}))})),y()(i()(t),"_handleCancel",(function(){var e=t.props,n=e.history,r=e.location,o=X(r);o&&T.b.isTwitterUrl(o)?T.b.navigateTo(o):n.goBack()})),t}return c()(n,[{key:"componentDidMount",value:function(){this.context.setDmDrawerSupport(!1)}},{key:"componentWillUnmount",value:function(){this.context.setDmDrawerSupport(!0)}},{key:"render",value:function(){var t=this.state.fetchStatus;return t===_.a.LOADED?this._render():E.createElement(U.a,{type:"full"},E.createElement(k.a,{fetchStatus:t,loadingMessage:F,onRequestRetry:this._handleLogout,render:Z}))}}]),n}(E.Component);y()(Y,"contextType",v.a);var Q=I.a.create((function(t){return{icon:{color:t.colors.brandColor,height:t.spaces.xLarge}}}));e.default=Object(R.c)({page:"logout"})(A(Y))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.Logout.858062c5.js.map